namespace drr.regulation.cftc.rewrite
version "${project.version}"

import cdm.base.*
import cdm.base.staticdata.asset.common.*

import drr.enrichment.common.*
import drr.regulation.cftc.tr.*
import drr.regulation.common.*
import drr.regulation.common.tr.*
import drr.regulation.common.trade.* as common
import drr.regulation.common.util.*
import drr.regulation.esma.*
import drr.regulation.esma.emir.*
import drr.standards.iosco.cde.base.* as cdebase
import drr.standards.iosco.cde.version2.* as cde
import drr.standards.iosco.cde.version3.* as cdeV3
import drr.standards.iosco.upi.*
import drr.standards.iso.*

type CFTCTransactionReport extends common.CommonTransactionReport:
    [rootType]
    override priorUSI Max42AlphaNumericText (0..1)
        [ruleReference empty]
    override cryptoAssetUnderlyingIndicator boolean (0..1)
        [ruleReference empty]
    override valuationTimestamp zonedDateTime (0..1)
        [ruleReference empty]
    override cleared ClearedEnum (1..1)
        [label "01 Cleared"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "1" field "Cleared"
            provision "Indicator of whether the transaction has been cleared, or is intended to be cleared, by a central counterparty."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "1" field "Cleared" footnote "14"
            provision "Throughout this Technical Specification, references to 'central counterparty' in CDE data elements should be read to mean 'derivatives clearing organizations' and 'exempt derivatives clearing organizations'."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "1" field "Cleared" footnote "15"
            provision "Throughout this Technical Specification, references to 'beta and gamma transactions' in CDE data elements should be read to mean 'clearing swaps'."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "1" field "Cleared" footnote "16"
            provision "Throughout this Technical Specification, references to 'alpha transactions' in CDE data elements should be read to mean 'original swaps'."]
    override counterparty1 Min20Max72AlphaNumericText (1..1)
        [label "13 Counterparty 1"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "13" field "Counterparty 1 (reporting counterparty)"
            provision "Identifier of the counterparty to an OTC derivative transaction who is fulfilling its reporting obligation via the report in question. In jurisdictions where both parties must report the transaction, the identifier of Counterparty 1 always identifies the reporting counterparty. In the case of an allocated derivative transaction executed by a fund manager on behalf of a fund, the fund, and not the fund manager is reported as the counterparty."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "13" field "Counterparty 1" footnote "24"
            provision "Throughout this Technical Specification, references to 'OTC derivatives' in CDE data elements should be read to mean swaps."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "13" field "Counterparty 1" footnote "25"
            provision " ROC Statement  Individuals Acting in a Business Capacity, ROC Statement - Individuals Acting in a Business Capacity."]
        [ruleReference Counterparty1]
    override counterparty2 Min20Max72AlphaNumericText (1..1)
        [label "14 Counterparty 2"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "14" field "Counterparty 2"
            provision "Identifier of the second counterparty to an OTC derivative transaction. In the case of an allocated derivative transaction executed by a fund manager on behalf of a fund, the fund, and not the fund manager is reported as the counterparty."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "14" field "Counterparty 2" footnote "26"
            provision "In the case of a swap transaction for pre-allocated block executed by a fund manager on behalf of a fund, the fund manager is reported as the counterparty."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "14" field "Counterparty 2" footnote "27"
            provision "Only one counterparty should be reported. In cases where multiple counterparties are legally responsible as the second counterparty (such as an obligated group, for example), report only one of the counterparties and use the
            same counterparty for all continuation data and lifecycle events."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "14" field "Counterparty 2" footnote "28"
            provision "ROC Statement  Individuals Acting in a Business Capacity, ROC Statement - Individuals Acting in a Business Capacity"]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "14" field "Counterparty 2" footnote "29"
            provision "Throughout this Technical Specification, Privacy Law Identifier (PLI) has been added as an allowable value for all Counterparty 2 (#14) associated data elements"]
    override reportSubmittingEntityID LEIIdentifier (1..1)
        [label "22 Submitter identifier"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "22" field "Submitter Identifier"
            provision "Identifier of the entity submitting the data to the swap data repository (SDR). The Submitter identifier will be the same as the reporting counterparty or swap execution facility (SEF), unless they use a third-party service provider to submit the data to SDR in which case, report the identifier of the third-party service provider."]
        [regulatoryReference ISDA PeerReviewGroup date "20220309"
            provision "Check whether trade is executed in a SEF first. If it is, SEF is obliged to be the Submitter. Then check for Reporting Party and Data Submitter."]
    override actionType ActionTypeEnum (1..1)
        [label "26 Action type"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "26" field "Action Type"
            provision "Type of action taken on the swap transaction or type of end-of-day reporting. Actions may include, but are not limited to, new, modify, correct, error, terminate, revive, transfer out, valuation, and collateral.
                - New: An action that reports a new swap transaction. It applies to the first message relating to a new USI or UTI.
                - Modify: An action that modifies the state of a previously submitted transaction (e.g., credit event) or changes a term of a previously submitted transaction due to a newly negotiated modification (amendment) or updates previously missing information (e.g., post price swap). It does not include correction of a previous transaction.
                - Correct: An action that corrects erroneous data of a previously submitted transaction.
                - Error: An action of cancellation of a wrongly submitted entire transaction in case it never came into existence or was not subject to part 43/part 45 reporting requirements but was reported erroneously.
                - Terminate: An action that closes an existing transaction because of a new event (e.g., Compression, Novation). This does not apply to transactions that terminate at contractual maturity date.
                - Revive: An action that reinstates a swap transaction that was reported as error or terminated by mistake.
                - Transfer out: An action that transfers swap transaction from one SDR to another SDR (change of swap data repository).
                - Valuation: An update to valuation data. There will be no corresponding Event type.
                - Collateral: An update to collateral margin data. There will be no corresponding Event type. Refer to appendix F for event model sample scenarios"]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "26" field "Action Type" footnote "33"
            provision "Only one Action type value is allowed per submission. Multiple Action type values should not be submitted in one transaction report. For example, if a data element needs to be corrected on a previously submitted transaction that is getting terminated, the Correct (CORR) value should be submitted as a separate submission prior to the submission of the Terminate (TERM) transaction."]
    override eventType EventTypeEnum (0..1)
        [label "27 Event type"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "27" field "Event Type"
            provision "Explanation or reason for the action being taken on the swap transaction. Events may include, but are not limited to, trade, novation, compression or risk reduction exercise, early termination, clearing, exercise, allocation, clearing and allocation, credit event, and transfer.
                - Trade: A creation, modification, or termination of a transaction.
                - Novation: A novation legally moves partial or all of the financial risks of a swap from a transferor to a transferee and has the effect of terminating/modifying the original transaction and creating a new transaction to identify the exposure between the transferor/transferee and remaining party.
                - Compression or Risk Reduction Exercise: Compressions and risk reduction exercises generally have the effect of terminating or modifying (i.e., reducing the notional value) a set of existing transactions and of creating a set of new transaction(s). These processes result in largely the same exposure of market risk that existed prior to the event for the counterparty.
                - Early termination: Termination of an existing swap transaction prior to scheduled termination or maturity date.
                - Clearing: Central clearing is a process where a derivatives clearing organization interposes itself between counterparties to contracts, becoming the buyer to every seller and the seller to every buyer. It has the effect of terminating an existing transaction between the buyer and the seller and thereby ensuring the performance of open contracts.
                - Exercise: The process by which a counterparty fully or partially exercises their rights specified in the contract of an option or a swaption.
                - Allocation: The process by which an agent, having facilitated a single swap transaction on behalf of several clients, allocates a portion of the executed swap to the clients.
                - Clearing and Allocation: A simultaneous clearing and allocation event in a derivatives clearing organization.
                - Credit event: An event or trigger that results in the modification of the state of a previously submitted credit derivative transaction. Applies only to credit derivatives.
                - Transfer: The process by which a swap is transferred to another SDR that  has the effect of the closing of the swap transaction at one SDR or opening of the same swap transaction using the same UTI/USI in a different SDR (new)."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "27" field "Event Type" footnote "34"
            provision "Novation  see definition in  45.1(a)"]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "27" field "Event Type" footnote "35"
            provision "Allocation  see definition in  45.1(a)"]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "27" field "Event Type" footnote "36"
            provision "Transfer  A reporting counterparty may change the swap data repository to which the transaction is reported pursuant to rule  45.10(d)."]
        [ruleReference EventType]
    override eventTimestamp zonedDateTime (1..1)
        [label "30 Event timestamp"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "30" field "Event Timestamp"
            provision "Date and time of occurrence of the event as determined by the reporting counterparty or a service provider. In the case of a clearing event, date and time when the original swap is accepted by the derivative clearing organization (DCO) for clearing and recorded by the DCOs system should be reported in this data element. The time element is as specific as technologically practicable."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "30" field "Event Timestamp" footnote "38"
            provision "In the case of collateral update (Action type = 'MARU'), this is the date for which the information contained in the report is provided. Time portion should be reported as '00:00:00'."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "30" field "Event Timestamp" footnote "39"
            provision "Both the date and time portion are required to be reported. If the time portion is not available, report '00:00:00' for the time portion."]
        [regulatoryReference ISDA PeerReviewGroup date "20240117"
            provision "DRR users are expected to use eventCreationDateTime as qualifier to the timestamp they have to report as the Event Timestamp"]
    override callAmount ShortFraction5DecimalNumber (0..1)
        [label "36 Call amount"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "36" field "Call Amount"
            provision "For foreign exchange options, the monetary amount that the option gives the right to buy."]
        [regulatoryReference ISDA PeerReviewGroup date "20211117"
            provision "Discussed at Peer Review. Group largely in agreement with proposed logic - only open question was around Credit Options which members agreed to take away and revert on at the next peer review."]
        [regulatoryReference ISDA PeerReviewGroup date "20220119"
            provision "Discussed at the DRR Peer Review call. No further input on logic for credit options:
		        - Call, in case of payer option type
		        - Put, in case of receiver option type"]
        [regulatoryReference ISDA PeerReviewGroup date "20210120"
            provision "On full termination of a trade the Put Amount and Call Amount should be reported as the prior amount, in line with the Notional field."]
        [ruleReference CallAmount]
    override callCurrency ISOCurrencyCodeEnum (0..1)
        [label "37 Call currency"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "37" field "Call Currency"
            provision "For foreign exchange options, the currency in which the Call amount is denominated."]
        [regulatoryReference ISDA PeerReviewGroup date "20211117"
            provision "Discussed at Peer Review. Group largely in agreement with proposed logic - only open question was around Credit Options which members agreed to take away and revert on at the next peer review."]
        [regulatoryReference ISDA PeerReviewGroup date "20220119"
            provision "Discussed at the DRR Peer Review call. No further input on logic for credit options:
		        - Call, in case of payer option type
		        - Put, in case of receiver option type"]
        [ruleReference CallCurrency]
    override putAmount ShortFraction5DecimalNumber (0..1)
        [label "38 Put Amount"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "38" field "Put Amount"
            provision "For foreign exchange options, the monetary amount that the option gives the right to sell."]
        [regulatoryReference ISDA PeerReviewGroup date "20211117"
            provision "Discussed at Peer Review. Group largely in agreement with proposed logic - only open question was around Credit Options which members agreed to take away and revert on at the next peer review."]
        [regulatoryReference ISDA PeerReviewGroup date "20220119"
            provision "Discussed at the DRR Peer Review call. No further input on logic for credit options:
		        - Call, in case of payer option type
		        - Put, in case of receiver option type"]
        [regulatoryReference ISDA PeerReviewGroup date "20230120"
            provision "On full termination of a trade the Put Amount and Call Amount should be reported as the prior amount, in line with the Notional field."]
        [ruleReference PutAmount]
    override putCurrency ISOCurrencyCodeEnum (0..1)
        [label "39 Put currency"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "39" field "Put Currency"
            provision "For foreign exchange options, the currency in which the Put amount is denominated."]
        [regulatoryReference ISDA PeerReviewGroup date "20211117"
            provision "Discussed at Peer Review. Group largely in agreement with proposed logic - only open question was around Credit Options which members agreed to take away and revert on at the next peer review."]
        [regulatoryReference ISDA PeerReviewGroup date "20220119"
            provision "Discussed at the DRR Peer Review call. No further input on logic for credit options:
		        - Call, in case of payer option type
		        - Put, in case of receiver option type"]
        [ruleReference PutCurrency]
    override packageTransactionPrice cdebase.price.PriceFormat (0..1)
        [label "47 Package Transaction Price"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "47" field "Package Transaction Price"
            provision "Traded price of the entire package in which the reported derivative transaction is a component. This data element is not applicable if no package is involved, or package transaction spread is used Prices and related data elements of the transactions (Price currency, Price notation, Price unit of measure) that represent individual components of the package are reported when available. The Package transaction price may not be known when a new transaction is reported but may be updated later."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "47" field "Package Transaction Price" footnote "48"
            provision "The allowable values are restricted based on CFTCs jurisdictional requirements."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "47" field "Package Transaction Price" footnote "49"
            provision "Default value with all 9s, for any of the allowable formats, is accepted when the value is unknown. When [Package transaction price notation] = '1' use '99999.9999999999999' (18 numerical characters including 13 decimal places). When [Package transaction price notation] = '3' use '9.9999999999' (11 numerical characters including 10 decimal places)."]
        [regulatoryReference ISDA PeerReviewGroup date "20221005"
            provision "Members agreed DRR rules should not default the field value."]
        [ruleReference PackageTransactionPrice]
    override packageTransactionPriceCurrency ISOCurrencyCodeEnum (0..1)
        [label "48 Package Transaction Price Currency"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "48" field "Package Transaction Price Currency"
            provision "Currency in which the Package transaction price is denominated. This data element is not applicable if no package is involved, or package transaction spread is used, or package transaction price notation = 3"]
    override packageTransactionPriceNotation cdebase.price.PriceNotationEnum (0..1)
        [label "49 Package Transaction Price Notation"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "49" field "Package Transaction Price Notation"
            provision "Manner in which the Package transaction price is expressed. This data element is not applicable if no package is involved, or package transaction spread is used"]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "49" field "Package Transaction Price Notation" footnote "50"
            provision "The allowable values are restricted based on CFTCs jurisdictional requirements."]
        [regulatoryReference ISDA PeerReviewGroup date "20221005"
            provision "This function returns the business names of notations."]
        [ruleReference PackageTransactionPriceNotation]
    override packageTransactionSpread cdebase.price.PriceFormat (0..1)
        [label "50 Package Transaction Spread"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "50" field "Package Transaction Spread"
            provision "Traded price of the entire package in which the reported derivative transaction is a component of a package transaction. Package transaction price when the price of the package is expressed as a spread, difference between two reference prices. This data element is not applicable if no package is involved, or Package transaction price is used. Spread and related data elements of the transactions (spread currency, Spread notation) that represent individual components of the package are reported when available. Package transaction spread may not be known when a new transaction is reported but may be updated later."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "50" field "Package Transaction Spread" footnote "51"
            provision "Default value with all 9s, for any of the allowable formats, is accepted when the value is unknown. When [Package transaction price notation] = '1' use '99999.9999999999999' (18 numerical characters including 13 decimal places). When [Package transaction price notation] = '3' use '9.9999999999' (11 numerical characters including 10 decimal places. When [Package transaction spread notation] = '4' use '99999' (5 numerical characters with no decimal places)."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "50" field "Package Transaction Spread" footnote "52"
            provision "The allowable values are restricted based on CFTCs jurisdictional requirements."]
        [regulatoryReference ISDA PeerReviewGroup date "20221005"
            provision "Members agreed DRR rules should not default the field value."]
        [ruleReference PackageTransactionSpread]
    override packageTransactionSpreadCurrency ISOCurrencyCodeEnum (0..1)
        [label "51 Package Transaction Spread Currency"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "51" field "Package Transaction Spread Currency"
            provision "Currency in which the Package transaction spread is denominated. This data element is not applicable if no package is involved, or Package transaction price is used, or Package transaction spread notation = 3, or = 4"]
    override packageTransactionSpreadNotation cdebase.price.PriceNotationEnum (0..1)
        [label "52 Package Transaction Spread Notation"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "52" field "Package Transaction Spread Notation"
            provision "Manner in which the Package transaction spread is expressed. This data element is not applicable if no package is involved, or Package transaction price is used."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "52" field "Package Transaction Spread Notation" footnote "53"
            provision "The allowable values are restricted based on CFTCs jurisdictional requirements."]
        [regulatoryReference ISDA PeerReviewGroup date "20211123"
            provision "This function returns the business names of notations."]
        [ruleReference PackageTransactionSpreadNotation]
    override otherPayment cdebase.payment.OtherPayment (0..*)
        [label for paymentType "57/62-$ 57 Other payment type"]
        [regulatoryReference for paymentType CFTC Part45 appendix "1" dataElement "57" field "Other Payment Type"
            provision "Type of Other payment amount. Option premium payment is not included as a payment type as premiums for option are reported using the option premium dedicated data element."]
        [regulatoryReference for paymentType ISDA USComplianceGroup date "20220719"
            provision "For novation fees: US Working Group agreed that Example 01 Submission 03/04 indicate novation fee is not reported under the rewrite."]
        [regulatoryReference for paymentType ISDA USComplianceGroup date "20220727"
            provision "For other fees, members expressed that the answer to this question is trade-dependent. After discussion, the WG concluded that each RCP must make its own determination whether other fees such as Amendment Fee, Unclassified Fee, Termination Fee, etc. fit within the definition of one of the 3 Allowable Values of #57, as the RCP would be most familiar with the particular transaction and therefore the particular fee."]

        [label for amount "57/62-$ 58 Other payment amount"]
        [regulatoryReference for amount CFTC Part45 appendix "1" dataElement "58" field "Other Payment Amount"
            provision "Payment amounts with corresponding payment types to accommodate requirements of transaction descriptions from different asset classes."]
        [regulatoryReference for amount CFTC Part45_V3_1 appendix "1" dataElement "58" field "Other Payment Amount" footnote "54"
            provision "The set of data elements related to other payments (Other payment type [#57], Other payment amount [#58], Other payment currency [#59], Other payment date [#60], Other payment payer [#61], Other payment receiver [#62]) can be reported multiple times in the case of multiple payments."]
        [regulatoryReference for amount ISDA ISDAWorkingGroup date "20220331" // RBC
            provision "Need to evaluate whether step-in / step-out novations should be included as part of any OtherPayment type"]

        [label for currency "57/62-$ 59 Other payment currency"]
        [regulatoryReference for currency CFTC Part45 appendix "1" dataElement "59" field "Other Payment Currency"
            provision "Currency in which Other payment amount is denominated."]
        [regulatoryReference for currency ISDA ISDAWorkingGroup date "20220331" // RBC
            provision "Need to evaluate whether step-in / step-out novations should be included as part of any OtherPayment type"]

        [label for date "57/62-$ 60 Other payment date"]
        [regulatoryReference for date CFTC Part45 appendix "1" dataElement "60" field "Other Payment Date"
            provision "Unadjusted date on which the Other payment amount is paid."]
        [regulatoryReference for date ISDA ISDAWorkingGroup date "20220331" // RBC
            provision "Need to evaluate whether step-in / step-out novations should be included as part of any OtherPayment type"]

        [label for payer "57/62-$ 61 Other payment payer"]
        [regulatoryReference for payer CFTC Part45 appendix "1" dataElement "61" field "Other Payment Payer"
            provision "Identifier of the payer of Other payment amount."]
        [regulatoryReference for payer ISDA ISDAWorkingGroup date "20220331" // RBC
            provision "Need to evaluate whether step-in / step-out novations should be included as part of any OtherPayment type"]

        [label for payerFormat "57/62-$ 61 Other payment payer format (non-reportable)"]

        [label for receiver "57/62-$ 62 Other payment receiver"]
        [regulatoryReference for receiver CFTC Part45 appendix "1" dataElement "62" field "Other Payment Receiver"
            provision "Identifier of the receiver of Other payment amount."]
        [regulatoryReference for receiver ISDA ISDAWorkingGroup date "20220331" // RBC
            provision "Need to evaluate whether step-in / step-out novations should be included as part of any OtherPayment type"]

        [label for receiverFormat "57/62-$ 62 Other payment receiver format (non-reportable)"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "57-62" field "Other Payment"
            provision "Fields 57-62 are repeatable"]
        [regulatoryReference ISDA ISDAWorkingGroup date "20220331" // RBC
            provision "Need to evaluate whether step-in / step-out novations should be included as part of any OtherPayment type"]
    override exchangeRate Max18D13Number (0..1)
        [label "65 Exchange rate-Leg 1"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "65" field "Exchange Rate-Leg 1"
            provision "Exchange rate between the two different currencies specified in the OTC derivative transaction agreed by the counterparties at the inception of the transaction, expressed as the rate of exchange from converting the unit currency into the quoted currency. In the example 0.9426 USD/EUR, USD is the unit currency and EUR is the quoted currency; USD 1 = EUR 0.9426."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "65" field "Exchange Rate-Leg 1" footnote "57"
            provision "For FX, forward exchange rate would be reported in this data element."]
    override exchangeRateBasis ExchangeRateBasisStringFormat (0..1)
        [label "66 Exchange rate basis"]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "66" field "Exchange Rate Basis"
            provision "Currency pair and order in which the exchange rate is denominated, expressed as unit currency/quoted currency. In the example 0.9426 USD/EUR, USD is the unit currency and EUR is the quoted currency, USD 1 = EUR 0.9426."]
        [ruleReference cde.price.ExchangeRateBasis]
    override price cdebase.price.PriceFormat (0..1)
        [label "69 Price"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "69" field "Price"
            provision "Price specified in the OTC derivative transaction. It does not include fees, taxes or commissions.
            For commodity fixed/float swaps and similar products with periodic payments, this data element refers to the fixed price of the fixed leg(s).
            For commodity and equity forwards and similar products, this data element refers to the forward price of the underlying or reference asset.
            For equity swaps, portfolios swaps, and similar products, this data element refers to the initial price of the underlying or reference asset.
            For contracts for difference and similar products, this data element refers to the initial price of the underlier.
            This data element is not applicable to:
                - Interest rate swaps and forward rate agreements, as it is understood that the information included in the data elements Fixed rate and Spread may be interpreted as the price of the transaction.
                - Interest rate options and interest rate swaptions, as it is understood that the information included in the data elements Strike price and Option premium may be interpreted as the price of the transaction.
                - Commodity basis swaps and the floating leg of commodity fixed/float swaps, as it is understood that the information included in the data element Spread may be interpreted as the price of the transaction.
                - Foreign exchange swaps, forwards and options, as it is understood that the information included in the data elements Exchange rate, Strike price, and Option premium may be interpreted as the price of the transaction.
                - Equity options, as it is understood that the information included in the data elements Strike price and Option premium may be interpreted as the price of the transaction.
                - Credit default swaps and credit total return swaps, as it is understood that the information included in the data elements Fixed rate, Spread and Upfront payment (Other payment type: Upfront payment) may be interpreted as the price of the transaction.
                - Commodity options, as it is understood that the information included in the data elements Strike price and Option premium may be interpreted as the price of the transaction. Where the price is not known when a new transaction is reported, the price is updated as it becomes available.
            For transactions that are part of a package, this data element contains the price of the component transaction where applicable."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "69" field "Price" footnote "60"
            provision "While Price (#69) captures the prices at which counterparties negotiate contracts, market prices are reflected in the valuation amounts."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "69" field "Price" footnote "61"
            provision "The allowable values are restricted based on CFTC's jurisdictional requirements."]
        [ruleReference Price]
    override priceCurrency ISOCurrencyCodeEnum (0..1)
        [label "70 Price currency"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "70" field "Price currency"
            provision "Currency in which the price is denominated. Price currency is only applicable if Price notation = 1."]
        [ruleReference PriceCurrency]
    override priceNotation cdebase.price.PriceNotationEnum (0..1)
        [label "71 Price notation"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "71" field "Price Notation"
            provision "Manner in which the price is expressed."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "71" field "Price Notation" footnote "62"
            provision "The allowable values are restricted based on CFTC's jurisdictional requirements."]
        [ruleReference PriceNotation]
    override priceUnitOfMeasure Max4Text (0..1)
        [label "72 Price unit of measure"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "72" field "Price Unit Of Measure"
            provision "Unit of measure in which the price is expressed."]
    override strikePrice cdebase.price.PriceFormat (0..1)
        [label "76 Strike Price"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "76" field "Strike Price"
            provision "For options other than FX options, swaptions and similar products, price at which the owner of an option can buy or sell the underlying asset of the option. For foreign exchange options, exchange rate at which the option can be exercised, expressed as the rate of exchange from converting the unit currency into the quoted currency. In the example 0.9426 USD/EUR, USD is the unit currency and EUR is the quoted currency; USD 1 = EUR 0.9426. Where the strike price is not known when a new transaction is reported, the strike price is updated as it becomes available. For volatility and variance swaps and similar products, the volatility strike price is reported in this data element"]
        [ruleReference StrikePrice]
    override strikePriceCurrency string (0..1)
        [label "77 Strike Price Currency"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "77" field "Strike Price Currency"
            provision "For equity options, commodity options, and similar products, currency in which the strike price is denominated. For foreign exchange options: Currency pair and order in which the strike price is expressed. It is expressed as unit currency/quoted currency. In the example 0.9426 USD/EUR, USD is the unit currency and EUR is the quoted currency, USD 1 = EUR 0.9426. Strike price currency/currency pair is only applicable if Strike price notation = 1."]
    override strikePriceNotation cdebase.price.PriceNotationEnum (0..1)
        [label "78 Strike Price notation"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "78" field "Strike Price Notation"
            provision "Manner in which the strike price is expressed."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "78" field "Strike Price Notation" footnote "67"
            provision "The allowable values are restricted based on CFTC's jurisdictional requirements."]
        [ruleReference StrikePriceNotation]
    override optionPremiumAmount ShortFraction5DecimalNumber (0..1)
        [label "79 Option Premium Amount"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "79" field "Option Premium Amount"
            provision "For options and swaptions of all asset classes, monetary amount paid by the option buyer. This data element is not applicable if the instrument is not an option or does not embed any optionality."]
    override optionPremiumCurrency ISOCurrencyCodeEnum (0..1)
        [label "80 Option Premium Currency"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "80" field "Option Premium Currency"
            provision "For options and swaptions of all asset classes, currency in which the option premium amount is denominated. This data element is not applicable if the instrument is not an option or does not embed any optionality."]
    override firstExerciseDate date (0..1)
        [label "82 First exercise date"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "82" field "First Exercise Date"
            provision "First unadjusted date during the exercise period in which an option can be exercised.
				    For European-style options, this date is same as the Expiration date. For American-style options, the first possible exercise date is the unadjusted date included in the Execution timestamp.
				    For knock-in options, where the first exercise date is not known when a new transaction is reported, the first exercise date is updated as it becomes available.
				    This data element is not applicable if the instrument is not an option or does not embed any optionality"]
    override embeddedOptionType EmbeddedOptionTypeEnum (0..1)
        [label "86 Embedded Option Type"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "86" field "Embedded Option Type"
            provision "Type of option or optional provision embedded in a contract."]
        [regulatoryReference ISDA USComplianceGroup date "20220519"
            provision "The US Compliance WG discussed #86 on May 19 WG call. The alternatives of the hierarchy (and OTHR were discussed (BNP and CS were on and assisted). 2 types of hierarchies were discussed
                - the one raised in Peer WG, and
                - one raised on the US WG call of a chronological (e.g. which came 1st).
                The consensus was that for cases where one option may have multiple provisions applicable, including the example of having both mandatory (MDET) and early termination (OPET) provisions applicable, the WG agreed to use the allowable value OTHR, rather than any hierarchy."]
    override uniqueProductIdentifier string (0..1)
        [label "87 Unique product identifier"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "87" field "Unique Product Identifier"
            provision "A unique set of characters that represents a particular OTC derivative. The Commission will designate a UPI pursuant to part 45.7.
				   Note: A Unique product identifier short name (D4), defined as, 'When the Commission designates a UPI pursuant to part 45, a humanly readable description made available by the UPI issuer corresponding to the UPI'."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "87" field "Unique Product Identifier" footnote "68"
            provision "Until the Commission designates a UPI for the commodity asset class pursuant to part 45, continue reporting product data elements according to the internal product identifier or product description used by the swap data repository to which the swap is reported. When the Commission designates a UPI for the commodity asset class pursuant to part 45, report the UPI."]
    override effectiveDate date (1..1)
        [label "94 Effective Date"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "94" field "Effective Date"
            provision "Unadjusted date at which obligations under the OTC derivative transaction come into effect, as included in the confirmation."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "94" field "Effective Date" footnote "70"
            provision "For commodities swaps, report the pricing start date."]
        [regulatoryReference ISDA PeerReviewGroup date "20230120"
            provision "For options the obligations under the OTC Derivative Transaction come into effect on the Trade Date. A fall back should be added to CDE Effective Date which handles effective date in this way when no specific effective date is specified."]
    override expirationDate date (0..1)
        [label "95 Expiration date"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "95" field "Expiration date"
            provision "Unadjusted date at which obligations under the OTC derivative transaction stop being effective, as included in the confirmation. Early termination does not affect this data element."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "95" field "Expiration Date" footnote "71"
            provision "For commodities swaps, report the pricing end date."]
        [ruleReference ExpirationDate]
    override executionTimestamp zonedDateTime (1..1)
        [label "96 Execution Timestamp"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "96" field "Execution Timestamp"
            provision "Date and time a transaction was originally executed, resulting in the generation of a new UTI. This data element remains unchanged throughout the life of the UTI."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "96" field "Execution Timestamp" footnote "72"
            provision "For clearing swaps, the execution timestamp is the date and time when the DCO accepts the original swap."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "96" field "Execution Timestamp" footnote "73"
            provision "Both the date and time portion are required to be reported."]
    override reportingTimestamp zonedDateTime (1..1)
        [label "97 Reporting timestamp"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "97" field "Reporting Timestamp"
            provision "Date and time of the submission of the report to the trade repository"]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "97" field "Reporting Timestamp" footnote "74"
            provision "Reporting timestamp (#97) is recorded and reported by the submitter."]
    override platformIdentifier Max4Text (0..1)
        [label "98 Platform Identifier"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "98" field "Platform Identifier"
            provision "Identifier of the trading facility (e.g., exchange, multilateral trading facility, swap execution facility) on which the transaction was executed."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "98" field "Platform Identifier" footnote "75"
            provision "Where the Segment MIC does not exist, use the Operating MIC."]
        [regulatoryReference ISDA ISDAWorkingGroup date "20220328" // Credit Suisse
            provision "Headline would be
                - that it would need to be a CDM field on the input (containing an ISO 10383 MIC)
                - Reporting Logic would need to include reference data for Authorised platforms in all jurisdictions
                - Products Listed on US SEFs > no source identified

            This is because you could have a scenario where a transaction would
                - Report a MIC for EMIR but XXXX for CFTC
                - Report a MIC for MiFID but XOFF for CFTC"]
        [ruleReference PlatformIdentifier]
    override uniqueTransactionIdentifier Max52AlphaNumericText (0..1)
        [label "103 Unique Transaction Identifier (UTI)"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "103" field "Unique Transaction Identifier (UTI)"
            provision "A unique identifier assigned to all swap transactions which identifies the swap uniquely throughout its lifecycle and used for all recordkeeping and all swap data reporting pursuant to para 45.5. A UTI is comprised of the LEI of the generating entity and a unique alphanumeric code."]
        [regulatoryReference ISDA PeerReviewGroup date "20220309"
            provision "Rule does not model UTI > USI priority defined in CFTC specification."]
        [regulatoryReference ISDA PeerReviewGroup date "20220309"
            provision "Firms do expect to report USI/UTI in both formats: as a single identifier field as well as using Issuer + identifier. The functional model needs to handle both scenarios."]
        [ruleReference UniqueTransactionIdentifier]
    override leg1 common.CommonLeg (0..1)
        [label for notionalAmount "31 Notional amount-Leg 1"]
        [regulatoryReference for notionalAmount CFTC Part45 appendix "1" dataElement "31" field "Notional Amount"
            provision "For each leg of the transaction, where applicable:
                    - for OTC derivative transactions negotiated in monetary amounts, amount specified in the contract.
                    - for OTC derivative transactions negotiated in non-monetary amounts, refer to appendix B for converting notional amounts for non-monetary amounts.
                    In addition:
                    - For OTC derivative transactions with a notional amount schedule, the initial notional amount, agreed by the counterparties at the inception of the transaction, is reported in this data element.
                    - For OTC foreign exchange options, in addition to this data element, the amounts are reported using the data elements Call amount and Put amount.
                    - For amendments or lifecycle events, the resulting outstanding notional amount is reported; (steps in notional amount schedules are not considered to be amendments or lifecycle events);
                    - Where the notional amount is not known when a new transaction is reported, the notional amount is updated as it becomes available."]
        [regulatoryReference for notionalAmount CFTC Part45_V3_2 appendix "1" dataElement "31" field "Notional Amount" footnote "40"
            provision "Notional amount for CDS should reflect the gross amount and not the net amount after reflecting version incrementing due to a credit event"]
        [regulatoryReference for notionalAmount CFTC Part45_V3_2 appendix "1" dataElement "31" field "Notional Amount" footnote "41"
            provision "In the case of a lifecycle event that is a full termination before the swap maturity date, the full terminated value should be reported in the notional data element."]
        [regulatoryReference for notionalAmount CFTC Part45_V3_2 appendix "1" dataElement "31" field "Notional Amount" footnote "42"
            provision "'99999999999999999999.99999' is accepted when the value is not available at the time of reporting. 25 numerical characters including decimals."]
        [regulatoryReference for notionalAmount ISDA PeerReviewGroup date "20220706"
            provision "Members approved the approach for DRR to calculating Notional amount for Commodities."]
        [regulatoryReference for notionalAmount ISDA ISDAWorkingGroup date "20221117"
            provision "For a single-currency ZC IR Swap with a Known Amount, DRR relies on the underlying notional being the same on each leg (i.e. notional(fixed) = notional(float))"]
        [regulatoryReference for notionalAmount ISDA PeerReviewGroup date "20221005"
            provision "DRR rules should not default the field value."]
        [ruleReference for notionalAmount NotionalAmountLeg1]

        [label for notionalCurrency "32 Notional currency-Leg 1"]
        [regulatoryReference for notionalCurrency CFTC Part45 appendix "1" dataElement "32" field "Notional Currency Leg 1"
            provision "For each leg of the transaction, where applicable: currency in which the notional amount is denominated."]
        [ruleReference for notionalCurrency cde.quantity.NotionalCurrencyLeg1]
        
        [label for notionalAmountSchedule -> value "33/35-$ 33 Notional amount leg 1"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "33" field "Notional amount in effect on associated effective date of leg 1"
            provision "For each leg of the transaction, where applicable:
                    for OTC derivative transactions negotiated in monetary amounts with a notional amount schedule:
                        - Notional amount which becomes effective on the associated unadjusted effective date.
                    The initial notional amount and associated unadjusted effective and end date are reported as the first values of the schedule.
                    This data element is not applicable to OTC derivative transactions with notional amounts that are condition- or event-dependent. The currency of the varying notional amounts in the schedule is reported in Notional currency."]

        [label for notionalAmountSchedule -> effectiveDate "33/35-$ 34 Effective date leg 1"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "34" field "Effective date of the notional amount of leg 1"
            provision "For each leg of the transaction, where applicable: for OTC derivative transactions negotiated in monetary amounts with a notional amount schedule: Unadjusted date on which the associated notional amount becomes effective This data element is not applicable to OTC derivative transactions with notional amounts that are condition- or event-dependent. The currency of the varying notional amounts in the schedule is reported in Notional currency."]

        [label for notionalAmountSchedule -> endDate "33/35-$ 35 End date leg 1"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "35" field "End date of the notional amount of leg 1"
            provision "For each leg of the transaction, where applicable: for OTC derivative transactions negotiated in monetary amounts with a notional amount schedule: Unadjusted end date of the notional amount (not applicable if the unadjusted end date of a given schedules period is back-to-back with the unadjusted effective date of the subsequent period). This data element is not applicable to OTC derivative transactions with notional amounts that are condition- or event-dependent. The currency of the varying notional amounts in the schedule is reported in Notional currency."]
        [regulatoryReference ISDA PeerReviewGroup date "unknown"
            provision "This field only applies to non-contiguous schedules with monetary amounts. Since non-contigous schedules are used only in the commodities context, where monetary amounts are absent, this field will be always left blank."]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "33-35" field "Notional Amount Schedule"
            provision "Fields 33-35 are repeatable and shall be populated in the case of derivatives involving notional amount schedules"]
        [regulatoryReference ISDA PeerReviewGroup date "20211203"
            provision "Model only applicable for back-to-back schedules. Repeatable field 35 (endDate) not applicable and therefore removed"]
        [ruleReference for notionalAmountSchedule cde.quantity.NotionalAmountScheduleLeg1]
        
        [label for notionalQuantity "40 Notional quantity-Leg 1"]
        [regulatoryReference for notionalQuantity CFTC Part45 appendix "1" dataElement "40" field "Notional Quantity"
            provision "For each leg of the swap transaction, where applicable, for swap transactions negotiated in non-monetary amounts with fixed notional quantity for each schedule period (i.e., 50 barrels per month).
                   The frequency is reported in Quantity frequency and the unit of measure is reported in Quantity unit of measure."]
        [ruleReference for notionalQuantity NotionalQuantityLeg1]
        
        [label for quantityFrequency "41 Quantity frequency-Leg 1"]
        [regulatoryReference for quantityFrequency CFTC Part45 appendix "1" dataElement "41" field "Quantity Frequency"
            provision "The rate at which the quantity is quoted on the swap transaction. e.g., hourly, daily, weekly, monthly"]
        [regulatoryReference for quantityFrequency CFTC Part45_V3_1 appendix "1" dataElement "41" field "Quantity Frequency" footnote "43"
            provision "To represent quarterly, report [Quantity frequency] = 'MNTH' and [Quantity frequency multiplier] = '3'. For semi-annual, report [Quantity frequency] = 'MNTH' and [Quantity frequency multiplier] = '6'."]
        [regulatoryReference for quantityFrequency ISDA ISDAWorkingGroup date "20220607"
            provision "ONDE use case not supported. It was only found on physical commodities and they are out of scope for CFTC reporting."]
        [regulatoryReference for quantityFrequency ISDA PeerReviewGroup date "20220202"
            provision "The code ADHO is not supported by firms."]
        [ruleReference for quantityFrequency QuantityFrequencyLeg1]
        
        [label for quantityFrequencyMultiplier "42 Quantity frequency multiplier-Leg 1"]
        [regulatoryReference for quantityFrequencyMultiplier CFTC Part45 appendix "1" dataElement "42" field "Quantity Frequency Multiplier"
            provision "The number of time units for the Quantity frequency"]
        [ruleReference for quantityFrequencyMultiplier QuantityFrequencyMultiplierLeg1]
        
        [label for totalNotionalQuantity "44 Total notional quantity-Leg 1"]
        [regulatoryReference for totalNotionalQuantity CFTC Part45 appendix "1" dataElement "44" field "Total Notional Quantity"
            provision "For each leg of the transaction, where applicable: aggregate Notional quantity of the underlying asset for the term of the transaction.
                   Where the Total notional quantity is not known when a new transaction is reported, the Total notional quantity is updated as it becomes available."]
        [regulatoryReference for totalNotionalQuantity CFTC Part45_V3_1 appendix "1" dataElement "44" field "Total Notional Quantity" footnote "44"
            provision "'99999999999999999999.99999' is accepted when the value is not available. 25 numerical characters including decimals."]
        [regulatoryReference for totalNotionalQuantity ISDA PeerReviewGroup date "20221005"
            provision "Members agreed DRR rules should not default the field value."]
        [ruleReference for totalNotionalQuantity TotalNotionalQuantityLeg1]
        
        [label for periodicPayment -> fixedRateDayCountConvention "53 Fixed rate day count convention-Leg 1"]
        [regulatoryReference for periodicPayment -> fixedRateDayCountConvention CFTC Part45 appendix "1" dataElement "53" field "Fixed rate day count convention-leg 1"
            provision "For each leg of the transaction, where applicable: day count convention (often also referred to as day count fraction or day count basis or day count method) that determines how interest payments are calculated. It is used to compute the year fraction of the calculation period, and indicates the number of days in the calculation period divided by the number of days in the year."]
        [regulatoryReference for periodicPayment -> fixedRateDayCountConvention ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> fixedRateDayCountConvention ISDA TechnicalExecutionGroup date "20240418"
            provision "Equity products are implicitly filtered out by calling the function InterestRateLeg1, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> fixedRateDayCountConvention FixedRateDayCountConventionLeg1]
        
        [label for periodicPayment -> floatingRateDayCountConvention "53 Floating rate day count convention-Leg 1"]
        [regulatoryReference for periodicPayment -> floatingRateDayCountConvention CFTC Part45 appendix "1" dataElement "53" field "Floating rate day count convention-leg 1"
            provision "For each leg of the transaction, where applicable: day count convention (often also referred to as day count fraction or day count basis or day count method) that determines how interest payments are calculated. It is used to compute the year fraction of the calculation period, and indicates the number of days in the calculation period divided by the number of days in the year."]
        [regulatoryReference for periodicPayment -> floatingRateDayCountConvention ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> floatingRateDayCountConvention ISDA TechnicalExecutionGroup date "20240418"
            provision "Equity products are implicitly filtered out by calling the function InterestRateLeg1, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> floatingRateDayCountConvention FloatingRateDayCountConventionLeg1]
        
        [label for periodicPayment -> floatingRateResetFrequencyPeriod "55 Floating rate reset frequency period-Leg 1"]
        [regulatoryReference for periodicPayment -> floatingRateResetFrequencyPeriod CFTC Part45 appendix "1" dataElement "55" field "Floating rate reset frequency period-leg 1"
            provision "For each floating leg of the swap transaction, where applicable, time unit associated with the frequency of resets, e.g., day, week, month, year or term of the stream."]
        [regulatoryReference for periodicPayment -> floatingRateResetFrequencyPeriod ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> floatingRateResetFrequencyPeriod ISDA TechnicalExecutionGroup date "20240418"
            provision "Equity products are implicitly filtered out by calling the function InterestRateLeg1, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> floatingRateResetFrequencyPeriod FloatingRateResetFrequencyPeriodLeg1]
        
        [label for periodicPayment -> floatingRateResetFrequencyMultiplier "56 Floating rate reset frequency period multiplier-Leg 1"]
        [regulatoryReference for periodicPayment -> floatingRateResetFrequencyMultiplier CFTC Part45 appendix "1" dataElement "56" field "Floating rate reset frequency period multiplier-leg 1"
            provision "For each floating leg of the swap transaction, where applicable, number of time units (as expressed by the Floating rate reset frequency period) that determines the frequency at which periodic payment dates for reset occur. For example, a transaction with reset payments occurring every two months is represented with a Floating rate reset frequency period of MNTH (monthly) and a Floating rate reset frequency period multiplier of 2. This data element is not applicable if the Floating rate reset frequency period is ADHO. If Floating rate reset frequency period is TERM, then the Floating rate reset frequency period multiplier is 1. If the reset frequency period is intraday, then the Floating rate reset frequency period is DAIL and the Floating rate reset frequency period multiplier is 0."]
        [regulatoryReference for periodicPayment -> floatingRateResetFrequencyMultiplier ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> floatingRateResetFrequencyMultiplier ISDA TechnicalExecutionGroup date "20240418"
            provision "Equity products are implicitly filtered out by calling the function InterestRateLeg1, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> floatingRateResetFrequencyMultiplier FloatingRateResetFrequencyPeriodMultiplierLeg1]
        
        [label for periodicPayment -> fixedRatePaymentFrequencyPeriod "63 Fixed rate payment frequency period-Leg 1"]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriod CFTC Part45 appendix "1" dataElement "63" field "Payment Frequency Period"
            provision "For each leg of the transaction, where applicable: time unit associated with the frequency of payments, e.g., day, week, month, year or term of the stream."]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriod CFTC Part45_V3_1 appendix "1" dataElement "63" field "Payment Frequency Period" footnote "55"
            provision "To represent quarterly payment, report [Payment frequency period] = 'MNTH' and [Payment frequency period multiplier] = '3'. For semi-annual payment, report [Payment frequency period] = 'MNTH' and [Payment frequency period multiplier] = '6'."]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriod CFTC Part45_V3_1 appendix "1" dataElement "63" field "Payment Frequency Period" footnote "56"
            provision "Throughout this Technical Specification, for the allowable value 'EXPI' in frequency period related data elements, two different descriptions 'Payment at term' and 'End of term' are being used which in essence has the same meaning and represents the frequency/rate of payment/quantity."]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriod ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriod ISDA TechnicalExecutionGroup date "20240418"
            provision "Equity products are implicitly filtered out by calling the function InterestRateLeg1, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> fixedRatePaymentFrequencyPeriod FixedRatePaymentFrequencyPeriodLeg1]
        
        [label for periodicPayment -> floatingRatePaymentFrequencyPeriod "63 Floating rate payment frequency period-Leg 1"]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriod CFTC Part45 appendix "1" dataElement "63" field "Payment Frequency Period"
            provision "For each leg of the transaction, where applicable: time unit associated with the frequency of payments, e.g., day, week, month, year or term of the stream."]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriod CFTC Part45_V3_1 appendix "1" dataElement "63" field "Payment Frequency Period" footnote "55"
            provision "To represent quarterly payment, report [Payment frequency period] = 'MNTH' and [Payment frequency period multiplier] = '3'. For semi-annual payment, report [Payment frequency period] = 'MNTH' and [Payment frequency period multiplier] = '6'."]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriod CFTC Part45_V3_1 appendix "1" dataElement "63" field "Payment Frequency Period" footnote "56"
            provision "Throughout this Technical Specification, for the allowable value 'EXPI' in frequency period related data elements, two different descriptions 'Payment at term' and 'End of term' are being used which in essence has the
            same meaning and represents the frequency/rate of payment/quantity."]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriod ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriod ISDA TechnicalExecutionGroup date "20240418"
            provision "Equity products are implicitly filtered out by calling the function InterestRateLeg1, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> floatingRatePaymentFrequencyPeriod FloatingRatePaymentFrequencyPeriodLeg1]
        
        [label for periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier "64 Fixed rate payment frequency period multiplier-Leg 1"]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier CFTC Part45 appendix "1" dataElement "64" field "Payment Frequency Period Multiplier"
            provision "For each leg of the transaction, where applicable: number of time units (as expressed by the Payment frequency period) that determines the frequency at which periodic payment dates occur. For example, a transaction with payments occurring every two months is represented with a Payment frequency period of MNTH (monthly) and a Payment frequency period multiplier of 2.This data element is not applicable if the Payment frequency period is ADHO. If Payment frequency period is TERM, then the Payment frequency period multiplier is 1. If the Payment frequency is intraday, then the Payment frequency period is DAIL and the Payment frequency multiplier is 0."]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier ISDA TechnicalExecutionGroup date "20240418"
            provision "Equity products are implicitly filtered out by calling the function InterestRateLeg1, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier FixedRatePaymentFrequencyPeriodMultiplierLeg1]
        
        [label for periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier "64 Floating rate payment frequency period multiplier-Leg 1"]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier CFTC Part45 appendix "1" dataElement "64" field "Payment Frequency Period Multiplier"
            provision "For each leg of the transaction, where applicable: number of time units (as expressed by the Payment frequency period) that determines the frequency at which periodic payment dates occur. For example, a transaction with payments occurring every two months is represented with a Payment frequency period of MNTH (monthly) and a Payment frequency period multiplier of 2.This data element is not applicable if the Payment frequency period is ADHO. If Payment frequency period is TERM, then the Payment frequency period multiplier is 1. If the Payment frequency is intraday, then the Payment frequency period is DAIL and the Payment frequency multiplier is 0."]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier ISDA TechnicalExecutionGroup date "20240418"
            provision "Equity products are implicitly filtered out by calling the function InterestRateLeg1, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier FloatingRatePaymentFrequencyPeriodMultiplierLeg1]
        
        [label for fixedRate "67 Fixed rate-Leg 1"]
        [regulatoryReference for fixedRate CFTC Part45 appendix "1" dataElement "67" field "Fixed Rate 1"
            provision "For each leg of the transaction, where applicable: for OTC derivative transactions with periodic payments, per annum rate of the fixed leg(s)."]
        [regulatoryReference for fixedRate CFTC Part45_V3_1 appendix "1" dataElement "67" field "Fixed Rate 1" footnote "58"
            provision "The allowable values are restricted based on CFTCs jurisdictional requirements."]
        [regulatoryReference for fixedRate ISDA TechnicalExecutionGroup date "20240418"
            provision "Equity products are implicitly filtered out by calling the function InterestRateLeg1, so no explicit filtering is needed."]
        [ruleReference for fixedRate FixedRateLeg1]
        
        [label for spread "73 Spread-Leg 1"]
        [regulatoryReference for spread CFTC Part45 appendix "1" dataElement "73" field "Spread-Leg1"
            provision "For each leg of the transaction, where applicable: for OTC derivative transactions with periodic payments (e.g., interest rate fixed/float swaps, interest rate basis swaps, commodity swaps),
                - spread on the individual floating leg(s) index reference price, in the case where there is a spread on a floating leg(s). For example, USD-LIBOR-BBA plus .03 or WTI minus USD 14.65; or
                - difference between the reference prices of the two floating leg indexes. For example, the 9.00 USD Spread for a WCS vs. WTI basis swap where WCS is priced at 43 USD and WTI is priced at 52 USD."]
        [regulatoryReference for spread CFTC Part45_V3_1 appendix "1" dataElement "73" field "Spread-Leg1" footnote "63"
            provision "For equity swaps, portfolio swaps, and contract for difference (CFDs), report the weighted overall spread for the basket instead of individual legs."]
        [regulatoryReference for spread CFTC Part45_V3_1 appendix "1" dataElement "73" field "Spread-Leg1" footnote "64"
            provision "The allowable values are restricted based on CFTC's jurisdictional requirements."]
        [ruleReference for spread SpreadLeg1]
        
        [label for spreadCurrency "74 Spread currency-Leg 1"]
        [regulatoryReference for spreadCurrency CFTC Part45 appendix "1" dataElement "74" field "Spread currency-Leg1"
            provision "For each leg of the transaction, where applicable: currency in which the spread is denominated. This data element is only applicable if Spread notation = 1."]
        [ruleReference for spreadCurrency SpreadCurrencyLeg1]
        
        [label for spreadNotation "75 Spread notation-Leg 1"]
        [regulatoryReference for spreadNotation CFTC Part45 appendix "1" dataElement "75" field "Spread Notation Leg 1"
            provision "For each leg of the transaction, where applicable: manner in which the spread is expressed."]
        [regulatoryReference for spreadNotation CFTC Part45_V3_1 appendix "1" dataElement "75" field "Spread Notation Leg 1" footnote "65"
            provision "The allowable values are restricted based on CFTC's jurisdictional requirements."]
        [regulatoryReference for spreadNotation ISDA PeerReviewGroup date "20230621"
            provision "This is a CFTC specific function which converts Percentage notation into Decimal."]
        [ruleReference for spreadNotation SpreadNotationLeg1]
        
        [label for settlementCurrency "89 Settlement Currency Leg 1"]
        [regulatoryReference for settlementCurrency CFTC Part45 appendix "1" dataElement "89" field "Settlement Currency"
            provision "Currency for the cash settlement of the transaction when applicable. For multicurrency products that do not net, the settlement currency of each leg. This data element is not applicable for physically settled products (eg physically settled swaptions)."]
        [regulatoryReference for settlementCurrency ISDA PeerReviewGroup date "unknown"
            provision "In the case where settlement currency is not provided, model does not infer cash vs. physical settlement based on the product and then extract the notional currency as settlement currency. The conclusion at Peer Review was that firms should fill out the settlement currency field if it is reportable and DRR should not infer it from the notional."]
        [ruleReference for settlementCurrency common.execution.SettlementCurrencyLeg1]

        [label for quantityUnitOfMeasure "43 Quantity unit of measure-Leg 1"]
        [regulatoryReference for quantityUnitOfMeasure CFTC Part45 appendix "1" dataElement "43" field "Quantity Unit Of Measure"
            provision "For each leg of the transaction, where applicable: unit of measure in which the Total notional quantity and Notional quantity are expressed."]
        [ruleReference for quantityUnitOfMeasure cde.quantity.QuantityUnitOfMeasureLeg1]
    override leg2 common.CommonLeg (0..1)
        [label for notionalAmount "31 Notional amount-Leg 2"]
        [regulatoryReference for notionalAmount CFTC Part45 appendix "1" dataElement "31" field "Notional Amount"
            provision "For each leg of the transaction, where applicable:
                    - for OTC derivative transactions negotiated in monetary amounts, amount specified in the contract.
                    - for OTC derivative transactions negotiated in non-monetary amounts, refer to appendix B for converting notional amounts for non-monetary amounts.
                    In addition:
                    - For OTC derivative transactions with a notional amount schedule, the initial notional amount, agreed by the counterparties at the inception of the transaction, is reported in this data element.
                    - For OTC foreign exchange options, in addition to this data element, the amounts are reported using the data elements Call amount and Put amount.
                    - For amendments or lifecycle events, the resulting outstanding notional amount is reported; (steps in notional amount schedules are not considered to be amendments or lifecycle events);
                    - Where the notional amount is not known when a new transaction is reported, the notional amount is updated as it becomes available."]
        [regulatoryReference for notionalAmount CFTC Part45_V3_2 appendix "1" dataElement "31" field "Notional Amount" footnote "40"
            provision "Notional amount for CDS should reflect the gross amount and not the net amount after reflecting version incrementing due to a credit event"]
        [regulatoryReference for notionalAmount CFTC Part45_V3_2 appendix "1" dataElement "31" field "Notional Amount" footnote "41"
            provision "In the case of a lifecycle event that is a full termination before the swap maturity date, the full terminated value should be reported in the notional data element."]
        [regulatoryReference for notionalAmount CFTC Part45_V3_2 appendix "1" dataElement "31" field "Notional Amount" footnote "42"
            provision "'99999999999999999999.99999' is accepted when the value is not available at the time of reporting. 25 numerical characters including decimals."]
        [regulatoryReference for notionalAmount ISDA PeerReviewGroup date "20220706"
            provision "ISDA PeerReviewGroup members approved the approach for DRR to calculating Notional amount for Commodities."]
        [regulatoryReference for notionalAmount ISDA PeerReviewGroup date "20221005"
            provision "Members agreed DRR rules should not default the field value."]
        [ruleReference for notionalAmount NotionalAmountLeg2]

        [label for notionalCurrency "32 Notional currency-Leg 2"]
        [regulatoryReference for notionalCurrency CFTC Part45 appendix "1" dataElement "32" field "Notional Currency Leg 2"
            provision "For each leg of the transaction, where applicable: currency in which the notional amount is denominated."]
        [ruleReference for notionalCurrency cde.quantity.NotionalCurrencyLeg2]
        
        [label for notionalAmountSchedule -> value "33/35-$ 33 Notional amount leg 2"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "33" field "Notional amount in effect on associated effective date of leg 2"
            provision "For each leg of the transaction, where applicable:
                   for OTC derivative transactions negotiated in monetary amounts with a notional amount schedule:
                        - Notional amount which becomes effective on the associated unadjusted effective date.
                   The initial notional amount and associated unadjusted effective and end date are reported as the first values of the schedule.
                   This data element is not applicable to OTC derivative transactions with notional amounts that are condition- or event-dependent. The currency of the varying notional amounts in the schedule is reported in Notional currency."]

        [label for notionalAmountSchedule -> effectiveDate "33/35-$ 34 Effective date leg 2"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "34" field "Effective date of the notional amount of leg 2"
            provision "For each leg of the transaction, where applicable: for OTC derivative transactions negotiated in monetary amounts with a notional amount schedule: Unadjusted date on which the associated notional amount becomes effective This data element is not applicable to OTC derivative transactions with notional amounts that are condition- or event-dependent. The currency of the varying notional amounts in the schedule is reported in Notional currency."]
        
        [label for notionalAmountSchedule -> endDate "33/35-$ 35 End date leg 2"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "35" field "End date of the notional amount of leg 2"
            provision "For each leg of the transaction, where applicable: for OTC derivative transactions negotiated in monetary amounts with a notional amount schedule: Unadjusted end date of the notional amount (not applicable if the unadjusted end date of a given schedules period is back-to-back with the unadjusted effective date of the subsequent period). This data element is not applicable to OTC derivative transactions with notional amounts that are condition- or event-dependent. The currency of the varying notional amounts in the schedule is reported in Notional currency."]
        [regulatoryReference ISDA PeerReviewGroup date "unknown"
            provision "This field only applies to non-contiguous schedules with monetary amounts. Since non-contigous schedules are used only in the commodities context, where monetary amounts are absent, this field will be always left blank."]
        [regulatoryReference for notionalAmountSchedule CFTC Part45 appendix "1" dataElement "33-35" field "Notional Amount Schedule"
            provision "Fields 33-35 are repeatable and shall be populated in the case of derivatives involving notional amount schedules"]
        [regulatoryReference for notionalAmountSchedule ISDA PeerReviewGroup date "20211203"
            provision "Model only applicable for back-to-back schedules. Repeatable field 35 (endDate) not applicable and therefore removed"]
        [ruleReference for notionalAmountSchedule cde.quantity.NotionalAmountScheduleLeg2]
        
        [label for notionalQuantity "40 Notional quantity-Leg 2"]
        [regulatoryReference for notionalQuantity CFTC Part45 appendix "1" dataElement "40" field "Notional Quantity"
            provision "For each leg of the swap transaction, where applicable, for swap transactions negotiated in non-monetary amounts with fixed notional quantity for each schedule period (i.e., 50 barrels per month).
                   The frequency is reported in Quantity frequency and the unit of measure is reported in Quantity unit of measure."]
        [ruleReference for notionalQuantity common.quantity.NotionalQuantityLeg2]
        
        [label for quantityFrequency "41 Quantity frequency-Leg 2"]
        [regulatoryReference for quantityFrequency CFTC Part45 appendix "1" dataElement "41" field "Quantity Frequency"
            provision "The rate at which the quantity is quoted on the swap transaction. e.g., hourly, daily, weekly, monthly"]
        [regulatoryReference for quantityFrequency CFTC Part45_V3_1 appendix "1" dataElement "41" field "Quantity Frequency" footnote "43"
            provision "To represent quarterly, report [Quantity frequency] = 'MNTH' and [Quantity frequency multiplier] = '3'. For semi-annual, report [Quantity frequency] = 'MNTH' and [Quantity frequency multiplier] = '6'."]
        [regulatoryReference for quantityFrequency ISDA ISDAWorkingGroup date "20220607"
            provision "ONDE use case not supported. It was only found on physical commodities and they are out of scope for CFTC reporting."]
        [regulatoryReference for quantityFrequency ISDA PeerReviewGroup date "20220202"
            provision "The code ADHO is not supported by firms."]
        [ruleReference for quantityFrequency QuantityFrequencyLeg2]
        
        [label for quantityFrequencyMultiplier "42 Quantity frequency multiplier-Leg 2"]
        [regulatoryReference for quantityFrequencyMultiplier CFTC Part45 appendix "1" dataElement "42" field "Quantity Frequency Multiplier"
            provision "The number of time units for the Quantity frequency"]
        [ruleReference for quantityFrequencyMultiplier QuantityFrequencyMultiplierLeg2]
        
        [label for totalNotionalQuantity "44 Total notional quantity-Leg 2"]
        [regulatoryReference for totalNotionalQuantity CFTC Part45 appendix "1" dataElement "44" field "Total Notional Quantity"
            provision "For each leg of the transaction, where applicable: aggregate Notional quantity of the underlying asset for the term of the transaction.
                   Where the Total notional quantity is not known when a new transaction is reported, the Total notional quantity is updated as it becomes available."]
        [regulatoryReference for totalNotionalQuantity CFTC Part45_V3_1 appendix "1" dataElement "44" field "Total Notional Quantity" footnote "44"
            provision "'99999999999999999999.99999' is accepted when the value is not available. 25 numerical characters including decimals."]
        [regulatoryReference for totalNotionalQuantity ISDA PeerReviewGroup date "20221005"
            provision "Members agreed DRR rules should not default the field value."]
        [ruleReference for totalNotionalQuantity TotalNotionalQuantityLeg2]

        [label for quantityUnitOfMeasure "43 Quantity unit of measure-Leg 2"]
        [regulatoryReference for quantityUnitOfMeasure CFTC Part45 appendix "1" dataElement "43" field "Quantity Unit Of Measure"
            provision "For each leg of the transaction, where applicable: unit of measure in which the Total notional quantity and Notional quantity are expressed."]
        [ruleReference for quantityUnitOfMeasure cde.quantity.QuantityUnitOfMeasureLeg2]
   
        [label for periodicPayment -> fixedRateDayCountConvention "53 Fixed rate day count convention-Leg 2"]
        [regulatoryReference for periodicPayment -> fixedRateDayCountConvention CFTC Part45 appendix "1" dataElement "53" field "Fixed rate day count convention-leg 2"
            provision "For each leg of the transaction, where applicable: day count convention (often also referred to as day count fraction or day count basis or day count method) that determines how interest payments are calculated. It is used to compute the year fraction of the calculation period, and indicates the number of days in the calculation period divided by the number of days in the year."]
        [regulatoryReference for periodicPayment -> fixedRateDayCountConvention ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> fixedRateDayCountConvention ISDA TechnicalExecutionGroup date "20240418"
            provision "Credit products are implicitly filtered out by calling the function InterestRateLeg2, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> fixedRateDayCountConvention FixedRateDayCountConventionLeg2]
        
        [label for periodicPayment -> floatingRateDayCountConvention "53 Floating rate day count convention-Leg 2"]
        [regulatoryReference for periodicPayment -> floatingRateDayCountConvention CFTC Part45 appendix "1" dataElement "53" field "Floating rate day count convention-leg 2"
            provision "For each leg of the transaction, where applicable: day count convention (often also referred to as day count fraction or day count basis or day count method) that determines how interest payments are calculated. It is used to compute the year fraction of the calculation period, and indicates the number of days in the calculation period divided by the number of days in the year."]
        [regulatoryReference for periodicPayment -> floatingRateDayCountConvention ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> floatingRateDayCountConvention ISDA TechnicalExecutionGroup date "20240418"
            provision "Credit products are implicitly filtered out by calling the function InterestRateLeg2, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> floatingRateDayCountConvention FloatingRateDayCountConventionLeg2]

        [label for periodicPayment -> floatingRateResetFrequencyPeriod "55 Floating rate reset frequency period-Leg 2"]
        [regulatoryReference for periodicPayment -> floatingRateResetFrequencyPeriod CFTC Part45 appendix "1" dataElement "55" field "Floating rate reset frequency period-leg 2"
            provision "For each floating leg of the swap transaction, where applicable, time unit associated with the frequency of resets, e.g., day, week, month, year or term of the stream."]
        [regulatoryReference for periodicPayment -> floatingRateResetFrequencyPeriod ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> floatingRateResetFrequencyPeriod ISDA TechnicalExecutionGroup date "20240418"
            provision "Credit products are implicitly filtered out by calling the function InterestRateLeg2, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> floatingRateResetFrequencyPeriod FloatingRateResetFrequencyPeriodLeg2]
        
        [label for periodicPayment -> floatingRateResetFrequencyMultiplier "56 Floating rate reset frequency period multiplier-Leg 2"]
        [regulatoryReference for periodicPayment -> floatingRateResetFrequencyMultiplier CFTC Part45 appendix "1" dataElement "56" field "Floating rate reset frequency period multiplier-leg 2"
            provision "For each floating leg of the swap transaction, where applicable, number of time units (as expressed by the Floating rate reset frequency period) that determines the frequency at which periodic payment dates for reset occur. For example, a transaction with reset payments occurring every two months is represented with a Floating rate reset frequency period of MNTH (monthly) and a Floating rate reset frequency period multiplier of 2. This data element is not applicable if the Floating rate reset frequency period is ADHO. If Floating rate reset frequency period is TERM, then the Floating rate reset frequency period multiplier is 1. If the reset frequency period is intraday, then the Floating rate reset frequency period is DAIL and the Floating rate reset frequency period multiplier is 0."]
        [regulatoryReference for periodicPayment -> floatingRateResetFrequencyMultiplier ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> floatingRateResetFrequencyMultiplier ISDA TechnicalExecutionGroup date "20240418"
            provision "Credit products are implicitly filtered out by calling the function InterestRateLeg2, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> floatingRateResetFrequencyMultiplier FloatingRateResetFrequencyPeriodMultiplierLeg2]
        
        [label for periodicPayment -> fixedRatePaymentFrequencyPeriod "63 Fixed rate payment frequency period-Leg 2"]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriod CFTC Part45 appendix "1" dataElement "63" field "Payment Frequency Period"
            provision "For each leg of the transaction, where applicable: time unit associated with the frequency of payments, e.g., day, week, month, year or term of the stream."]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriod CFTC Part45_V3_1 appendix "1" dataElement "63" field "Payment Frequency Period" footnote "55"
            provision "To represent quarterly payment, report [Payment frequency period] = 'MNTH' and [Payment frequency period multiplier] = '3'. For semi-annual payment, report [Payment frequency period] = 'MNTH' and [Payment frequency period multiplier] = '6'."]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriod CFTC Part45_V3_1 appendix "1" dataElement "63" field "Payment Frequency Period" footnote "56"
            provision "Throughout this Technical Specification, for the allowable value 'EXPI' in frequency period related data elements, two different descriptions 'Payment at term' and 'End of term' are being used which in essence has the
            same meaning and represents the frequency/rate of payment/quantity."]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriod ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriod ISDA TechnicalExecutionGroup date "20240418"
            provision "Credit products are implicitly filtered out by calling the function InterestRateLeg2, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> fixedRatePaymentFrequencyPeriod FixedRatePaymentFrequencyPeriodLeg2]
        
        [label for periodicPayment -> floatingRatePaymentFrequencyPeriod "63 Floating rate payment frequency period-Leg 2"]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriod CFTC Part45 appendix "1" dataElement "63" field "Payment Frequency Period"
            provision "For each leg of the transaction, where applicable: time unit associated with the frequency of payments, e.g., day, week, month, year or term of the stream."]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriod CFTC Part45_V3_1 appendix "1" dataElement "63" field "Payment Frequency Period" footnote "55"
            provision "To represent quarterly payment, report [Payment frequency period] = 'MNTH' and [Payment frequency period multiplier] = '3'. For semi-annual payment, report [Payment frequency period] = 'MNTH' and [Payment frequency period multiplier] = '6'."]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriod CFTC Part45_V3_1 appendix "1" dataElement "63" field "Payment Frequency Period" footnote "56"
            provision "Throughout this Technical Specification, for the allowable value 'EXPI' in frequency period related data elements, two different descriptions 'Payment at term' and 'End of term' are being used which in essence has the
            same meaning and represents the frequency/rate of payment/quantity."]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriod ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriod ISDA TechnicalExecutionGroup date "20240418"
            provision "Credit products are implicitly filtered out by calling the function InterestRateLeg2, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> floatingRatePaymentFrequencyPeriod FloatingRatePaymentFrequencyPeriodLeg2]
        
        [label for periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier "64 Fixed rate payment frequency period multiplier-Leg 2"]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier CFTC Part45 appendix "1" dataElement "64" field "Payment Frequency Period Multiplier"
            provision "For each leg of the transaction, where applicable: number of time units (as expressed by the Payment frequency period) that determines the frequency at which periodic payment dates occur. For example, a transaction with payments occurring every two months is represented with a Payment frequency period of MNTH (monthly) and a Payment frequency period multiplier of 2.This data element is not applicable if the Payment frequency period is ADHO. If Payment frequency period is TERM, then the Payment frequency period multiplier is 1. If the Payment frequency is intraday, then the Payment frequency period is DAIL and the Payment frequency multiplier is 0."]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier ISDA TechnicalExecutionGroup date "20240418"
            provision "Credit products are implicitly filtered out by calling the function InterestRateLeg2, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier FixedRatePaymentFrequencyPeriodMultiplierLeg2]
        
        [label for periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier "64 Floating rate payment frequency period multiplier-Leg 2"]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier CFTC Part45 appendix "1" dataElement "64" field "Payment Frequency Period Multiplier"
            provision "For each leg of the transaction, where applicable: number of time units (as expressed by the Payment frequency period) that determines the frequency at which periodic payment dates occur. For example, a transaction with payments occurring every two months is represented with a Payment frequency period of MNTH (monthly) and a Payment frequency period multiplier of 2.This data element is not applicable if the Payment frequency period is ADHO. If Payment frequency period is TERM, then the Payment frequency period multiplier is 1. If the Payment frequency is intraday, then the Payment frequency period is DAIL and the Payment frequency multiplier is 0."]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier ISDA PeerReviewGroup date "20211123"
            provision "fixed income/fixed rates not applied to FX products"]
        [regulatoryReference for periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier ISDA TechnicalExecutionGroup date "20240418"
            provision "Credit products are implicitly filtered out by calling the function InterestRateLeg2, so no explicit filtering is needed."]
        [ruleReference for periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier FloatingRatePaymentFrequencyPeriodMultiplierLeg2]
        
        [label for fixedRate "67 Fixed rate-Leg 2"]
        [regulatoryReference for fixedRate CFTC Part45 appendix "1" dataElement "67" field "Fixed Rate 2"
            provision "For each leg of the transaction, where applicable: for OTC derivative transactions with periodic payments, per annum rate of the fixed leg(s)."]
        [regulatoryReference for fixedRate CFTC Part45_V3_1 appendix "1" dataElement "67" field "Fixed Rate 2" footnote "58"
            provision "The allowable values are restricted based on CFTCs jurisdictional requirements."]
        [regulatoryReference for fixedRate ISDA TechnicalExecutionGroup date "20240418"
            provision "Credit products are implicitly filtered out by calling the function InterestRateLeg2, so no explicit filtering is needed."]
        [ruleReference for fixedRate FixedRateLeg2]
        
        [label for spread "73 Spread-Leg 2"]
        [regulatoryReference for spread CFTC Part45 appendix "1" dataElement "73" field "Spread-Leg2"
            provision "For each leg of the transaction, where applicable: for OTC derivative transactions with periodic payments (e.g., interest rate fixed/float swaps, interest rate basis swaps, commodity swaps),
            - spread on the individual floating leg(s) index reference price, in the case where there is a spread on a floating leg(s). For example, USD-LIBOR-BBA plus .03 or WTI minus USD 14.65; or
            - difference between the reference prices of the two floating leg indexes. For example, the 9.00 USD Spread for a WCS vs. WTI basis swap where WCS is priced at 43 USD and WTI is priced at 52 USD."]
        [regulatoryReference for spread CFTC Part45_V3_1 appendix "1" dataElement "73" field "Spread-Leg2" footnote "63"
            provision "For equity swaps, portfolio swaps, and contract for difference (CFDs), report the weighted overall spread for the basket instead of individual legs."]
        [regulatoryReference for spread CFTC Part45_V3_1 appendix "1" dataElement "73" field "Spread-Leg2" footnote "64"
            provision "The allowable values are restricted based on CFTC's jurisdictional requirements."]
        [ruleReference for spread SpreadLeg2]
        
        [label for spreadCurrency "74 Spread currency-Leg 2"]
        [regulatoryReference for spreadCurrency CFTC Part45 appendix "1" dataElement "74" field "Spread currency-Leg2"
            provision "For each leg of the transaction, where applicable: currency in which the spread is denominated. This data element is only applicable if Spread notation = 1."]
        [ruleReference for spreadCurrency SpreadCurrencyLeg2]
        
        [label for spreadNotation "75 Spread notation-Leg 2"]
        [regulatoryReference for spreadNotation CFTC Part45 appendix "1" dataElement "75" field "Spread Notation Leg 2"
            provision "For each leg of the transaction, where applicable: manner in which the spread is expressed."]
        [regulatoryReference for spreadNotation CFTC Part45_V3_1 appendix "1" dataElement "75" field "Spread Notation Leg 2" footnote "65"
            provision "The allowable values are restricted based on CFTC's jurisdictional requirements."]
        [regulatoryReference for spreadNotation ISDA PeerReviewGroup date "20230621"
            provision "This is a CFTC specific function which converts Percentage notation into Decimal."]
        [ruleReference for spreadNotation SpreadNotationLeg2]
        
        [label for settlementCurrency "89 Settlement Currency Leg 2"]
        [regulatoryReference for settlementCurrency CFTC Part45 appendix "1" dataElement "89" field "Settlement Currency"
            provision "Currency for the cash settlement of the transaction when applicable. For multicurrency products that do not net, the settlement currency of each leg. This data element is not applicable for physically settled products (eg physically settled swaptions)."]
        [regulatoryReference for settlementCurrency ISDA PeerReviewGroup date "unknown"
            provision "In the case where settlement currency is not provided, model does not infer cash vs. physical settlement based on the product and then extract the notional currency as settlement currency. The conclusion at Peer Review was that firms should fill out the settlement currency field if it is reportable and DRR should not infer it from the notional."]
        [ruleReference for settlementCurrency common.execution.SettlementCurrencyLeg2]
    override nonStandardizedTermIndicator boolean (0..1)
        [label "92 Non-standardized Term Indicator"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "92" field "Non-standardized Term Indicator"
            provision "Indicator of whether the swap transaction has one or more additional term(s) or provision(s), other than those disseminated to the public pursuant to part 43, that materially affect(s) the price of the swap transaction."]
        [ruleReference NonStandardizedTermIndicator]
    override amendmentIndicator boolean (0..1)
        [label "28 Amendment indicator"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "28" field "Amendment Indicator"
            provision "Indicator of whether the modification of the swap transaction reflects newly agreed upon term(s) from the previously negotiated terms."]
    override packageIndicator boolean (1..1)
        [label "45 Package Indicator"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "45" field "Package Indicator"
            provision "Indicator of whether the swap transaction is part of a package transaction."]
    override counterparty2IdentifierSource Counterparty2IdentifierEnum (1..1)
        [label "15 Counterparty 2 identifier source"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "15" field "Counterparty 2 Identifier Source"
            provision "Source used to identify the Counterparty 2."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "15" field "Counterparty 2 Identifier Source" footnote "30"
            provision "Throughout this Technical Specification, for references to 'Privacy Law Identifiers', refer to DMO Letter No. 17-16, http://www.cftc.gov/idc/groups/public/@lrlettergeneral/documents/letter/17-16.pdf"]
    override customBasketIndicator boolean (1..1)
        [label "25 Custom basket indicator"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "25" field "Custom Basket Indicator"
            provision "Indicator of whether the swap transaction is based on a custom basket."]
        [regulatoryReference ISDA USComplianceGroup date "20220429"
            provision "The US Compliance WG agree on this consistent definition for reporting #25 Custom Basket Indicator. The definition can be used for all 5 asset classes. For purposes of reporting Custom Basket Indicator (CFTC #25), market participants generally refer to a trade as being a custom basket if it is tailored for a specific client, either by the client, by the Swap Dealer, or by both, where the weightings, constituents, roll schedules, etc., are agreed bilaterally with the client and are customized for that specific client. Custom baskets can be in any of the 5 asset classes, which is also reflected in CFTCs validation rule for #25."]
    override underlyingIdOther Max350AlphaNumericTextAllSplChars (0..1)
        [ruleReference empty]
    override underlyingIdOtherSource ProductIdTypeEnum (0..1)
        [ruleReference empty]
    override confirmed ConfirmationEnum (0..1)
        [ruleReference empty]
    override collateralPortfolioIndicator boolean (0..1)
        [ruleReference empty]
    override contractType CommonContractType (0..1)
        [ruleReference empty]
    override assetClass CommonAssetClass (0..1)
        [ruleReference empty]
    override direction1 Direction1Enum (0..1)
        [ruleReference empty]
    override deliveryType DeliveryTypeEnum (0..1) 
        [ruleReference empty]
    override maturityDateOfTheUnderlying date (0..1)
        [ruleReference empty]
    override optionType OptionTypeCode (0..1)
        [ruleReference empty]
    override optionStyle OptionStyleEnum (0..1)
        [ruleReference empty]
    override beneficiary1 Min20Max72AlphaNumericText (0..1)
        [ruleReference empty]
    override beneficiary1IdentifierTypeIndicator boolean (0..1)
        [ruleReference empty]
    override nameOfTheUnderlyingIndex Max50AlphaNumericTextWithSplChars (0..1)
        [ruleReference empty]
    override bookingLocation ISOCountryCodeEnum (0..1)
        [ruleReference empty]
    override basketConstituents cdebase.basket.BasketConstituentsReport (0..*)
        [ruleReference empty]
    override centralCounterparty LEIIdentifier (0..1)
        [ruleReference empty]
    override clearingMember Min20Max72AlphaNumericText (0..1)
        [ruleReference empty]
    override eventIdentifier Max52AlphaNumericText (0..1)
        [ruleReference empty]
    override packageIdentifier Max100AlphaNumericText (0..1)
        [ruleReference empty]
    override optionPremiumPaymentDate date (0..1)
        [ruleReference empty]
    override cdSIndexAttachmentPoint BaseOneRate (0..1)
        [ruleReference empty]
    override cdSIndexDetachmentPoint BaseOneRate (0..1)
        [ruleReference empty]
    override finalContractualSettlementDate date (0..1)
        [ruleReference empty]
    override counterparty2IdentifierType boolean (0..1)
        [ruleReference empty]
    override clearingAccountOrigin ClearingAccountOriginEnum (0..1)
        [ruleReference empty]
    override originalSwapUTI Max52AlphaNumericText (0..1)
        [ruleReference empty]
    override originalSwapSDRIdentifier LEIIdentifier (0..1)
        [ruleReference empty]
    override clearingReceiptTimestamp zonedDateTime (0..1)
        [ruleReference empty]
    override buyerIdentifier Min20Max72AlphaNumericText (0..1)
        [ruleReference empty]
    override sellerIdentifier Min20Max72AlphaNumericText (0..1)
        [ruleReference empty]
    override initialMarginCollateralPortfolioCode Max52AlphaNumericText (0..1)
        [ruleReference empty]
    override variationMarginCollateralPortfolioCode Max52AlphaNumericText (0..1)
        [ruleReference empty]
    override subsequentPositionUTI UTIIdentifierLegacy (0..1)
        [ruleReference empty]
    override masterAgreementType common.contract.MasterAgreementEnum (0..1)
        [ruleReference empty]
    override masterAgreementVersion int (0..1)
        [ruleReference empty]
    override level ReportLevelEnum (0..1)
        [ruleReference empty]
    override brokerID LEIIdentifier (0..1)
        [ruleReference empty]
    override valuationAmount ShortFraction5DecimalNumber (0..1)
        [ruleReference empty]
    override valuationCurrency ISOCurrencyCodeEnum (0..1)
        [ruleReference empty]
    override confirmationTimestamp zonedDateTime (0..1)
        [ruleReference empty]
    override delta ShortFraction5DecimalNumber (0..1)
        [ruleReference empty]
    override seriesVersion Max5Int (0..1)
        [ruleReference empty]
    override secondaryTransactionIdentifier Max72AlphaNumericText (0..1)
        [ruleReference empty]
    override swapLinkID Max35AlphaNumericText (0..1)
        [ruleReference empty]
    override settlementLocation ISOCountryCodeEnum (0..1)
        [label "90 Settlement location"]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "90" field "Settlement location"
            provision "Place of settlement of the transaction as stipulated in the contract. This data element is only applicable for transactions that involve an offshore currency (i.e. a currency which is not included in the ISO 4217 currency list, for example CNH). "]
    override intragroup boolean (0..1)
        [ruleReference empty]
    override entityResponsibleForReporting LEIIdentifier (0..1)
        [ruleReference empty]
    override priorUTI Max52AlphaNumericText (0..1)
        [ruleReference empty]
    override customBasketCode Max52AlphaNumericText (0..1)
        [ruleReference empty]
    override series Max5Int (0..1) 
        [ruleReference empty]
    override seniority SeniorityEnum (0..1)
        [ruleReference empty]
    postPricedSwapIndicator boolean (1..1)
        [label "68 Post-priced swap indicator"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "68" field "Post-priced Swap Indicator"
            provision "Indicator of whether the swap transaction satisfies the definition of 'post-priced swap' in  43.2(a) of the Commission's regulations."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "68" field "Post-priced Swap Indicator" footnote "59"
            provision "For transactions where the swap price is not known at the time to execution, those unknown swap price-related fields can be reported as blank until such time that the price is known."]
        [ruleReference PostPricedSwapIndicator]
    blockTradeElectionIndicator boolean (1..1)
        [label "93 Block Trade Election Indicator"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "93" field "Block Trade Election Indicator"
            provision "Indicator of whether an election has been made to report the swap transaction as a block transaction by the reporting counterparty or as calculated by either the swap data repository acting on behalf of the reporting counterparty or by using a third party."]
        [regulatoryReference ISDA ISDAWorkingGroup date "20220420" // ICE
            provision "If blockTradeIndicator is not present then report as false"]
        [ruleReference BlockTradeElectionIndicator]
    primeBrokerageTransactionIndicator boolean (0..1)
        [label "99 Prime brokerage transaction indicator"]
        [ruleReference PrimeBrokerageTransactionIndicator]
    uniqueSwapIdentifier Max42AlphaNumericText (0..1)
        [label "102 Unique Swap Identifier (USI)"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "102" field "Unique Swap Identifier (USI)"
            provision "The USI is a unique identifier assigned to all swap transactions which identifies the transaction (the swap and its counterparties) uniquely throughout its duration. It consists of a namespace and a transaction identifier."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "102" field "Unique Swap Identifier (USI)" footnote "76"
            provision "Throughout this Technical Specification, references to 'CFTC USI Data Standard' should refer to the USI Data Standard, https://www.cftc.gov/sites/default/files/idc/groups/public/@swaps/documents/dfsubmission/usidatastandards100112.pdf"]
        [regulatoryReference ISDA PeerReviewGroup date "20220309"
            provision "Rule does not model UTI > USI priority defined in CFTC specification."]
        [regulatoryReference ISDA PeerReviewGroup date "20220309"
            provision "Firms do expect to report USI/UTI in both formats: as a single identifier field as well as using Issuer + identifier. The functional model needs to handle both scenarios."]
        [ruleReference UniqueSwapIdentifier]
    cftcGuidebook CFTCGuidebook (1..1)
        [label for messageType "TR Message Type"]
        [regulatoryReference for messageType CFTC Guidebook_Extension table "Table_Ref1" field "Message Type"
            provision "***"]
        [regulatoryReference for messageType CFTC DTCC_Specs table "Table_Ref1" field "Message Type"
            provision "Need to indicate what message is being submitted to GTR"]
        [regulatoryReference for messageType CFTC CME_Specs table "Table_Ref1" field "Submission type"
            provision "An indication of whether the submission meets the requirements of Part 43 or Part 45"]

        [label for optionType "TR Option type"]
        [regulatoryReference for optionType CFTC Guidebook_Extension table "Table_Ref1" field "Option Type"
            provision "TBC with SDR: Indication as to whether the derivative contract is a call (right to purchase a specific underlying asset) or a put (right to sell a specific underlying asset) or whether it cannot be determined whether it is a call or a put at the time of execution of the derivative contract.
            In case of swaptions it shall be:
                - Put, in case of receiver swaption, in which the buyer has the right to enter into a swap as a fixed-rate receiver.
                -Call, in case of payer swaption, in which the buyer has the right to enter into a swap as a fixed-rate payer.
            In case of Caps and Floors it shall be:
                -Put, in case of a Floor.
                -Call, in case of a Cap"]
        [regulatoryReference for optionType CFTC DTCC_Specs table "Table_Ref1" field "Option Type"
            provision "The type of option reported."]
        [regulatoryReference for optionType CFTC CME_Specs table "Table_Ref1" field "Option type"
            provision "Specifies whether an option gives the buyer the right to buy the underlying, ie Call, the right to sell the underlying, ie Sell, or the right to choose whether to buy or sell the underlying at the time of exercise, ie Chooser "]
        [ruleReference for optionType OptionType]

        [label for optionStyle "TR Option Style"]
        [regulatoryReference for optionStyle CFTC Guidebook_Extension table "Table_Ref1" field "Option Style"
            provision "TBC with SDR: - Indicates whether the option may be exercised only at a fixed date (European), a series of pre-specified dates (Bermudan) or at any time during the life of the contract (American)."]
        [regulatoryReference for optionStyle CFTC DTCC_Specs table "Table_Ref1" field "Option Style"
            provision "Need field to determine exercise dates. "]
        [regulatoryReference for optionStyle CFTC CME_Specs table "Table_Ref1" field "Option style"
            provision "Specifies when an option can be exercised. The value European specifies that an option can only be exercised on the expiration date; American specifies that an option can be exercised any time up to and including on the expiration date; and Bermudan specifies that an option can be exercised only at specified times during the life of the contract. Bermudan-style options include variations such as Canary- and Verde-style options."]
        [regulatoryReference for optionStyle ISDA EMIRReportingBestPractice table "2" field "79"
            provision "For Caps and Floors, populated with E(European). Reasoning for CapFloors to be reported as E is that such products would report field 2.1  (Contract Type) as OP and therefore it is required to populate the Option exercise style. While a CapFloor would not have an exercise style, there is no option to report Other. Therefore, best practice is be to report as European E."]
        [ruleReference for optionStyle OptionStyle]

        [label for assetClass "TR Asset Class"]
        [regulatoryReference for assetClass CFTC Guidebook_Extension table "TBC" field "Asset Class"
            provision "COMM = Commodity and emission allowancesCRDT = CreditCURR = CurrencyEQUI = EquityINTR = Interest Rate"]
        [regulatoryReference for assetClass ESMA QandA_On_EMIR_Reporting section "TR" question "1"
            provision "TR Question 1 [last update 24 September 2020] How should the following financial instruments be classified for reporting and other purposes under EMIR? (b) Cross-currency swaps, swaptions, Caps and Floors? (c) Total Return Swaps
                TR Answer 1 (b) These financial instruments should be classified as interest rates, in line with current market practice. On the sections to be reported, ESMA finds that where both sections are relevant having in mind the terms of the contract being reported, both sections of reporting fields are to be reported i.e.option and interest rate for swaption, Caps and Floors, and FX and interest rate or crosscurrency swaps. The contract type (Field 1 of Table 2) should be populated with the value ST for swaption.There are two fields for the notional amount currency and one for the notional amount. To avoid that one counterparty reports the notional amount in CCY1 (Field 9 of Table 2) while the other would report in CCY2 (Field 10 of Table 2), which would create a reconciliation problem, the Field Notional Amount (Field 20 of Table 2) should be denominated in the currency reported in Notional currency 1 (Field 9 of Table 2).
            (c) Total Return Swaps should be classified based on the underlying. For example, a Total Return Swap on an equity index should be reported with value EQ in field Asset class (Table 2 field 2), whereas a Total Return Swap on a bond or loan should be reported with value CR in field Asset class (Table 2 field 2)."]
        [regulatoryReference for assetClass DTCC DTCC_Specs table "Table_Ref1" field "Primary Asset Class"
            provision "Needed for GTR processing to derive validation based on ISDA taxonomy "]
        [regulatoryReference for assetClass CME CME_Specs table "Table_Ref1" field "Asset Class"
            provision "Indicates whether the asset, benchmark or another derivatives contract underlying a derivatives contract is, or references, an equity, rate, credit, commodity or foreign exchange asset."]
        [ruleReference for assetClass AssetClass]

        [label for mandatoryClearingIndicator "TR Mandatory Clearing Indicator"]
        [regulatoryReference for mandatoryClearingIndicator CFTC Guidebook_Extension table "Table_Ref1" field "Mandatory Clearing Indicator"
            provision "TBC with SDR: "]
        [regulatoryReference for mandatoryClearingIndicator CFTC DTCC_Specs table "Table_Ref1" field "Mandatory Clearing Indicator"
            provision "An indicator of whether the transaction is subject to mandatory clearing."]
        [regulatoryReference for mandatoryClearingIndicator CFTC CME_Specs table "Table_Ref1" field "Mandatory Clearing Indicator"
            provision "An indicator of whether the transaction is subject to mandatory clearing "]
        [ruleReference for mandatoryClearingIndicator MandatoryClearingIndicator]

        [label for maturityDateOfTheUnderlier "TR Maturity Date of the Underlier"]
        [regulatoryReference for maturityDateOfTheUnderlier CFTC Guidebook_Extension table "Table_Ref1" field "***"
            provision "TBC with SDR: - ***."]
        [regulatoryReference for maturityDateOfTheUnderlier CFTC DTCC_Specs table "Table_Ref1" field "Maturity Date of the Underlying"
            provision "The date on which the underlying transaction settles if the option is exercised."]
        [regulatoryReference for maturityDateOfTheUnderlier CFTC CME_Specs table "Table_Ref1" field "Maturity Date of the Underlier"
            provision "Necessary to fully describe a swaption."]
        [ruleReference for maturityDateOfTheUnderlier MaturityDateOfTheUnderlier]

        [label for largeNotionalOffFacilitySwapElectionIndicator "TR Large notional off-facility swap election indicator"]
        [regulatoryReference for largeNotionalOffFacilitySwapElectionIndicator CFTC Guidebook_Extension table "Table_Ref1" field "Large notional off-facility swap election indicator"
            provision "***"]
        [regulatoryReference for largeNotionalOffFacilitySwapElectionIndicator CFTC DTCC_Specs table "Table_Ref1" field "Large notional off-facility swap election indicator"
            rationale_author "DTCC - 28/04/22"
            rationale "Interpretation is that this field can be calculated based on the Block Trade Indicator and Execution venue not being SEF or DCM"
            provision "Indicator of whether an election has been made to report the swap transaction as a Large Notional Off-facility Swap by the reporting counterparty or as calculated by either the swap data repository acting on behalf of the reporting counterparty or by using a third party."]
        [regulatoryReference for largeNotionalOffFacilitySwapElectionIndicator CFTC CME_Specs table "Table_Ref1" field "Large notional off-facility swap election indicator"
            provision "Indicator of whether an election has been made to report the swap transaction as a Large Notional Off-facility Swap by the reporting counterparty or as calculated by either the swap data repository acting on behalf of the reporting counterparty or by using a third party"]
        [ruleReference for largeNotionalOffFacilitySwapElectionIndicator LargeNotionalOffFacilitySwapElectionIndicator]

        [label for sefOrDcmIndicator "TR SEF or DCM indicator"]
        [regulatoryReference for sefOrDcmIndicator CFTC Guidebook_Extension table "Table_Ref1" field "SEF or DCM indicator"
            rationale "filtering on CFTC as supervisoryBody is not required as the field will only be present in the CFTC report invoked for eligible transactions"
            rationale "and will not be included in SEC or Canada  Report Types"
            rationale_author "BNPP OM 6/10/22"
            provision "***"]
        [regulatoryReference for sefOrDcmIndicator CFTC DTCC_Specs table "Table_Ref1" field "SEF or DCM Indicator"
            provision "An indication of whether the swap was executed on or pursuant to the rules of a swap execution facility or designated contract market."]
        [regulatoryReference for sefOrDcmIndicator CFTC CME_Specs table "Table_Ref1" field "SEF or DCM Identification"
            provision "An indication of whether the swap was executed on or pursuant to the rules of a swap execution facility or designated contract market."]
        [ruleReference for sefOrDcmIndicator SefOrDcmIndicator]

        [label for sefOrDcmAnonymousExecutionIndicator "TR SEF or DCM Anonymous Execution Indicator"]
        [regulatoryReference for sefOrDcmAnonymousExecutionIndicator CFTC Guidebook_Extension table "Table_Ref1" field "SEF or DCM Anonymous Execution Indicator"
            rationale "filtering on CFTC as supervisoryBody is not required as the field will only be present in the CFTC report invoked for eligible transactions"
            rationale "and will not be included in SEC or Canada  Report Types"
            rationale_author "BNPP OM 6/10/22"
            provision "Indicator of whether the swap was executed anonymously on a SEF or DCM. When set to true, counterparty details will be masked on reporting."]
        [regulatoryReference for sefOrDcmAnonymousExecutionIndicator CFTC DTCC_Specs table "Table_Ref1" field "SEF or DCM Anonymous Execution Indicator"
            provision "Indicator of whether the swap was executed anonymously on a SEF or DCM. When set to true, counterparty details will be masked on reporting."]
        [regulatoryReference for sefOrDcmAnonymousExecutionIndicator CFTC CME_Specs table "Table_Ref1" field "AnonymousExecutionIndicator"
            provision "An indicator of whether the swap was executed anonymously on a SEF or DCM"]
        [ruleReference for sefOrDcmAnonymousExecutionIndicator SefOrDcmAnonymousExecutionIndicator]

        [label for settlementType "TR Settlement Type"]
        [regulatoryReference CFTC Guidebook_Extension table "Table_Ref1" field "***"
            provision "TBC with SDR: - ***."]
        [regulatoryReference CFTC DTCC_Specs table "Table_Ref1" field "Settlement Type"
            provision "Needed to satisfy conditionality for Settlement Currency."]
        [regulatoryReference CFTC CME_Specs table "Table_Ref1" field "Delivery type"
            provision "Indicates whether a derivatives contract will deliver a physical asset or a cash equivalent at settlement."]
        [ruleReference for settlementType SettlementType]

        [label for sdMspIndicatorParty1 "TR SD MSP Indicator - Counterparty 1"]
        [regulatoryReference for sdMspIndicatorParty1 CFTC Guidebook_Extension table "Table_Ref1" field "SD MSP indicator - Counterparty 1"
            provision "***"]
        [regulatoryReference for sdMspIndicatorParty1 CFTC DTCC_Specs table "Table_Ref1" field "SD MSP indicator - Counterparty 1"
            provision "Indicator of whether counteparty 1 is SD or MSP."]
        [regulatoryReference for sdMspIndicatorParty1 CFTC CME_Specs table "Table_Ref1" field "SD MSP Indicator Counterparty 1"
            provision "Indicator RP is SD or MSP"]
        [ruleReference for sdMspIndicatorParty1 SdMspIndicatorParty1]

        [label for sdMspIndicatorParty2 "TR SD MSP Indicator - Counterparty 2"]
        [regulatoryReference for sdMspIndicatorParty2 CFTC Guidebook_Extension table "Table_Ref1" field "SD MSP indicator - Counterparty 2"
            provision "***"]
        [regulatoryReference for sdMspIndicatorParty2 CFTC DTCC_Specs table "Table_Ref1" field "SD MSP indicator - Counterparty 2"
            provision "Indicator of whether counteparty 2 is SD or MSP."]
        [regulatoryReference for sdMspIndicatorParty2 CFTC CME_Specs table "Table_Ref1" field "SD MSP Indicator Counterparty 2"
            provision "Indicator Non-RP is SD or MSP"]
        [ruleReference for sdMspIndicatorParty2 SdMspIndicatorParty2]

        [label for physicalCommodityIndicator "TR Physical commodity contract indicator"]
        [regulatoryReference for physicalCommodityIndicator CFTC Guidebook_Extension table "Table_Ref1" field "Physical commodity contract indicator"
            provision "***"]
        [regulatoryReference for physicalCommodityIndicator CFTC DTCC_Specs table "Table_Ref1" field "Physical commodity contract indicator"
            provision "An indication of whether or not the trade being submitted: (1) references one of the contracts described in Appendix B to part 43; or (2) is economically related to one of the contracts described in Appendix B to part 43"]
        [regulatoryReference for physicalCommodityIndicator CFTC CME_Specs table "Table_Ref1" field "Physical commodity contract indicator"
            provision "Indicates whether or not the trade being submitted (1) references one of the contracts described in appendix B to part 43; or (2) is economically related to one of the contracts described in appendix B to part 43"]
        [ruleReference for physicalCommodityIndicator PhysicalCommodityIndicator]

type CFTCPart45Leg extends common.CommonLeg:
    payerIdentifierFormat PartyIdentifierFormatEnum (0..1) <"PayerIdentifierLeg1 Format - LEI, or LEI and Person.">
        [nonReportable]
    receiverIdentifierFormat PartyIdentifierFormatEnum (0..1) <"ReceiverIdentifierLeg1 Format - LEI, or LEI and Person.">
        [nonReportable]

type CFTCPart43TransactionReport extends CFTCTransactionReport:
    override cftcGuidebook CFTCGuidebook (1..1)
        [ruleReference for messageType MessageTypeRealTime]
    override nonReportable CFTCNonReportablePart43 (0..1)
        [ruleReference for enrichment EnrichmentData]
        [ruleReference for preUpiData UpiPreEnrichmentData]
        [ruleReference for postUpiData UpiPostEnrichmentData]
        [label for notionalSchedule "Notional Schedule (non-reportable)"]
        [regulatoryReference for notionalSchedule ISDA EUUKNAPeerReviewGroup date "20250416" field "Notional Schedule (non-reportable)"
            provision "The firms proposed extracting post-UPI information through an alternative method for entities not utilizing the UPI, with the objective of enabling the use of the Validation Rules. Consequently, this non-reportable field has been created, which in this instance extracts the Notional Schedule."]
        [ruleReference for notionalSchedule common.quantity.NotionalSchedule]
        [label for underlyingAssetType "Underlying Asset Type (non-reportable)"]
        [regulatoryReference for underlyingAssetType ISDA EUUKNAPeerReviewGroup date "20250416" field "Underlying Asset Type (non-reportable)"
            provision "The firms proposed extracting post-UPI information through an alternative method for entities not utilizing the UPI, with the objective of enabling the use of the Validation Rules. Consequently, this non-reportable field has been created, which in this instance extracts the Underlying Asset Type."]
        [ruleReference for underlyingAssetType common.contract.UnderlyingAssetType]
        [label for instrumentType "Instrument Type (non-reportable)"]
        [regulatoryReference for instrumentType ISDA EUUKNAPeerReviewGroup date "20250416" field "Instrument Type (non-reportable)"
            provision "The firms proposed extracting post-UPI information through an alternative method for entities not utilizing the UPI, with the objective of enabling the use of the Validation Rules. Consequently, this non-reportable field has been created, which in this instance extracts the Instrument Type."]
        [ruleReference for instrumentType InstrumentType]

    condition Counterparty1Format: <"Validate that counterparty1 identifier has the correct format.">
        ValidatePartyIdentifierFormat(counterparty1, nonReportable -> counterparty1Format)

    condition Counterparty2Format: <"Validate that counterparty2 identifier has the correct format.">
        ValidatePartyIdentifierFormat(counterparty2, nonReportable -> counterparty2Format)

    condition OtherPartyPaymentPayerIdentifierFormat: <"Validate that payer on each otherPayment has the correct format.">
        EmptyOrAllMatch(
                otherPayment extract ValidatePartyIdentifierFormat(payer, payerFormat),
                True
            )

    condition OtherPartyPaymentReceiverIdentifierFormat: <"Validate that receiver on each otherPayment has the correct format.">
        EmptyOrAllMatch(
                otherPayment extract ValidatePartyIdentifierFormat(receiver, receiverFormat),
                True
            )

//Events category validation logic
    condition EventTypeCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "27" validationRule "Transaction"
      provision "C, for valid Action type and Event type Combination, see table in Appendix F."]
        if actionType = ActionTypeEnum -> NEWT
        then [EventTypeEnum -> TRAD, EventTypeEnum -> NOVA, EventTypeEnum -> COMP, EventTypeEnum -> EXER, EventTypeEnum -> CORP] any = eventType
        else if actionType = ActionTypeEnum -> MODI
        then [EventTypeEnum -> TRAD, EventTypeEnum -> NOVA, EventTypeEnum -> COMP, EventTypeEnum -> CREV, EventTypeEnum -> CORP, EventTypeEnum -> UPDT] any = eventType
        else if actionType = ActionTypeEnum -> TERM
        then [EventTypeEnum -> NOVA, EventTypeEnum -> COMP, EventTypeEnum -> ETRM, EventTypeEnum -> CLRG, EventTypeEnum -> EXER, EventTypeEnum -> CLAL, EventTypeEnum -> CREV, EventTypeEnum -> CORP] any = eventType
        else [ActionTypeEnum -> CORR, ActionTypeEnum -> EROR, ActionTypeEnum -> REVI, ActionTypeEnum -> VALU, ActionTypeEnum -> MARU, ActionTypeEnum -> PRTO] any = actionType
            and eventType is absent

    condition AmendmentIndicatorCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "28" validationRule "Transaction"
      provision "C if [Action type] = MODI, else {blank}"]
        if actionType = MODI
        then amendmentIndicator exists
        else amendmentIndicator is absent

    condition EventTimestampCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "30" validationRule "Transaction"
      provision "M, the value shall be equal to or later than the value in [Execution timestamp]"]
        eventTimestamp = executionTimestamp or eventTimestamp > executionTimestamp

//Notional amounts and quantities category validation logic
    condition NotionalAmountCondition:
    [regulatoryReference CFTC Part43_V3_2 appendix "1" dataElement "31" validationRule "Transaction"
        provision "M, for FX, if UPI.[Instrument type] = Option, the value shall match the value in Call amount or Put amount"]
        if (nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange
                    or cftcGuidebook -> assetClass = "ForeignExchange")
                and (cftcGuidebook -> optionStyle exists
                    or nonReportable -> postUpiData -> Header -> InstrumentType = Option)
        then ((if leg1 -> notionalAmount exists and (callAmount exists and putAmount exists) then leg1 -> notionalAmount = callAmount or leg1 -> notionalAmount = putAmount)
                and (if leg2 -> notionalAmount exists and (callAmount exists and putAmount exists) then leg2 -> notionalAmount = callAmount or leg2 -> notionalAmount = putAmount)) // TODO Check Change

    condition NotionalCurrencyCondition:
    [regulatoryReference CFTC Part43_V3_2 appendix "1" dataElement "32" validationRule "Transaction"
      provision "M, for FX, if UPI.[Instrument type] = Option, the value shall match the value in Call Currency or Put Currency"]
        if (nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange
                    or cftcGuidebook -> assetClass = "ForeignExchange")
                and (cftcGuidebook -> optionStyle exists
                    or nonReportable -> postUpiData -> Header -> InstrumentType = Option)
        then ((if leg1 -> notionalCurrency exists and (callCurrency exists and putCurrency exists) then leg1 -> notionalCurrency = callCurrency or leg1 -> notionalCurrency = putCurrency)
                and (if leg2 -> notionalCurrency exists and (callCurrency exists and putCurrency exists) then leg2 -> notionalCurrency = callCurrency or leg2 -> notionalCurrency = putCurrency))

    condition NotionalAmountScheduleCondition:
    [regulatoryReference CFTC Part43_V3_2 appendix "1" dataElement "33" validationRule "Transaction"
      provision "Transaction-IR: C if UPI.[Notional schedule] <> Constant, else {blank}"]
        if (cftcGuidebook -> assetClass = "InterestRate"
                or nonReportable -> postUpiData -> Header -> AssetClass = Rates)
        then (if (nonReportable -> postUpiData -> Attributes -> NotionalSchedule exists
                        and nonReportable -> postUpiData -> Attributes -> NotionalSchedule <> Constant)
                    or nonReportable -> notionalSchedule <> Constant
            then (leg1 -> notionalAmountSchedule -> value exists
                    or leg2 -> notionalAmountSchedule -> value exists)
            else (leg1 -> notionalAmountSchedule -> value is absent
                and leg2 -> notionalAmountSchedule -> value is absent))

    condition CallAmountCondition:
    [regulatoryReference CFTC Part43_V3_2 appendix "1" dataElement "36" validationRule "Transaction"
      provision "Transaction-FX: C if UPI.[Instrument type] = Option, at least one is required: ([Call amount] or [Put amount])"]
        if (cftcGuidebook -> assetClass = "ForeignExchange"
                    or nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange)
                and (cftcGuidebook -> optionStyle exists
                    or nonReportable -> postUpiData -> Header -> InstrumentType = Option)
        then callAmount exists or putAmount exists

    condition CallCurrencyCondition:
        [regulatoryReference CFTC Part43_V3_2 appendix "1" dataElement "37" validationRule "Transaction"
        provision "Transaction-FX: C if [Call amount] is populated, else {blank}"]
        if (cftcGuidebook -> assetClass = "ForeignExchange"
                    or nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange)
                and callAmount exists
        then callCurrency exists
        else callCurrency is absent

    condition PutAmountCondition:
    [regulatoryReference CFTC Part43_V3_2 appendix "1" dataElement "38" validationRule "Transaction"
      provision "Transaction-FX: C if UPI.[Instrument type] = Option, at least one is required: ([Call amount] or [Put amount])"]
        if (cftcGuidebook -> assetClass = "ForeignExchange"
                    or nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange)
                and (cftcGuidebook -> optionStyle exists
                    or nonReportable -> postUpiData -> Header -> InstrumentType = Option)
        then putAmount exists or callAmount exists

    condition PutCurrencyCondition:
    [regulatoryReference CFTC Part43_V3_2 appendix "1" dataElement "39" validationRule "Transaction"
      provision "Transaction-FX: C if [Put amount] is populated, else {blank}"]
        if (cftcGuidebook -> assetClass = "ForeignExchange"
                    or nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange)
                and putAmount exists
        then putCurrency exists
        else putCurrency is absent

    condition NotionalQuantityCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "40" validationRule "Transaction"
      provision "Transaction-CO: Optional"]
        if cftcGuidebook -> assetClass <> "Commodity"
        then leg1 -> notionalQuantity is absent and leg2 -> notionalQuantity is absent

    condition QuantityFrequencyCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "41" validationRule "Transaction"
      provision "Transaction-CO: C if [Notional quantity] is populated, else {blank}"]
        if cftcGuidebook -> assetClass = "Commodity"
        then ((if leg1 -> notionalQuantity exists then leg1 -> quantityFrequency exists)
                and (if leg1 -> notionalQuantity is absent then leg1 -> quantityFrequency is absent)
                and (if leg2 -> notionalQuantity exists then leg2 -> quantityFrequency exists)
                and (if leg2 -> notionalQuantity is absent then leg2 -> quantityFrequency is absent))
        else leg1 -> quantityFrequency is absent and leg2 -> quantityFrequency is absent

    condition QuantityFrequencyMultiplierCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "42" validationRule "Transaction"
        provision "Transaction-CO: C if [Quantity frequency] <> ONDE or ADHO, else {blank}"]
        if cftcGuidebook -> assetClass = "Commodity"
        then ((if leg1 -> quantityFrequency exists
                    and [FrequencyPeriodEnum -> ONDE, FrequencyPeriodEnum -> ADHO] any <> leg1 -> quantityFrequency
            then leg1 -> quantityFrequencyMultiplier exists
            else leg1 -> quantityFrequencyMultiplier is absent)
                and (if leg2 -> quantityFrequency exists
                            and [FrequencyPeriodEnum -> ONDE, FrequencyPeriodEnum -> ADHO] any <> leg2 -> quantityFrequency
                    then leg2 -> quantityFrequencyMultiplier exists
                    else leg2 -> quantityFrequencyMultiplier is absent))
        else leg1 -> quantityFrequencyMultiplier is absent
            and leg2 -> quantityFrequencyMultiplier is absent

    condition QuantityUnitOfMeasureCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "43" validationRule "Transaction"
      provision "Transaction-EQ/CO: Mandatory"]
        if ["Commodity", "Equity"] any = cftcGuidebook -> assetClass
        then leg1 -> quantityUnitOfMeasure exists or leg2 -> quantityUnitOfMeasure exists
        else leg1 -> quantityUnitOfMeasure is absent
            and leg2 -> quantityUnitOfMeasure is absent

    condition TotalNotionalQuantityCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "44" validationRule "Transaction"
      provision "Transaction-EQ/CO: Mandatory"]
        if ["Commodity", "Equity"] any = cftcGuidebook -> assetClass
        then leg1 -> totalNotionalQuantity exists or leg2 -> totalNotionalQuantity exists
        else leg1 -> totalNotionalQuantity is absent
            and leg2 -> totalNotionalQuantity is absent

//Packages category validation logic
    condition PackageTransactionPriceCurrencyCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "48" validationRule "Transaction"
      provision "C if [Package transaction price notation] = 1, else {blank}"]
        if packageTransactionPriceNotation = Monetary
        then packageTransactionPriceCurrency exists
        else packageTransactionPriceCurrency is absent

    condition PackageTransactionPriceCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "47" validationRule "Transaction"
      provision "C if [Package indicator] = True and [Package transaction spread] is not populated, else {blank}"]
        if (packageIndicator = True and packageTransactionSpread is absent)
        then packageTransactionPrice exists
        else packageTransactionPrice is absent

    condition PackageTransactionSpreadCurrencyCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "51" validationRule "Transaction"
      provision "C if [Package transaction spread notation] = '1', else {blank}"]
        if packageTransactionSpreadNotation = Monetary
        then packageTransactionSpreadCurrency exists
        else packageTransactionSpreadCurrency is absent

    condition PackageTransactionSpreadCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "50" validationRule "Transaction"
      provision "C if [Package indicator] = True and [Package transaction price] is not populated, else {blank}"]
        if packageIndicator = True and packageTransactionPrice is absent
        then packageTransactionSpread exists
        else packageTransactionSpread is absent

//Payments category validation logic
    condition DayCountConventionCondition:
    [regulatoryReference CFTC Part43_V3_2 appendix "1" dataElement "53" validationRule "Transaction"
      provision "Transaction-CR/IR/FX: O
                Transaction-CO/EQ: C if [Payment frequency period] is populated, else {blank}"]
        if ["Commodity", "Equity"] any = cftcGuidebook -> assetClass
        then ((if leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriod exists
            then leg1 -> periodicPayment -> fixedRateDayCountConvention exists
            else if leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriod exists
            then leg1 -> periodicPayment -> floatingRateDayCountConvention exists
            else leg1 -> periodicPayment -> fixedRateDayCountConvention is absent
                and leg1 -> periodicPayment -> floatingRateDayCountConvention is absent)
                and (if leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriod exists
                    then leg2 -> periodicPayment -> fixedRateDayCountConvention exists
                    else if leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriod exists
                    then leg2 -> periodicPayment -> floatingRateDayCountConvention exists
                    else leg2 -> periodicPayment -> fixedRateDayCountConvention is absent
                        and leg2 -> periodicPayment -> floatingRateDayCountConvention is absent))

    condition FloatingRateResetFrequencyPeriodCond:
    [regulatoryReference CFTC Part43_V3_2 appendix "1" dataElement "55" validationRule "Transaction"
      provision "Transaction - CR/FX/EQ/CO: O
                Transaction - IR: C if UPI.[Instrument type] = Swap and UPI.[Underlier type] <> Fixed - Fixed, else {blank}.
                When populated with EXPI, [Floating rate reset frequency period multiplier] must be 1."]
        (if (nonReportable -> postUpiData -> Header -> AssetClass = Rates
                or cftcGuidebook -> assetClass = "InterestRate")
        then (if (nonReportable -> postUpiData -> Header -> InstrumentType = Swap
                        or nonReportable -> instrumentType = Swap)
                    and ((nonReportable -> postUpiData -> Derived -> UnderlyingAssetType exists
                            and nonReportable -> postUpiData -> Derived -> UnderlyingAssetType <> Fixed_Fixed)
                        or nonReportable -> underlyingAssetType <> "Fixed_Fixed")
            then leg1 -> periodicPayment -> floatingRateResetFrequencyPeriod exists
                    or leg2 -> periodicPayment -> floatingRateResetFrequencyPeriod exists
            else leg1 -> periodicPayment -> floatingRateResetFrequencyPeriod is absent
                and leg2 -> periodicPayment -> floatingRateResetFrequencyPeriod is absent))
            and ((if leg1 -> periodicPayment -> floatingRateResetFrequencyPeriod = EXPI
            then leg1 -> periodicPayment -> floatingRateResetFrequencyMultiplier = 1)
                and (if leg2 -> periodicPayment -> floatingRateResetFrequencyPeriod = EXPI
                    then leg2 -> periodicPayment -> floatingRateResetFrequencyMultiplier = 1))

    condition FloatingRateResetFrequencyPeriodMultiplierCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "56" validationRule "Transaction"
      provision "C if [Floating rate reset frequency period] <> ADHO, else {blank}"]
        (if leg1 -> periodicPayment -> floatingRateResetFrequencyPeriod exists
                and leg1 -> periodicPayment -> floatingRateResetFrequencyPeriod <> ADHO
        then leg1 -> periodicPayment -> floatingRateResetFrequencyMultiplier exists
        else leg1 -> periodicPayment -> floatingRateResetFrequencyMultiplier is absent)
            and (if leg2 -> periodicPayment -> floatingRateResetFrequencyPeriod exists
                        and leg2 -> periodicPayment -> floatingRateResetFrequencyPeriod <> ADHO
                then leg2 -> periodicPayment -> floatingRateResetFrequencyMultiplier exists
                else leg2 -> periodicPayment -> floatingRateResetFrequencyMultiplier is absent)

    condition OtherPaymentTypeCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "57" validationRule "Transaction"
      provision "Transaction - CR: C, at least one is required: ([Fixed rate] or [Spread] or [Other payment type] = UFRO. Allowable values UWIN and PEXH are optional and independent of the above condition.
                  Transaction  IR/FX/EQ/CO - O."]
        if cftcGuidebook -> assetClass = "Credit"
        then (if leg1 -> fixedRate is absent
                    and leg2 -> fixedRate is absent
                    and leg1 -> spread is absent
                    and leg2 -> spread is absent
            then otherPayment -> paymentType any = UFRO)

    condition PaymentFrequencyPeriodCondition:
    [regulatoryReference CFTC Part43_V3_2 appendix "1" dataElement "63" validationRule "Transaction"
      provision "Transaction CR/IR/EQ/CO - O when populated with EXPI, [Payment frequency period multiplier] must be 1."]
        if [AnnaDsbAssetClassEnum -> Credit, AnnaDsbAssetClassEnum -> Rates, AnnaDsbAssetClassEnum -> Equity, AnnaDsbAssetClassEnum -> Commodities] any = nonReportable -> postUpiData -> Header -> AssetClass
                or ["Credit", "InterestRate", "Equity", "Commodity"] any = cftcGuidebook -> assetClass
        then ((if leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriod = EXPI
            then leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier = 1
            else if leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriod = EXPI
            then leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier = 1)
                and (if leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriod = EXPI
                    then leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier = 1
                    else if leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriod = EXPI
                    then leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier = 1))

    condition PaymentFrequencyPeriodMultiplierCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "64" validationRule "Transaction"
      provision "Transaction - CR/IR/EQ/CO: C if [Payment frequency period] <> ADHO, else {blank}"]
        if ["Credit", "InterestRate", "Equity", "Commodity"] any = cftcGuidebook -> assetClass
        then ((if leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriod exists
                    and leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriod <> FrequencyPeriodEnum -> ADHO
            then leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier exists
            else if leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriod exists
                    and leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriod <> FrequencyPeriodEnum -> ADHO
            then leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier exists
            else leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier is absent
                and leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier is absent)
                and (if leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriod exists
                            and leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriod <> FrequencyPeriodEnum -> ADHO
                    then leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier exists
                    else if leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriod exists
                            and leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriod <> FrequencyPeriodEnum -> ADHO
                    then leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier exists
                    else leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier is absent
                        and leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier is absent))
        else leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier is absent
            and leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier is absent
            and leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier is absent
            and leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier is absent

//Prices category validation logic
    condition ExchangeRateCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "65" validationRule "Transaction"
      provision "Transaction - FX: Mandatory"]
        if cftcGuidebook -> assetClass = "ForeignExchange"
        then exchangeRate exists
        else exchangeRate is absent

    condition ExchangeRateBasisCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "66" validationRule "Transaction"
      provision "Transaction - FX: Mandatory"]
        if cftcGuidebook -> assetClass = "ForeignExchange"
        then exchangeRateBasis exists
        else exchangeRateBasis is absent

    condition FixedRateCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "67" validationRule "Transaction"
      provision "Transaction - CR: C if [Spread] is not populated and [Other payment type] <> UFRO, and [Post-priced swap indicator] = False, and UPI.[Instrument           type] <> Option, else {blank}.
                Transaction - IR: C if [Spread] is not populated and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}.
                Transaction - CO: C if [Price] or [Spread] is not populated and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}."]
        // Credit
        if cftcGuidebook -> assetClass = "Credit"
        then (if leg1 -> spread is absent
                    and otherPayment -> paymentType any <> UFRO
                    and postPricedSwapIndicator = False
                    and cftcGuidebook -> optionStyle is absent
            then leg1 -> fixedRate exists
            else leg1 -> fixedRate is absent)
                and (if leg2 -> spread is absent
                            and otherPayment -> paymentType any <> UFRO
                            and postPricedSwapIndicator = False
                            and cftcGuidebook -> optionStyle is absent
                    then leg2 -> fixedRate exists
                    else leg2 -> fixedRate is absent)
        // Rates
        else if cftcGuidebook -> assetClass = "InterestRate"
        then (if leg1 -> spread is absent
                    and postPricedSwapIndicator = False
                    and cftcGuidebook -> optionStyle is absent
            then leg1 -> fixedRate exists
            else leg1 -> fixedRate is absent)
                and (if leg2 -> spread is absent
                            and postPricedSwapIndicator = False
                            and cftcGuidebook -> optionStyle is absent
                    then leg2 -> fixedRate exists
                    else leg2 -> fixedRate is absent)
        else if cftcGuidebook -> assetClass = "Commodity"
                and ((price is absent or (leg1 -> spread is absent and leg2 -> spread is absent)) and postPricedSwapIndicator = False and cftcGuidebook -> optionStyle is absent)
        then leg1 -> fixedRate exists or leg2 -> fixedRate exists
        else leg1 -> fixedRate is absent and leg2 -> fixedRate is absent

    condition PriceCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "69" validationRule "Transaction"
      provision "Transaction - EQ: C if [Spread] is not populated and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}.
                 Transaction - CO: C if ([Fixed rate] or [Spread] is not populated) and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}."]
        if cftcGuidebook -> assetClass = "Equity"
                and leg1 -> spread is absent
                and leg2 -> spread is absent
                and postPricedSwapIndicator = False
                and cftcGuidebook -> optionStyle is absent
        then price exists
        else if cftcGuidebook -> assetClass = "Commodity"
                and ((leg1 -> fixedRate is absent and leg2 -> fixedRate is absent) or (leg1 -> spread is absent and leg2 -> spread is absent))
                and postPricedSwapIndicator = False
                and cftcGuidebook -> optionStyle is absent
        then price exists
        else price is absent

    condition PriceCurrencyCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "70" validationRule "Transaction"
      provision "Transaction - EQ/CO: C if [Price notation] = 1, else {blank}."]
        if ["Equity", "Commodity"] any = cftcGuidebook -> assetClass
                and priceNotation = Monetary
        then priceCurrency exists
        else priceCurrency is absent

    condition PriceNotationCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "71" validationRule "Transaction"
      provision "Transaction - EQ/CO: C if [Price] is populated, else {blank}."]
        if ["Equity", "Commodity"] any = cftcGuidebook -> assetClass and price exists
        then priceNotation exists
        else priceNotation is absent

    condition PriceUnitOfMesureCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "72" validationRule "Transaction"
      provision "Transaction - EQ/CO: C if [Price] is populated, else {blank}"]
        if ["Equity", "Commodity"] any = cftcGuidebook -> assetClass and price exists
        then priceUnitOfMeasure exists
        else priceUnitOfMeasure is absent

    condition SpreadCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "73" validationRule "Transaction"
      provision "Transaction - CR: C if [Fixed rate] is not populated and [Other payment type] <> UFRO, and [Post-priced swap indicator] = False, and           UPI.[Instrument type] <> Option, else {blank}
                Transaction - IR: C if [Fixed rate] is not populated and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}.
                Transaction - EQ: C if [Price] is not populated, and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}.Abs
                Transaction - CO: C if [Price] or [Fixed rate] is not populated and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}"]
        // Credit
        if cftcGuidebook -> assetClass = "Credit"
        then (if leg1 -> fixedRate is absent
                    and otherPayment -> paymentType any <> UFRO
                    and postPricedSwapIndicator = False
                    and cftcGuidebook -> optionStyle is absent
            then leg1 -> spread exists
            else leg1 -> spread is absent)
                and (if leg2 -> fixedRate is absent
                            and otherPayment -> paymentType any <> UFRO
                            and postPricedSwapIndicator = False
                            and cftcGuidebook -> optionStyle is absent
                    then leg2 -> spread exists
                    else leg2 -> spread is absent)
        // Rates
        else if cftcGuidebook -> assetClass = "InterestRate"
        then (if leg1 -> fixedRate is absent
                    and postPricedSwapIndicator = False
                    and cftcGuidebook -> optionStyle is absent
            then leg1 -> spread exists
            else leg1 -> spread is absent)
                and (if leg2 -> fixedRate is absent
                            and postPricedSwapIndicator = False
                            and cftcGuidebook -> optionStyle is absent
                    then leg2 -> spread exists
                    else leg2 -> spread is absent)
        else if cftcGuidebook -> assetClass = "Equity"
                and (price is absent and postPricedSwapIndicator = False and cftcGuidebook -> optionStyle is absent)
        then leg1 -> spread exists or leg2 -> spread exists
        // Commodity
        else if cftcGuidebook -> assetClass = "Commodity"
        then (if (price is absent or leg1 -> fixedRate is absent)
                    and postPricedSwapIndicator = False
                    and cftcGuidebook -> optionStyle is absent
            then leg1 -> spread exists
            else leg1 -> spread is absent)
                and (if (price is absent or leg2 -> fixedRate is absent)
                            and postPricedSwapIndicator = False
                            and cftcGuidebook -> optionStyle is absent
                    then leg2 -> spread exists
                    else leg2 -> spread is absent)
        else leg1 -> spread is absent and leg2 -> spread is absent

    condition SpreadCurrencyCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "74" validationRule "Transaction"
      provision "Transaction - CR/IR/EQ/CO: C if [Spread notation] = 1, else {blank}"]
        (if ["Credit", "InterestRate", "Equity", "Commodity"] any = cftcGuidebook -> assetClass
                and leg1 -> spreadNotation = Monetary
        then leg1 -> spreadCurrency exists
        else leg1 -> spreadCurrency is absent)
            and (if ["Credit", "InterestRate", "Equity", "Commodity"] any = cftcGuidebook -> assetClass
                        and leg2 -> spreadNotation = Monetary
                then leg2 -> spreadCurrency exists
                else leg2 -> spreadCurrency is absent)

    condition SpreadNotationCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "75" validationRule "Transaction"
      provision "Transaction - CR/IR/EQ/CO: C if [Spread] is populated, else {blank}"]
        (if ["Credit", "InterestRate", "Equity", "Commodity"] any = cftcGuidebook -> assetClass
                and leg1 -> spread exists
        then leg1 -> spreadNotation exists
        else leg1 -> spreadNotation is absent)
            and (if ["Credit", "InterestRate", "Equity", "Commodity"] any = cftcGuidebook -> assetClass
                        and leg2 -> spread exists
                then leg2 -> spreadNotation exists
                else leg2 -> spreadNotation is absent)

    condition StrikePriceCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "76" validationRule "Transaction"
      provision "C if [Post-priced swap indicator] = False and UPI.[Instrument type] = Option, else {blank}."]
        if postPricedSwapIndicator = False and cftcGuidebook -> optionStyle exists
        then strikePrice exists
        else strikePrice is absent

    condition StrikePriceCurrencyCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "77" validationRule "Transaction"
      provision "C if [Strike price notation] = 1, else {blank}"]
        if strikePriceNotation = Monetary
        then strikePriceCurrency exists
        else strikePriceCurrency is absent

    condition StrikePriceNotationCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "78" validationRule "Transaction"
      provision "C if [Strike price] is populated, else {blank}"]
        if strikePrice exists
        then strikePriceNotation exists
        else strikePriceNotation is absent

    condition OptionPremiumAmountCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "79" validationRule "Transaction"
      provision "C if UPI.[Instrument type] = Option, else {blank}."]
        if cftcGuidebook -> optionStyle exists
        then optionPremiumAmount exists
        else optionPremiumAmount is absent

    condition OptionPremiumCurrencyCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "80" validationRule "Transaction"
      provision "C if [Option premium amount] > 0, else {blank}"]
        if optionPremiumAmount > 0
        then optionPremiumCurrency exists
        else optionPremiumCurrency is absent

    condition FirstExerciseDateCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "82" validationRule "Transaction"
      provision "C if UPI.[Instrument type] = Option, else {blank}."]
        if cftcGuidebook -> optionStyle exists
        then firstExerciseDate exists
        else firstExerciseDate is absent

//Product category validation logic
    condition IndexFactorCondition:
    [regulatoryReference CFTC Part43_V3_2 appendix "1" dataElement "85" validationRule "Transaction"
      provision "Transaction - CR: C if UPI.[Underlier type] = Index or Index tranche, else {blank}"]
        if (nonReportable -> postUpiData -> Header -> AssetClass = Credit
                    or cftcGuidebook -> assetClass = "Credit")
                and ([AnnaDsbUnderlyingAssetTypeEnum -> Index, AnnaDsbUnderlyingAssetTypeEnum -> Index_Tranche] any = nonReportable -> postUpiData -> Derived -> UnderlyingAssetType
                    or ["Index", "Index_Tranche"] any = nonReportable -> underlyingAssetType)
        then indexFactor exists
        else indexFactor is absent

//Settlement category validation logic
    condition SettlementCurrencyCondition:
    [regulatoryReference CFTC Part43_V3_2 appendix "1" dataElement "89" validationRule "Transaction"
      provision "C if UPI.[Delivery type] = Cash, else {blank}"]
        if nonReportable -> postUpiData -> Attributes -> DeliveryType = CASH
                or cftcGuidebook -> settlementType = "CASH"
        then (leg1 -> settlementCurrency exists or leg2 -> settlementCurrency exists)
        else (leg1 -> settlementCurrency is absent and leg2 -> settlementCurrency is absent)

//Transaction Related category validation logic    
    condition NonStandardizedTermIndicatorCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "92" validationRule "Transaction"
      provision "C if [Cleared] = N; NR if [Cleared] = Y or I"]
        if cleared = N
        then nonStandardizedTermIndicator exists
        else if cleared = I or cleared = Y
        then nonStandardizedTermIndicator is absent

    condition ExpirationDateCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "95" validationRule "Transaction"
      provision "M, when populated, the value shall be equal to or later than the value in [Effective date]"]
    [regulatoryReference ISDA ISDAWorkingGroup date "unknown"
        provision "Within the design of the CDM model this condition can't be modelled."]
        if expirationDate exists
        then expirationDate = effectiveDate or expirationDate > effectiveDate
        else False

    condition ReportingTimestampCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "97" validationRule "Transaction"
      provision "M, the value shall be equal to or later than the value in [Execution timestamp]"]
        reportingTimestamp = executionTimestamp or reportingTimestamp > executionTimestamp

    condition PlatformIdentifierCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "98" validationRule "Transaction"
      provision "C if [Cleared] = N or I; NR if [Cleared] = Y"]
        if cleared = N or cleared = I
        then platformIdentifier exists
        else if cleared = Y
        then platformIdentifier is absent

    condition PrimeBrokerageTransactionIndicatorCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "99" validationRule "Transaction"
      provision "C if [Cleared] = N or I; NR if [Cleared] = Y"]
        if cleared = N or cleared = I
        then primeBrokerageTransactionIndicator exists
        else if cleared = Y
        then primeBrokerageTransactionIndicator is absent

    condition UniqueSwapIdentifierCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "102" validationRule "Transaction"
      provision "C if [Unique transaction identifier (UTI)] is not populated, else {blank}"]
        if uniqueTransactionIdentifier is absent
        then uniqueSwapIdentifier exists
        else uniqueSwapIdentifier is absent

    condition UniqueTransactionIdentifierCondition:
    [regulatoryReference CFTC Part43 appendix "1" dataElement "103" validationRule "Transaction"
      provision "C if [Unique swap identifier (USI)] is not populated, else {blank}"]
        if uniqueSwapIdentifier is absent
        then uniqueTransactionIdentifier exists
        else uniqueTransactionIdentifier is absent

type CFTCPart45TransactionReport extends CFTCTransactionReport:
    [rootType]
    override centralCounterparty LEIIdentifier (0..1)
        [label "02 Central counterparty"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "2" field "Central Counterparty"
            provision "Identifier of the central counterparty (CCP) that cleared the transaction. This data element is not applicable if the value of the data element 'Cleared' is 'N' (No, not centrally cleared) or 'I' (Intent to clear)."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "2" field "Central Counterparty" footnote "17"
            provision " For CFTC jurisdiction, this data element is optional when the value of the data element Cleared is I (Intent to clear)"]
    [ruleReference cde.execution.CentralCounterparty]
    override clearingMember Min20Max72AlphaNumericText (0..1)
        [label "04 Clearing member"]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "4" field "Clearing Member"
            provision "Identifier of the clearing member through which a derivative transaction was cleared at a central counterparty. This data element is applicable to cleared transactions under both the agency clearing model and the principal clearing model.
           	     - In the case of the principal clearing model, the clearing member is identified as clearing member and also as a counterparty in both transactions resulting from clearing:
                    (i) in the transaction between the central counterparty and the clearing member; and
                    (ii) in the transaction between the clearing member and the counterparty to the original alpha transaction.
           	    - In the case of the agency clearing model, the clearing member is identified as clearing member but not as the counterparty to transactions resulting from clearing. Under this model, the counterparties are the central counterparty and the client.This data element is not applicable if the value of the data element 'Cleared' is 'N' (No, not centrally cleared) or 'I' (Intent to clear)"]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "4" field "Clearing Member" footnote "18"
            provision "Reporting counterparties should report 'clearing swaps' according to the agency clearing model."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "4" field "Clearing Member" footnote "19"
            provision " ROC Statement  Individuals Acting in a Business Capacity,
             ROC Statement - Individuals Acting in a Business Capacity (https://www.leiroc.org/publications/gls/lou_20150930-1.pdf)"]
        [ruleReference cde.execution.ClearingMember]
    override eventIdentifier Max52AlphaNumericText (0..1)
        [label "29 Event identifier"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "29" field "Event Identifier"
            provision "Unique identifier to link swap transactions resulting from an event may be, but is not limited to, compression, and credit event. The unique identifier may be assigned by the reporting counterparty or a service provider."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "29" field "Event Identifier" footnote "37"
            provision "The identifier which relates to the same event should be unique per event."]
        [ruleReference cdeV3.event.EventIdentifier]
    override packageIdentifier Max100AlphaNumericText (0..1)
        [label "46 Package Identifier"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "46" field "Package Identifier"
            provision "Identifier (determined by the reporting counterparty) in order to connect two or more transactions that are reported separately by the reporting counterparty, but that are negotiated together as the product of a single economic agreement. Two or more reports pertaining to the same transaction whenever jurisdictional reporting requirement does not allow the transaction to be reported with a single report to TRs. A package may include reportable and non-reportable transactions. This data element is not applicable  if no package is involved, or  to allocations. Where the Package identifier is not known when a new transaction is reported, the Package identifier is updated as it becomes available."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "46" field "Package Identifier" footnote "45"
            provision "To report a collar, this field should be populated to link the cap and floor legs. To report a straddle, this field should be populated to link the payer swaption and receiver swaption legs."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "46" field "Package Identifier" footnote "46"
            provision "In addition, a 'package transaction' also includes a transaction involving two or more instruments: (1) that is executed between two or more counterparties; (2) that is priced or quoted as one economic transaction with simultaneous or near simultaneous execution of all components; (3) where the execution of each component is contingent upon the execution of all other components; (4) where each component is assigned a Unique Swap Identifier (USI) or Unique Transaction Identifier (UTI); and (5) each component is reported separately."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "46" field "Package Identifier" footnote "47"
            provision "'UNKNOWN' is accepted when the value is not available."]
        [ruleReference PackageIdentifier]
    override optionPremiumPaymentDate date (0..1)
        [label "81 Option Premium Payment Date"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "81" field "Option Premium Payment Date"
            provision "Unadjusted date on which the option premium is paid."]
        [ruleReference cde.price.OptionPremiumPaymentDate]
    override cdSIndexAttachmentPoint BaseOneRate (0..1)
        [label "83 CDS Index Attachment Point"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "83" field "CDS Index Attachment Point"
            provision "Defined lower point at which the level of losses in the underlying portfolio reduces the notional of a tranche. For example, the notional in a tranche with an attachment point of 3% will be reduced after 3% of losses in the portfolio have occurred. This data element is not applicable if the transaction is not a CDS tranche transaction (index or custom basket)."]
    [ruleReference cde.index.CDSIndexAttachmentPoint]
    override cdSIndexDetachmentPoint BaseOneRate (0..1)
        [label "84 CDS Index Detachment Point"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "84" field "CDS Index Detachment Point"
            provision "Defined point beyond which losses in the underlying portfolio no longer reduce the notional of a tranche. For example, the notional in a tranche with an attachment point of 3% and a detachment point of 6% will be reduced after there have been 3% of losses in the portfolio. 6% losses in the portfolio deplete the notional of the tranche. This data element is not applicable if the transaction is not a CDS tranche transaction (index or custom basket)."]
    [ruleReference cde.index.CDSIndexDetachmentPoint]
    override finalContractualSettlementDate date (0..1)
        [label "88 Final Contractual Settlement Date"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "88" field "Final Contractual Settlement Date"
            provision "Unadjusted date as per the contract, by which all transfer of cash or assets should take place and the counterparties should no longer have any outstanding obligations to each other under that contract. For products that may not have a final contractual settlement date (eg American options), this data element reflects the date by which the transfer of cash or asset would take place if termination were to occur on the expiration date."]
        [ruleReference cde.execution.FinalContractualSettlementDate]
    override priorUTI Max52AlphaNumericText (0..1)
        [label "101 Prior UTI"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "101" field "Prior UTI"
            provision "UTI assigned to the predecessor transaction that has given rise to the reported transaction due to a lifecycle event, in a one-to-one relation between transactions (e.g., in the case of a novation, when a transaction is terminated, and a new transaction is generated) or in a one-to-many relation between transactions (e.g., in clearing or if a transaction is split into several different transactions). This data element is not applicable when reporting many-to-one and many-to-many relations between transactions (e.g., in the case of a compression)."]
        [ruleReference PriorUTI]
    override leg1 CFTCPart45Leg (0..1)
        [label for fixingDate "54 Fixing date-Leg 1"]
        [regulatoryReference for fixingDate CFTC Part45 appendix "1" dataElement "54" field "Fixing date - Leg 1"
            provision "Describes the specific date when a non-deliverable forward as well as various types of FX OTC options such as cash-settled options that will 'fix' against a particular exchange rate, which will be used to compute the ultimate cash settlement"]
        [regulatoryReference for fixingDate ISDA PeerReviewGroup date "20211123"
            provision "Only applies to fixing date of an exchange rate as per definition"]
        [ruleReference for fixingDate common.datetime.FixingDateLeg1]

        [label for payerIdentifierFormat "PayerLeg1Identifier Format (non-reportable)"]
        [ruleReference for payerIdentifierFormat PayerLeg1IdentifierFormat]

        [label for receiverIdentifierFormat "ReceiverLeg1Identifier Format (non-reportable)"]
        [ruleReference for receiverIdentifierFormat ReceiverLeg1IdentifierFormat]

        [label for payerIdentifier "20 Payer identifier - Leg 1"]
        [regulatoryReference for payerIdentifier CFTC Part45 appendix "1" dataElement "20" field "Payer Identifier"
            provision "Identifier of the counterparty of the payer leg as determined at the time of the transaction.
                A non-exhaustive list of examples of instruments for which this data element could apply are:
                    - most swaps and swap-like contracts including interest rate swaps, credit total return swaps, and equity swaps (except for credit default swaps, variance, volatility, and correlation swaps)
                    - foreign exchange swaps, forwards, non-deliverable forwards.
                This data element is not applicable to instrument types covered by data elements Buyer identifier and Seller identifier."]
        [regulatoryReference for payerIdentifier CFTC Part45_V3_1 appendix "1" dataElement "20" field "Payer Identifier" footnote "31"
            provision "For fixed-floating interest rate swaps, the payer is the counterparty paying the fixed rate"]
        [regulatoryReference for payerIdentifier ISDA PeerReviewGroup date "20211123"
            provision "Discussed on US Compliance WG - confirmed as per ISDA best practice for direction provided to CPMI-IOSCO best practice and CFTC tiebreaker logic  - Interest rate FRA  should be reported as payer/receiver."]
        [regulatoryReference for payerIdentifier ISDA PeerReviewGroup date "20220307"
            provision "Only Credit TRS should be considered as payer/seller but not modelled yet. CR are reported as buyer/seller"]
        [regulatoryReference for payerIdentifier ISDA PeerReviewGroup date "20220307"
            provision "Peer review recommnended to detect private individual party representations (instead of LEI scheme)."]
        [ruleReference for payerIdentifier PayerIdentifierLeg1]

        [label for receiverIdentifier "21 Receiver identifier - Leg 1"]
        [regulatoryReference for receiverIdentifier CFTC Part45 appendix "1" dataElement "21" field "Receiver Identifier"
            provision "Identifier of the counterparty of the payer leg as determined at the time of the transaction.
                A non-exhaustive list of examples of instruments for which this data element could apply are:
                - most swaps and swap-like contracts including interest rate swaps, credit total return swaps, and equity swaps (except for credit default swaps, variance, volatility, and correlation swaps)
                - foreign exchange swaps, forwards, non-deliverable forwards.
                This data element is not applicable to instrument types covered by data elements Buyer identifier and Seller identifier."]
        [regulatoryReference for receiverIdentifier CFTC Part45_V3_1 appendix "1" dataElement "21" field "Receiver Identifier" footnote "32"
            provision "For fixed-floating interest rate swaps, the receiver is the counterparty receiving the fixed rate"]
        [regulatoryReference for receiverIdentifier ISDA PeerReviewGroup date "20211123"
            provision "Discussed on US Compliance WG - confirmed as per ISDA best practice for direction provided to CPMI-IOSCO best practice and CFTC tiebreaker logic  - Interest rate FRA  should be reported as payer/receiver."]
        [regulatoryReference for receiverIdentifier ISDA PeerReviewGroup date "20220307"
            provision "Only Credit TRS should be considered as payer/seller but not modelled yet. CR are reported as buyer/seller"]
        [regulatoryReference for receiverIdentifier ISDA PeerReviewGroup date "20220307"
            provision "Peer review recommnended to detect private individual party representations (instead of LEI scheme)."]
        [ruleReference for receiverIdentifier ReceiverIdentifierLeg1]

        [label for nextFloatingReferenceResetDate "106 Next Floating Reference Reset Date-Leg 1"]
        [regulatoryReference for nextFloatingReferenceResetDate CFTC Part45 appendix "1" dataElement "106" field "Next Floating Reference Reset Date"
            provision "The nearest date in the future that the floating reference resets on."]
        [regulatoryReference for nextFloatingReferenceResetDate ISDA USComplianceGroup date "20220802"
            provision "Not returning anything until it gets modelled"]
        [ruleReference for nextFloatingReferenceResetDate NextFloatingReferenceResetDate]
    override leg2 CFTCPart45Leg (0..1)
        [label for fixingDate "54 Fixing date-Leg 2"]
        [regulatoryReference for fixingDate CFTC Part45 appendix "1" dataElement "54" field "Fixing date - Leg 2"
            provision "Describes the specific date when a non-deliverable forward as well as various types of FX OTC options such as cash-settled options that will 'fix' against a particular exchange rate, which will be used to compute the ultimate cash settlement"]
        [regulatoryReference for fixingDate ISDA PeerReviewGroup date "20211123"
            provision "Only applies to fixing date of an exchange rate as per definition"]
        [ruleReference for fixingDate common.datetime.FixingDateLeg2]

        [label for payerIdentifierFormat "PayerLeg2Identifier Format (non-reportable)"]
        [ruleReference for payerIdentifierFormat PayerLeg2IdentifierFormat]

        [label for receiverIdentifierFormat "ReceiverLeg2Identifier Format (non-reportable)"]
        [ruleReference for receiverIdentifierFormat ReceiverLeg2IdentifierFormat]

        [label for payerIdentifier "20 Payer identifier - Leg 2"]
        [regulatoryReference for payerIdentifier CFTC Part45 appendix "1" dataElement "20" field "Payer Identifier"
            provision "Identifier of the counterparty of the payer leg as determined at the time of the transaction.
                A non-exhaustive list of examples of instruments for which this data element could apply are:
                - most swaps and swap-like contracts including interest rate swaps, credit total return swaps, and equity swaps (except for credit default swaps, variance, volatility, and correlation swaps)
                - foreign exchange swaps, forwards, non-deliverable forwards.
                This data element is not applicable to instrument types covered by data elements Buyer identifier and Seller identifier."]
        [regulatoryReference for payerIdentifier CFTC Part45_V3_1 appendix "1" dataElement "20" field "Payer Identifier" footnote "31"
            provision "For fixed-floating interest rate swaps, the payer is the counterparty paying the fixed rate"]
        [regulatoryReference for payerIdentifier ISDA PeerReviewGroup date "20211123"
            provision "Discussed on US Compliance WG - confirmed as per ISDA best practice for direction provided to CPMI-IOSCO best practice and CFTC tiebreaker logic - Interest rate FRA should be reported as payer/receiver."]
        [regulatoryReference for payerIdentifier ISDA PeerReviewGroup date "20220307"
            provision "Only Credit TRS should be considered as payer/seller but not modelled yet. CR are reported as buyer/seller"]
        [regulatoryReference for payerIdentifier ISDA PeerReviewGroup date "20220307"
            provision "Peer review recommnended to detect private individual party representations (instead of LEI scheme)."]
        [ruleReference for payerIdentifier PayerIdentifierLeg2]

        [label for receiverIdentifier "21 Receiver identifier - Leg 2"]
        [regulatoryReference for receiverIdentifier CFTC Part45 appendix "1" dataElement "21" field "Receiver Identifier"
            provision "Identifier of the counterparty of the payer leg as determined at the time of the transaction.
                A non-exhaustive list of examples of instruments for which this data element could apply are:
                - most swaps and swap-like contracts including interest rate swaps, credit total return swaps, and equity swaps (except for credit default swaps, variance, volatility, and correlation swaps)
                - foreign exchange swaps, forwards, non-deliverable forwards.
                This data element is not applicable to instrument types covered by data elements Buyer identifier and Seller identifier."]
        [regulatoryReference for receiverIdentifier CFTC Part45_V3_1 appendix "1" dataElement "21" field "Receiver Identifier" footnote "32"
            provision "For fixed-floating interest rate swaps, the receiver is the counterparty receiving the fixed rate"]
        [regulatoryReference for receiverIdentifier ISDA PeerReviewGroup date "20211123"
            provision "Discussed on US Compliance WG - confirmed as per ISDA best practice for direction provided to CPMI-IOSCO best practice and CFTC tiebreaker logic  - Interest rate FRA  should be reported as payer/receiver."]
        [regulatoryReference for receiverIdentifier ISDA PeerReviewGroup date "20220307"
            provision "Only Credit TRS should be considered as payer/seller but not modelled yet. CR are reported as buyer/seller"]
        [regulatoryReference for receiverIdentifier ISDA PeerReviewGroup date "20220307"
            provision "Peer review recommnended to detect private individual party representations (instead of LEI scheme)."]
        [ruleReference for receiverIdentifier ReceiverIdentifierLeg2]

        [label for nextFloatingReferenceResetDate "106 Next Floating Reference Reset Date-Leg 2"]
        [regulatoryReference for nextFloatingReferenceResetDate CFTC Part45 appendix "1" dataElement "106" field "Next Floating Reference Reset Date"
            provision "The nearest date in the future that the floating reference resets on."]
        [regulatoryReference for nextFloatingReferenceResetDate ISDA USComplianceGroup date "20220802"
            provision "Not returning anything until it gets modelled"]
        [ruleReference for nextFloatingReferenceResetDate NextFloatingReferenceResetDate]
    override cftcGuidebook CFTCGuidebook (1..1)
        [ruleReference for messageType MessageTypeTradeState]
    override clearingAccountOrigin ClearingAccountOriginEnum (0..1)
        [label "03 Clearing account origin"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "3" field "Clearing Account Origin"
            provision "Indicator of whether the clearing member acted as principal for a house trade or an agent for a customer trade."]
        [ruleReference common.execution.ClearingAccountOrigin]
    override originalSwapUTI Max52AlphaNumericText (0..1)
        [label "08 Original swap UTI"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "8" field "Original Swap UTI"
            provision "The unique transaction identifier (UTI) of the original swap submitted for clearing to the derivatives clearing organization that is replaced by clearing swaps."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "8" field "Original Swap UTI" footnote "22"
            provision "For transactions where no original swap UTI is available or not provided, a value of 'NOTAVAILABLE' can be used."]
        [ruleReference OriginalSwapUTI]
    override originalSwapSDRIdentifier LEIIdentifier (0..1)
        [label "09 Original swap SDR identifier"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "9" field "Original Swap SDR Identifier"
            provision "Identifier of the swap data repository (SDR) to which the original swap was reported."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "9" field "Original Swap SDR Identifier" footnote "23"
            provision " For transactions where no original swap SDR identifier is available or not provided, a value of 'NOTAVAILABLE' can be used."]
    override clearingReceiptTimestamp zonedDateTime (0..1)
        [label "10 Clearing receipt timestamp"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "10" field "Clearing Receipt Timestamp"
            provision "The date and time, expressed in UTC, the original swap was received by the derivatives clearing organization (DCO) for clearing and recorded by the DCOs system"]
    override buyerIdentifier Min20Max72AlphaNumericText (0..1)
        [label "18 Buyer identifier"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "18" field "Buyer Identifier"
            provision "Identifier of the counterparty that is the buyer, as determined at the time of the transaction.
                A non-exhaustive list of examples of instruments for which this data element could apply are:
                    - most forwards and forward-like contracts (except for foreign exchange forwards and foreign exchange non-deliverable forwards)
                    - most options and option-like contracts including swaptions, caps and floors
                    - credit default swaps (buyer/seller of protection)
                    - variance, volatility and correlation swaps
                    - contracts for difference and spreadbets.
                This data element is not applicable to instrument types covered by data elements Payer identifier and Receiver identifier"]
        [ruleReference cde.party.Direction1BuyerIdentifier]
    override sellerIdentifier Min20Max72AlphaNumericText (0..1)
        [label "19 Seller identifier"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "19" field "Seller Identifier"
            provision "Identifier of the counterparty that is the seller, as determined at the time of the transaction.
                A non-exhaustive list of examples of instruments for which this data element could apply are:
                    - most forwards and forward-like contracts (except for foreign exchange forwards and foreign exchange non-deliverable forwards)
                    - most options and option-like contracts including swaptions, caps and floors
                    - credit default swaps (buyer/seller of protection)
                    - variance, volatility and correlation swaps
                    - contracts for difference and spreadbets.
                This data element is not applicable to instrument types covered by data elements Payer identifier and Receiver identifier"]
        [ruleReference cde.party.Direction1SellerIdentifier]
    override priorUSI Max42AlphaNumericText (0..1)
        [label "100 Prior USI"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "100" field "Prior USI"
            provision "Unique swap identifier (USI) assigned to the predecessor transaction that has given rise to the reported transaction due to a lifecycle event, in a one-to-one relation between transactions (e.g., in the case of a novation, when a transaction is terminated, and a new transaction is generated) or in a one-to-many relation between transactions (e.g., in clearing or if a transaction is split into several different transactions), This data element is not applicable when reporting many-to-one and many-to-many relations between transactions (e.g., in the case of a compression)."]
    override newSDRIdentifier LEIIdentifier (0..1)
        [label "105 New SDR Identifier"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "105" field "New SDR Identifier"
            provision "Identifier of the new swap data repository where the swap transaction is transferred to."]
        [regulatoryReference ISDA USComplianceGroup date "20220802"
            provision "Not returning anything until it gets modelled"]
        [ruleReference NewSDRIdentifier]
    override initialMarginCollateralPortfolioCode Max52AlphaNumericText (0..1)
        [label "116 Initial Margin Collateral Portfolio Code"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "116" field "Initial Margin Collateral Portfolio Code"
            provision "If collateral is reported on a portfolio basis, a unique code assigned by the reporting counterparty to the portfolio that tracks the aggregate initial margin of a set of open swap transactions. This data element is not applicable if the collateralisation was performed on a transaction level basis, or if there is no collateral agreement, or if no collateral is posted or received. The portfolio code is required for both collateral reporting and valuation reporting in order to link the 2 data sets."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "116" field "Initial Margin Collateral Portfolio Code" footnote "82"
            provision "If collateralization was performed on a transaction level basis, 'TRANSACTION-LEVEL' is accepted.  NOTAPPLICABLE is accepted if (i) collateralization was performed on a portfolio basis and there is no IM portfolio code, or (ii) it is a submission from a DCO. "]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "116" field "Initial Margin Collateral Portfolio Code" footnote "83"
            provision " The M in the Part 43/45 Asset Class column is for collateral and valuation reporting only."]
        [regulatoryReference ISDA USComplianceGroup date "20220802"
            provision "Not returning anything until it gets modelled"]
        [ruleReference InitialMarginCollateralPortfolioCode]
    override variationMarginCollateralPortfolioCode Max52AlphaNumericText (0..1)
        [label "124 Variation Margin Collateral Portfolio Code"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "124" field "Variation Margin Collateral Portfolio Code"
            provision "If collateral is reported on a portfolio basis, a unique code assigned by the reporting counterparty to the portfolio that tracks the aggregate variation margin related to a set of open swap transactions. This data element is not applicable if the collateralisation was performed on a transaction level basis, or if there is no collateral agreement, or if no collateral is posted or received. The portfolio code is required for both collateral reporting and valuation reporting in order to link the 2 data sets."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "124" field "Variation Margin Collateral Portfolio Code" footnote "90"
            provision "If collateralization was performed on a transaction level basis, 'TRANSACTION-LEVEL' is accepted. NOTAPPLICABLE is accepted if (i) collateralization was performed on a portfolio basis and there is no VM portfolio code, or (ii) it is a submission from a DCO."]
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "124" field "Variation Margin Collateral Portfolio Code" footnote "91"
            provision "The 'M' in the 'Part 43/45 Asset Class' column is for collateral and valuation reporting only."]
        [regulatoryReference ISDA USComplianceGroup date "20220802"
            provision "Not returning anything until it gets modelled"]
        [ruleReference VariationMarginCollateralPortfolioCode]
    override clearingExceptionsAndExemptionsCounterparty1 ClearingExceptionsAndExemptionsEnum (0..*)
        [label "11-$ Clearing exceptions and exemptions - Counterparty 1"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "11" field "Clearing Exceptions And Exemptions Counterparty 1"
            provision "Identifies the type of clearing exception or exemption that the Counterparty 1 has elected. All applicable exceptions and exemptions must be selected. The values may be repeated as applicable."]
        [ruleReference ClearingExceptionsAndExemptionsCounterparty1]
    override clearingExceptionsAndExemptionsCounterparty2 ClearingExceptionsAndExemptionsEnum (0..*)
        [label "12-$ Clearing exceptions and exemptions - Counterparty 2"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "12" field "Clearing Exceptions And Exemptions Counterparty 2"
            provision "Identifies the type of the clearing exception or exemption that the Counterparty 2 has elected. All applicable exceptions and exemptions must be selected. The values may be repeated as applicable."]
        [ruleReference ClearingExceptionsAndExemptionsCounterparty2]
    override nonReportable CFTCNonReportablePart45 (0..1)
        [ruleReference for enrichment EnrichmentData]
        [ruleReference for preUpiData UpiPreEnrichmentData]
        [ruleReference for postUpiData UpiPostEnrichmentData]
        [label for notionalSchedule "Notional Schedule (non-reportable)"]
        [regulatoryReference for notionalSchedule ISDA EUUKNAPeerReviewGroup date "20250416" field "Notional Schedule (non-reportable)"
            provision "The firms proposed extracting post-UPI information through an alternative method for entities not utilizing the UPI, with the objective of enabling the use of the Validation Rules. Consequently, this non-reportable field has been created, which in this instance extracts the Notional Schedule."]
        [ruleReference for notionalSchedule common.quantity.NotionalSchedule]
        [label for underlyingAssetType "Underlying Asset Type (non-reportable)"]
        [regulatoryReference for underlyingAssetType ISDA EUUKNAPeerReviewGroup date "20250416" field "Underlying Asset Type (non-reportable)"
            provision "The firms proposed extracting post-UPI information through an alternative method for entities not utilizing the UPI, with the objective of enabling the use of the Validation Rules. Consequently, this non-reportable field has been created, which in this instance extracts the Underlying Asset Type."]
        [ruleReference for underlyingAssetType common.contract.UnderlyingAssetType]
        [label for instrumentType "Instrument Type (non-reportable)"]
        [regulatoryReference for instrumentType ISDA EUUKNAPeerReviewGroup date "20250416" field "Instrument Type (non-reportable)"
            provision "The firms proposed extracting post-UPI information through an alternative method for entities not utilizing the UPI, with the objective of enabling the use of the Validation Rules. Consequently, this non-reportable field has been created, which in this instance extracts the Instrument Type."]
        [ruleReference for instrumentType InstrumentType]
    clearingSwapUSIs string (0..*)
        [label "05-$ Clearing swap USIs"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "5" field "Clearing Swap USIs"
            provision "The unique swap identifiers (USI) of each clearing swap that replaces the original swap that was submitted for clearing to the derivatives clearing organization, other than the USI for the swap currently being reported (as 'USI' data element below)."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "5" field "Clearing Swap USIs" footnote "20"
            provision "Throughout this Technical Specification, references to 'CFTC USI Data Standard' should refer to the Unique Swap Identifier (USI) Data Standard,
                https://www.cftc.gov/sites/default/files/idc/groups/public/@swaps/documents/dfsubmission/usidatastandards100112.pdf"]
        [ruleReference ClearingSwapUSIs]
    clearingSwapUTIs Max52AlphaNumericText (0..*)
        [label "06-$ Clearing swap UTIs"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "6" field "Clearing Swap UTIs"
            provision "The unique transaction identifiers (UTI) of each clearing swap that replaces the original swap that was submitted for clearing to the derivatives clearing organization, other than the UTI for the swap currently being reported (as 'UTI' data element below)."]
        [ruleReference ClearingSwapUTIs]
    originalSwapUSI string (0..1)
        [label "07 Original swap USI"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "7" field "Original Swap USI"
            provision "The unique swap identifier (USI) of the original swap submitted for clearing to the derivatives clearing organization that is replaced by clearing swaps."]
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "7" field "Original Swap USI" footnote "21"
            provision "For transactions where no original swap USI is available or not provided, a value of 'NOTAVAILABLE' can be used."]
        [ruleReference OriginalSwapUSI]
    counterparty1FinancialEntityIndicator boolean (0..1)
        [label "16 Counterparty 1 financial entity indicator"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "16" field "Counterparty 1 Financial Entity Indicator"
            provision "Indicator of whether Counterparty 1 is a financial entity as defined in CEA  2(h)(7)(C)."]
        [ruleReference Counterparty1FinancialEntityIndicator]
    counterparty2FinancialEntityIndicator boolean (1..1)
        [label "17 Counterparty 2 financial entity indicator"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "17" field "Counterparty 2 Financial Entity Indicator"
            provision "Indicator of whether Counterparty 2 is a financial entity as defined in CEA  2(h)(7)(C)."]
        [ruleReference Counterparty2FinancialEntityIndicator]
    counterparty1FederalEntityIndicator boolean (1..1)
        [label "23 Counterparty 1 federal entity indicator"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "23" field "Counterparty 2 Federal Entity Indicator"
            provision "Indicator of whether Counterparty 1 is: (1) One of the following entities: a) An entity established pursuant to federal law, including, but not limited to, the following:  i. An agency as defined in 5 U.S.C.  551(1), a federal instrumentality, or a federal authority;  ii. A government corporation (examples: as such term is defined in 5 U.S.C.  103(1) or in 31 U.S.C.  9101);  iii. A government-sponsored enterprise (example: as such term is defined in 2 U.S.C.  622(8)); iv. A federally funded research and development center on the master list referenced in 48 CFR 35.017-6; and v. An executive department listed in 5 U.S.C.  101; or b) An entity chartered pursuant to federal law after formation (example: an organization listed in title 36 of the U.S. Code); or (2)  An entity that was established by, or at the direction of, one or more of the entities listed in dataElement (1), or has an ultimate parent listed in its LEI reference data that is an entity listed in dataElement (1) or in the first part of this dataElement (2). Notwithstanding the foregoing, the Counterparty 1 federal entity indicator data element does not include federally chartered depository institutions."]
        [ruleReference Counterparty1FederalEntityIndicator]
    counterparty2FederalEntityIndicator boolean (1..1)
        [label "24 Counterparty 2 federal entity indicator"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "24" field "Counterparty 2 Federal Entity Indicator"
            provision "Indicator of whether Counterparty 2 is: (1) One of the following entities: a) An entity established pursuant to federal law, including, but not limited to, the following:  i. An agency as defined in 5 U.S.C.  551(1), a federal instrumentality, or a federal authority;  ii. A government corporation (examples: as such term is defined in 5 U.S.C.  103(1) or in 31 U.S.C.  9101);  iii. A government-sponsored enterprise (example: as such term is defined in 2 U.S.C.  622(8)); iv. A federally funded research and development center on the master list referenced in 48 CFR 35.017-6; and v. An executive department listed in 5 U.S.C.  101; or b) An entity chartered pursuant to federal law after formation (example: an organization listed in title 36 of the U.S. Code); or (2)  An entity that was established by, or at the direction of, one or more of the entities listed in dataElement (1), or has an ultimate parent listed in its LEI reference data that is an entity listed in dataElement (1) or in the first part of this dataElement (2). Notwithstanding the foregoing, the Counterparty 2 federal entity indicator data element does not include federally chartered depository institutions."]
        [ruleReference Counterparty2FederalEntityIndicator]
    allocationIndicator AllocationIndicatorEnum (1..1)
        [label "91 Allocation Indicator"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "91" field "Allocation Indicator"
            provision "Indicator of whether the swap transaction is intended to be allocated, will not be allocated, or is a post allocation transaction."]
        [ruleReference AllocationIndicator]
    jurisdiction JurisdictionEnum (1..1)
        [label "104 Jurisdiction"]
        [regulatoryReference CFTC Part45 appendix "1" dataElement "104" field "Jurisdiction Indicator"
            provision "The jurisdiction(s) that is requiring the reporting of the swap transaction."]
        [ruleReference Jurisdiction]

    condition Counterparty1: <"Validate that counterparty1 identifier has the correct format.">
        ValidatePartyIdentifierFormat(counterparty1, nonReportable -> counterparty1Format)

    condition Counterparty2: <"Validate that counterparty2 identifier has the correct format.">
        ValidatePartyIdentifierFormat(counterparty2, nonReportable -> counterparty2Format)

    condition BuyerIdentifier: <"Validate that buyerIdentifier has the correct format.">
        ValidatePartyIdentifierFormat(
                buyerIdentifier,
                nonReportable -> buyerIdentifierFormat
            )

    condition SellerIdentifier: <"Validate that sellerIdentifier has the correct format.">
        ValidatePartyIdentifierFormat(
                sellerIdentifier,
                nonReportable -> sellerIdentifierFormat
            )

    condition PayerIdentifierLeg1: <"Validate that payerIdentifierLeg1 has the correct format.">
        ValidatePartyIdentifierFormat(
                leg1 -> payerIdentifier,
                leg1 -> payerIdentifierFormat
            )

    condition PayerIdentifierLeg2: <"Validate that payerIdentifierLeg2 has the correct format.">
        ValidatePartyIdentifierFormat(
                leg2 -> payerIdentifier,
                leg2 -> payerIdentifierFormat
            )

    condition ReceiverIdentifierLeg1: <"Validate that receiverIdentifierLeg1 has the correct format.">
        ValidatePartyIdentifierFormat(
                leg1 -> receiverIdentifier,
                leg1 -> receiverIdentifierFormat
            )

    condition ReceiverIdentifierLeg2: <"Validate that receiverIdentifierLeg2 has the correct format.">
        ValidatePartyIdentifierFormat(
                leg2 -> receiverIdentifier,
                leg2 -> receiverIdentifierFormat
            )

    condition OtherPartyPaymentPayerIdentifierFormat: <"Validate that payer on each otherPayment has the correct format.">
        EmptyOrAllMatch(
                otherPayment extract ValidatePartyIdentifierFormat(payer, payerFormat),
                True
            )

    condition OtherPartyPaymentReceiverIdentifierFormat: <"Validate that receiver on each otherPayment has the correct format.">
        EmptyOrAllMatch(
                otherPayment extract ValidatePartyIdentifierFormat(receiver, receiverFormat),
                True
            )

//Clearing category validation logic
    condition CentralCounterpartyCondition:
        [regulatoryReference CFTC Part45_V3_1 appendix "1" dataElement "2" validationRule "Transaction"
		provision "C if [Cleared] = Y, When populated, the value shall match the value in [Counterparty 1 (reporting counterparty)];
        NR if [Cleared] = N
        O if [Cleared]=I"]
        if cleared = Y
        then centralCounterparty exists and centralCounterparty = counterparty1
        else if cleared = N
        then centralCounterparty is absent

    condition ClearingAcountOriginCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "3" validationRule "Transaction"
		provision "C if [Cleared] = Y; NR if [Cleared] = N or I"]
        if cleared = Y
        then clearingAccountOrigin exists
        else if cleared = I or cleared = N
        then clearingAccountOrigin is absent

    condition ClearerMemberCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "4" validationRule "Transaction"
		provision "C if [Cleared] = Y; NR if [Cleared] = N or I"]
        if cleared = Y
        then clearingMember exists
        else if cleared = I or cleared = N
        then clearingMember is absent

    condition ClearingSwapUSICondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "5" validationRule "Transaction"
    	provision "C if ([Cleared] = Y or ([Cleared] = I and [Action type] = TERM)) and [Event type] = CLRG and [Clearing swap UTIs] is not populated, else {blank}; NR if [Cleared] = N"]
        if (cleared = Y or (cleared = I and actionType = ActionTypeEnum -> TERM))
                and eventType = EventTypeEnum -> CLRG
        then (if clearingSwapUSIs is absent
            then clearingSwapUTIs exists
            else if clearingSwapUSIs exists
            then clearingSwapUTIs is absent)
        else clearingSwapUSIs is absent

    condition ClearingSwapUTICondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "6" validationRule "Transaction"
    	provision "C if ([Cleared] = Y or ([Cleared] = I and [Action type] = TERM)) and [Event type] = CLRG and [Clearing swap USIs] is not populated, else {blank}; NR if [Cleared] = N"]
        if (cleared = Y or (cleared = I and actionType = ActionTypeEnum -> TERM))
                and eventType = EventTypeEnum -> CLRG
        then (if clearingSwapUTIs is absent
            then clearingSwapUSIs exists
            else if clearingSwapUTIs exists
            then clearingSwapUSIs is absent)
        else clearingSwapUTIs is absent

    condition OriginalSwapUSICondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "7" validationRule "Transaction"
    provision "C if ([Cleared] = Y and [Action type] = NEWT and [Event type] = CLRG) and [Original Swap UTI] is not populated, else {blank}; NR if [Cleared] = N or I"]
        if cleared = Y
                and actionType = ActionTypeEnum -> NEWT
                and eventType = EventTypeEnum -> CLRG
        then (if originalSwapUSI is absent
            then originalSwapUTI exists
            else if originalSwapUSI exists
            then originalSwapUTI is absent)
        else originalSwapUSI is absent

    condition OriginalSwapUTICondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "8" validationRule "Transaction"
    provision "C if ([Cleared] = Y and [Action type] = NEWT and [Event type] = CLRG) and [Original Swap USI] is not populated, else {blank}; NR if [Cleared] = N or I"]
        if cleared = Y
                and actionType = ActionTypeEnum -> NEWT
                and eventType = EventTypeEnum -> CLRG
        then (if originalSwapUTI is absent
            then originalSwapUSI exists
            else if originalSwapUTI exists
            then originalSwapUSI is absent)
        else originalSwapUTI is absent

    condition OriginalSwapSDRidentifierCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "9" validationRule "Transaction"
    provision "C if ([Cleared] = Y or ([Cleared] = I [Action type] = TERM)) and [Event type] = CLRG, else {blank}; NR if [Cleared] = N"]
        if (cleared = Y or (cleared = I and actionType = ActionTypeEnum -> TERM))
                and eventType = EventTypeEnum -> CLRG
        then originalSwapSDRIdentifier exists
        else originalSwapSDRIdentifier is absent

    condition ClearingReceiptTimestampCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "10" validationRule "Transaction"
    provision "C if ([Cleared] = Y or ([Cleared] = I and [Action type] = TERM)) and [Event type] = 'CLRG', else {blank}; NR if [Cleared] = N"]
        if cleared = Y
                or (cleared = I and actionType = ActionTypeEnum -> TERM)
                    and eventType = EventTypeEnum -> CLRG
        then clearingReceiptTimestamp exists
        else clearingReceiptTimestamp is absent

    condition ClearingExceptionsAndExemptions1Condition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "11" validationRule "Transaction"
      provision "O if [Cleared] = N; NR if [Cleared] = Y or I"]
        if cleared = Y or cleared = I
        then clearingExceptionsAndExemptionsCounterparty1 is absent

    condition ClearingExceptionsAndExemptions2Condition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "12" validationRule "Transaction"
      provision "O if [Cleared] = N; NR if [Cleared] = Y or I"]
        if cleared = Y or cleared = I
        then clearingExceptionsAndExemptionsCounterparty2 is absent

//Counterparty category validation logic
    condition Counterparty1FinancialEntityIndicatorCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "16" validationRule "Transaction"
      provision "C if [Cleared] = N or I; NR if [Cleared] = Y"]
        if cleared = N or cleared = I
        then counterparty1FinancialEntityIndicator exists
        else if cleared = Y
        then counterparty1FinancialEntityIndicator is absent

    condition BuyerIdentifierCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "18" validationRule "Transaction"
      provision "C if [Payer identifier] and [Receiver identifier] are not populated, else {blank}; 
      When populated, the value shall match the value in [Counterparty 1 (reporting counterparty)] or [Counterparty 2]"]
        if (leg1 -> payerIdentifier is absent and leg2 -> payerIdentifier is absent)
                and (leg1 -> receiverIdentifier is absent and leg2 -> receiverIdentifier is absent)
        then (buyerIdentifier exists and (buyerIdentifier = counterparty1 or buyerIdentifier = counterparty2))
        else buyerIdentifier is absent

    condition SellerIdentifierCondition:
     [regulatoryReference CFTC Part45 appendix "1" dataElement "19" validationRule "Transaction"
      provision "C if [Payer identifier] and [Receiver identifier] are not populated, else {blank};
      When populated, the value shall match the value in [Counterparty 1 (reporting counterparty)] or [Counterparty 2]"]
        if (leg1 -> payerIdentifier is absent and leg2 -> payerIdentifier is absent)
                and (leg1 -> receiverIdentifier is absent and leg2 -> receiverIdentifier is absent)
        then (sellerIdentifier exists and (sellerIdentifier = counterparty1 or sellerIdentifier = counterparty2))
        else sellerIdentifier is absent

    condition PayerIdentifierCondition:
      [regulatoryReference CFTC Part45 appendix "1" dataElement "20" validationRule "Transaction"
      provision "C if [Buyer identifier] and [Seller identifier] are not populated, else {blank};
      When populated, the value shall match the value in [Counterparty 1 (reporting counterparty)] or [Counterparty 2]"]
        if buyerIdentifier is absent and sellerIdentifier is absent
        then ((if leg1 -> payerIdentifier exists then [counterparty1, counterparty2] any = leg1 -> payerIdentifier)
                and (if leg2 -> payerIdentifier exists then [counterparty1, counterparty2] any = leg2 -> payerIdentifier))
        else leg1 -> payerIdentifier is absent and leg2 -> payerIdentifier is absent

    condition ReceiverIdentifierCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "21" validationRule "Transaction"
      provision "C if [Buyer identifier] and [Seller identifier] are not populated, else {blank};
      When populated, the value shall match the value in [Counterparty 1 (reporting counterparty)] or [Counterparty 2]"]
        if buyerIdentifier is absent and sellerIdentifier is absent
        then ((if leg1 -> receiverIdentifier exists then [counterparty1, counterparty2] any = leg1 -> receiverIdentifier)
                and (if leg2 -> receiverIdentifier exists then [counterparty1, counterparty2] any = leg2 -> receiverIdentifier))
        else leg1 -> receiverIdentifier is absent and leg2 -> receiverIdentifier is absent

//Events category validation logic
    condition EventTypeCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "27" validationRule "Transaction"
      provision "C, for valid Action type and Event type Combination, see table in Appendix F."]
        if actionType = ActionTypeEnum -> NEWT
        then [EventTypeEnum -> TRAD, EventTypeEnum -> NOVA, EventTypeEnum -> COMP, EventTypeEnum -> CLRG, EventTypeEnum -> EXER, EventTypeEnum -> ALOC, EventTypeEnum -> CLAL, EventTypeEnum -> PTNG, EventTypeEnum -> CORP] any = eventType
        else if actionType = ActionTypeEnum -> MODI
        then [EventTypeEnum -> TRAD, EventTypeEnum -> NOVA, EventTypeEnum -> COMP, EventTypeEnum -> EXER, EventTypeEnum -> ALOC, EventTypeEnum -> CREV, EventTypeEnum -> CORP, EventTypeEnum -> UPDT] any = eventType
        else if actionType = ActionTypeEnum -> TERM
        then [EventTypeEnum -> NOVA, EventTypeEnum -> COMP, EventTypeEnum -> ETRM, EventTypeEnum -> CLRG, EventTypeEnum -> EXER, EventTypeEnum -> ALOC, EventTypeEnum -> CLAL, EventTypeEnum -> CREV, EventTypeEnum -> CORP] any = eventType
        else if actionType = ActionTypeEnum -> PRTO
        then eventType = EventTypeEnum -> PTNG
        else [ActionTypeEnum -> CORR, ActionTypeEnum -> EROR, ActionTypeEnum -> REVI, ActionTypeEnum -> VALU, ActionTypeEnum -> MARU] any = actionType
            and eventType is absent

    condition AmendmentIndicatorCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "28" validationRule "Transaction"
      provision "C if [Action type] = MODI, else {blank}"]
        if actionType = ActionTypeEnum -> MODI
        then amendmentIndicator exists
        else amendmentIndicator is absent

    condition EventIdentifierCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "29" validationRule "Transaction"
      provision "C if [Event type] = COMP or CREV, else {blank}"]
        if [EventTypeEnum -> COMP, EventTypeEnum -> CREV] any = eventType
        then eventIdentifier exists
        else eventIdentifier is absent

    condition EventTimestampCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "30" validationRule "Transaction"
      provision "M, the value shall be equal to or later than the value in [Execution timestamp]"]
        eventTimestamp = executionTimestamp or eventTimestamp > executionTimestamp

//Notional amounts and quantities category validation logic
    condition NotionalAmountCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "31" validationRule "Transaction"
        provision "M, for FX, if UPI.[Instrument type] = Option, the value shall match the value in Call amount or Put amount"]
        if (nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange
                    or cftcGuidebook -> assetClass = "ForeignExchange")
                and (cftcGuidebook -> optionStyle exists
                    or nonReportable -> postUpiData -> Header -> InstrumentType = Option)
        then ((if leg1 -> notionalAmount exists and (callAmount exists and putAmount exists) then leg1 -> notionalAmount = callAmount or leg1 -> notionalAmount = putAmount)
                and (if leg2 -> notionalAmount exists and (callAmount exists and putAmount exists) then leg2 -> notionalAmount = callAmount or leg2 -> notionalAmount = putAmount))

    condition NotionalCurrencyCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "32" validationRule "Transaction"
      provision "M, for FX, if UPI.[Instrument type] = Option, the value shall match the value in Call Currency or Put Currency"]
        if (nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange
                    or cftcGuidebook -> assetClass = "ForeignExchange")
                and (cftcGuidebook -> optionStyle exists
                    or nonReportable -> postUpiData -> Header -> InstrumentType = Option)
        then ((if leg1 -> notionalCurrency exists and (callCurrency exists and putCurrency exists) then leg1 -> notionalCurrency = callCurrency or leg1 -> notionalCurrency = putCurrency)
                and (if leg2 -> notionalCurrency exists and (callCurrency exists and putCurrency exists) then leg2 -> notionalCurrency = callCurrency or leg2 -> notionalCurrency = putCurrency))

    condition NotionalAmountScheduleCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "33" validationRule "Transaction"
      provision "Transaction-IR: C if UPI.[Notional schedule] <> Constant, else {blank}"]
        if (cftcGuidebook -> assetClass = "InterestRate"
                or nonReportable -> postUpiData -> Header -> AssetClass = Rates)
        then (if (nonReportable -> postUpiData -> Attributes -> NotionalSchedule exists
                        and nonReportable -> postUpiData -> Attributes -> NotionalSchedule <> Constant)
                    or nonReportable -> notionalSchedule <> Constant
            then (leg1 -> notionalAmountSchedule -> value exists
                    or leg2 -> notionalAmountSchedule -> value exists)
            else (leg1 -> notionalAmountSchedule -> value is absent
                and leg2 -> notionalAmountSchedule -> value is absent))

    condition CallAmountCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "36" validationRule "Transaction"
      provision "Transaction-FX: C if UPI.[Instrument type] = Option, at least one is required: ([Call amount] or [Put amount])"]
        if (cftcGuidebook -> assetClass = "ForeignExchange"
                    or nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange)
                and (cftcGuidebook -> optionStyle exists
                    or nonReportable -> postUpiData -> Header -> InstrumentType = Option)
        then callAmount exists or putAmount exists

    condition CallCurrencyCondition:
        [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "37" validationRule "Transaction"
        provision "Transaction-FX: C if [Call amount] is populated, else {blank}"]
        if (cftcGuidebook -> assetClass = "ForeignExchange"
                    or nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange)
                and callAmount exists
        then callCurrency exists
        else callCurrency is absent

    condition PutAmountCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "38" validationRule "Transaction"
      provision "Transaction-FX: C if UPI.[Instrument type] = Option, at least one is required: ([Call amount] or [Put amount])"]
        if (cftcGuidebook -> assetClass = "ForeignExchange"
                    or nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange)
                and (cftcGuidebook -> optionStyle exists
                    or nonReportable -> postUpiData -> Header -> InstrumentType = Option)
        then putAmount exists or callAmount exists

    condition PutCurrencyCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "39" validationRule "Transaction"
      provision "Transaction-FX: C if [Put amount] is populated, else {blank}"]
        if (cftcGuidebook -> assetClass = "ForeignExchange"
                    or nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange)
                and putAmount exists
        then putCurrency exists
        else putCurrency is absent

    condition NotionalQuantityCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "40" validationRule "Transaction"
      provision "Transaction-CO: Optional"]
        if cftcGuidebook -> assetClass <> "Commodity"
        then leg1 -> notionalQuantity is absent and leg2 -> notionalQuantity is absent

    condition QuantityFrequencyCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "41" validationRule "Transaction"
      provision "Transaction-CO: C if [Notional quantity] is populated, else {blank}"]
        if cftcGuidebook -> assetClass = "Commodity"
        then ((if leg1 -> notionalQuantity exists then leg1 -> quantityFrequency exists)
                and (if leg1 -> notionalQuantity is absent then leg1 -> quantityFrequency is absent)
                and (if leg2 -> notionalQuantity exists then leg2 -> quantityFrequency exists)
                and (if leg2 -> notionalQuantity is absent then leg2 -> quantityFrequency is absent))
        else leg1 -> quantityFrequency is absent and leg2 -> quantityFrequency is absent

    condition QuantityFrequencyMultiplierCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "42" validationRule "Transaction"
        provision "Transaction-CO: C if [Quantity frequency] <> ONDE or ADHO, else {blank}"]
        if cftcGuidebook -> assetClass = "Commodity"
        then ((if leg1 -> quantityFrequency exists
                    and [FrequencyPeriodEnum -> ONDE, FrequencyPeriodEnum -> ADHO] any <> leg1 -> quantityFrequency
            then leg1 -> quantityFrequencyMultiplier exists
            else leg1 -> quantityFrequencyMultiplier is absent)
                and (if leg2 -> quantityFrequency exists
                            and [FrequencyPeriodEnum -> ONDE, FrequencyPeriodEnum -> ADHO] any <> leg2 -> quantityFrequency
                    then leg2 -> quantityFrequencyMultiplier exists
                    else leg2 -> quantityFrequencyMultiplier is absent))
        else leg1 -> quantityFrequencyMultiplier is absent
            and leg2 -> quantityFrequencyMultiplier is absent

    condition QuantityUnitOfMeasureCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "43" validationRule "Transaction"
      provision "Transaction-EQ/CO: Mandatory"]
        if ["Commodity", "Equity"] any = cftcGuidebook -> assetClass
        then leg1 -> quantityUnitOfMeasure exists or leg2 -> quantityUnitOfMeasure exists
        else leg1 -> quantityUnitOfMeasure is absent
            and leg2 -> quantityUnitOfMeasure is absent

    condition TotalNotionalQuantityCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "44" validationRule "Transaction"
      provision "Transaction-EQ/CO: Mandatory"]
        if ["Commodity", "Equity"] any = cftcGuidebook -> assetClass
        then leg1 -> totalNotionalQuantity exists or leg2 -> totalNotionalQuantity exists
        else leg1 -> totalNotionalQuantity is absent
            and leg2 -> totalNotionalQuantity is absent

//Packages category validation logic
    condition PackageIdentifierCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "46" validationRule "Transaction"
      provision "C if [Package indicator] = True, else {blank}"]
        if packageIndicator = True
        then packageIdentifier exists
        else packageIdentifier is absent

    condition PackageTransactionPriceCurrencyCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "48" validationRule "Transaction"
      provision "C if [Package transaction price notation] = 1, else {blank}"]
        if packageTransactionPriceNotation = Monetary
        then packageTransactionPriceCurrency exists
        else packageTransactionPriceCurrency is absent

    condition PackageTransactionPriceCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "47" validationRule "Transaction"
      provision "C if [Package indicator] = True and [Package transaction spread] is not populated, else {blank}"]
        if (packageIndicator = True and packageTransactionSpread is absent)
        then packageTransactionPrice exists
        else packageTransactionPrice is absent

    condition PackageTransactionSpreadCurrencyCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "51" validationRule "Transaction"
      provision "C if [Package transaction spread notation] = '1', else {blank}"]
        if packageTransactionSpreadNotation = Monetary
        then packageTransactionSpreadCurrency exists
        else packageTransactionSpreadCurrency is absent

    condition PackageTransactionSpreadCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "50" validationRule "Transaction"
      provision "C if [Package indicator] = True and [Package transaction price] is not populated, else {blank}"]
        if packageIndicator = True and packageTransactionPrice is absent
        then packageTransactionSpread exists
        else packageTransactionSpread is absent

//Payments category validation logic
    condition DayCountConventionCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "53" validationRule "Transaction"
      provision "Transaction-CR/IR/FX: O
                Transaction-CO/EQ: C if [Payment frequency period] is populated, else {blank}"]
        if ["Commodity", "Equity"] any = cftcGuidebook -> assetClass
        then ((if leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriod exists
            then leg1 -> periodicPayment -> fixedRateDayCountConvention exists
            else if leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriod exists
            then leg1 -> periodicPayment -> floatingRateDayCountConvention exists
            else leg1 -> periodicPayment -> fixedRateDayCountConvention is absent
                and leg1 -> periodicPayment -> floatingRateDayCountConvention is absent)
                and (if leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriod exists
                    then leg2 -> periodicPayment -> fixedRateDayCountConvention exists
                    else if leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriod exists
                    then leg2 -> periodicPayment -> floatingRateDayCountConvention exists
                    else leg2 -> periodicPayment -> fixedRateDayCountConvention is absent
                        and leg2 -> periodicPayment -> floatingRateDayCountConvention is absent))

    condition FixingDateCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "54" validationRule "Transaction"
      provision "Transaction - CR/IR/EQ/CO: O
                Transaction - FX: C if (UPI.[Instrument type] = Forward or Option) and UPI.[Delivery type] = Cash, else {blank}."]
        if (nonReportable -> postUpiData -> Header -> AssetClass = Foreign_Exchange
                or cftcGuidebook -> assetClass = "ForeignExchange")
        then (if ([AnnaDsbInstrumentTypeEnum -> Forward, AnnaDsbInstrumentTypeEnum -> Option] any = nonReportable -> postUpiData -> Header -> InstrumentType
                        or [AnnaDsbInstrumentTypeEnum -> Forward, AnnaDsbInstrumentTypeEnum -> Option] any = nonReportable -> instrumentType)
                    and (nonReportable -> postUpiData -> Attributes -> DeliveryType = CASH
                        or cftcGuidebook -> settlementType = "CASH")
            then (leg1 -> fixingDate exists or leg2 -> fixingDate exists)
            else (leg1 -> fixingDate is absent and leg2 -> fixingDate is absent))

    condition FloatingRateResetFrequencyPeriodCond:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "55" validationRule "Transaction"
      provision "Transaction - CR/FX/EQ/CO: O
                Transaction - IR: C if UPI.[Instrument type] = Swap and UPI.[Underlier type] <> Fixed - Fixed, else {blank}.
                When populated with EXPI, [Floating rate reset frequency period multiplier] must be 1."]
        (if (nonReportable -> postUpiData -> Header -> AssetClass = Rates
                or cftcGuidebook -> assetClass = "InterestRate")
        then (if (nonReportable -> postUpiData -> Header -> InstrumentType = Swap
                        or nonReportable -> instrumentType = Swap)
                    and ((nonReportable -> postUpiData -> Derived -> UnderlyingAssetType exists
                            and nonReportable -> postUpiData -> Derived -> UnderlyingAssetType <> Fixed_Fixed)
                        or nonReportable -> underlyingAssetType <> "Fixed_Fixed")
            then leg1 -> periodicPayment -> floatingRateResetFrequencyPeriod exists
                    or leg2 -> periodicPayment -> floatingRateResetFrequencyPeriod exists
            else leg1 -> periodicPayment -> floatingRateResetFrequencyPeriod is absent
                and leg2 -> periodicPayment -> floatingRateResetFrequencyPeriod is absent))
            and ((if leg1 -> periodicPayment -> floatingRateResetFrequencyPeriod = EXPI
            then leg1 -> periodicPayment -> floatingRateResetFrequencyMultiplier = 1)
                and (if leg2 -> periodicPayment -> floatingRateResetFrequencyPeriod = EXPI
                    then leg2 -> periodicPayment -> floatingRateResetFrequencyMultiplier = 1))

    condition FloatingRateResetFrequencyPeriodMultiplierCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "56" validationRule "Transaction"
      provision "C if [Floating rate reset frequency period] <> ADHO, else {blank}"]
        (if leg1 -> periodicPayment -> floatingRateResetFrequencyPeriod exists
                and leg1 -> periodicPayment -> floatingRateResetFrequencyPeriod <> ADHO
        then leg1 -> periodicPayment -> floatingRateResetFrequencyMultiplier exists
        else leg1 -> periodicPayment -> floatingRateResetFrequencyMultiplier is absent)
            and (if leg2 -> periodicPayment -> floatingRateResetFrequencyPeriod exists
                        and leg2 -> periodicPayment -> floatingRateResetFrequencyPeriod <> ADHO
                then leg2 -> periodicPayment -> floatingRateResetFrequencyMultiplier exists
                else leg2 -> periodicPayment -> floatingRateResetFrequencyMultiplier is absent)

    condition OtherPaymentTypeCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "57" validationRule "Transaction"
      provision "Transaction - CR: C, at least one is required: ([Fixed rate] or [Spread] or [Other payment type] = UFRO. Allowable values UWIN and PEXH are optional and independent of the above condition.
                  Transaction  IR/FX/EQ/CO - O."]
        if cftcGuidebook -> assetClass = "Credit"
        then (if leg1 -> fixedRate is absent
                    and leg2 -> fixedRate is absent
                    and leg1 -> spread is absent
                    and leg2 -> spread is absent
            then otherPayment -> paymentType any = UFRO)

    condition PaymentFrequencyPeriodCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "63" validationRule "Transaction"
      provision "Transaction CR/IR/EQ/CO - O when populated with EXPI, [Payment frequency period multiplier] must be 1."]
        if [AnnaDsbAssetClassEnum -> Credit, AnnaDsbAssetClassEnum -> Rates, AnnaDsbAssetClassEnum -> Equity, AnnaDsbAssetClassEnum -> Commodities] any = nonReportable -> postUpiData -> Header -> AssetClass
                or ["Credit", "InterestRate", "Equity", "Commodity"] any = cftcGuidebook -> assetClass
        then ((if leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriod = EXPI
            then leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier = 1
            else if leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriod = EXPI
            then leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier = 1)
                and (if leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriod = EXPI
                    then leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier = 1
                    else if leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriod = EXPI
                    then leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier = 1))

    condition PaymentFrequencyPeriodMultiplierCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "64" validationRule "Transaction"
      provision "Transaction - CR/IR/EQ/CO: C if [Payment frequency period] <> ADHO, else {blank}"]
        if ["Credit", "InterestRate", "Equity", "Commodity"] any = cftcGuidebook -> assetClass
        then ((if leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriod exists
                    and leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriod <> FrequencyPeriodEnum -> ADHO
            then leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier exists
            else if leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriod exists
                    and leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriod <> FrequencyPeriodEnum -> ADHO
            then leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier exists
            else leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier is absent
                and leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier is absent)
                and (if leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriod exists
                            and leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriod <> FrequencyPeriodEnum -> ADHO
                    then leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier exists
                    else if leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriod exists
                            and leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriod <> FrequencyPeriodEnum -> ADHO
                    then leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier exists
                    else leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier is absent
                        and leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier is absent))
        else leg1 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier is absent
            and leg1 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier is absent
            and leg2 -> periodicPayment -> fixedRatePaymentFrequencyPeriodMultiplier is absent
            and leg2 -> periodicPayment -> floatingRatePaymentFrequencyPeriodMultiplier is absent

//Prices category validation logic
    condition ExchangeRateCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "65" validationRule "Transaction"
      provision "Transaction - FX: Mandatory"]
        if cftcGuidebook -> assetClass = "ForeignExchange"
        then exchangeRate exists
        else exchangeRate is absent

    condition ExchangeRateBasisCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "66" validationRule "Transaction"
      provision "Transaction - FX: Mandatory"]
        if cftcGuidebook -> assetClass = "ForeignExchange"
        then exchangeRateBasis exists
        else exchangeRateBasis is absent

    condition FixedRateCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "67" validationRule "Transaction"
      provision "Transaction - CR: C if [Spread] is not populated and [Other payment type] <> UFRO, and [Post-priced swap indicator] = False, and UPI.[Instrument           type] <> Option, else {blank}.
                Transaction - IR: C if [Spread] is not populated and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}.
                Transaction - CO: C if [Price] or [Spread] is not populated and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}."]
        // Credit
        if cftcGuidebook -> assetClass = "Credit"
        then (if leg1 -> spread is absent
                    and otherPayment -> paymentType any <> UFRO
                    and postPricedSwapIndicator = False
                    and cftcGuidebook -> optionStyle is absent
            then leg1 -> fixedRate exists
            else leg1 -> fixedRate is absent)
                and (if leg2 -> spread is absent
                            and otherPayment -> paymentType any <> UFRO
                            and postPricedSwapIndicator = False
                            and cftcGuidebook -> optionStyle is absent
                    then leg2 -> fixedRate exists
                    else leg2 -> fixedRate is absent)
        // Rates
        else if cftcGuidebook -> assetClass = "InterestRate"
        then (if leg1 -> spread is absent
                    and postPricedSwapIndicator = False
                    and cftcGuidebook -> optionStyle is absent
            then leg1 -> fixedRate exists
            else leg1 -> fixedRate is absent)
                and (if leg2 -> spread is absent
                            and postPricedSwapIndicator = False
                            and cftcGuidebook -> optionStyle is absent
                    then leg2 -> fixedRate exists
                    else leg2 -> fixedRate is absent)
        else if cftcGuidebook -> assetClass = "Commodity"
                and ((price is absent or (leg1 -> spread is absent and leg2 -> spread is absent)) and postPricedSwapIndicator = False and cftcGuidebook -> optionStyle is absent)
        then leg1 -> fixedRate exists or leg2 -> fixedRate exists
        else leg1 -> fixedRate is absent and leg2 -> fixedRate is absent

    condition PriceCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "69" validationRule "Transaction"
      provision "Transaction - EQ: C if [Spread] is not populated and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}.
                 Transaction - CO: C if ([Fixed rate] or [Spread] is not populated) and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}."]
        if cftcGuidebook -> assetClass = "Equity"
                and leg1 -> spread is absent
                and leg2 -> spread is absent
                and postPricedSwapIndicator = False
                and cftcGuidebook -> optionStyle is absent
        then price exists
        else if cftcGuidebook -> assetClass = "Commodity"
                and ((leg1 -> fixedRate is absent and leg2 -> fixedRate is absent) or (leg1 -> spread is absent and leg2 -> spread is absent))
                and postPricedSwapIndicator = False
                and cftcGuidebook -> optionStyle is absent
        then price exists
        else price is absent

    condition PriceCurrencyCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "70" validationRule "Transaction"
      provision "Transaction - EQ/CO: C if [Price notation] = 1, else {blank}."]
        if ["Equity", "Commodity"] any = cftcGuidebook -> assetClass
                and priceNotation = Monetary
        then priceCurrency exists
        else priceCurrency is absent

    condition PriceNotationCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "71" validationRule "Transaction"
      provision "Transaction - EQ/CO: C if [Price] is populated, else {blank}."]
        if ["Equity", "Commodity"] any = cftcGuidebook -> assetClass and price exists
        then priceNotation exists
        else priceNotation is absent

    condition PriceUnitOfMesureCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "72" validationRule "Transaction"
      provision "Transaction - EQ/CO: C if [Price] is populated, else {blank}"]
        if ["Equity", "Commodity"] any = cftcGuidebook -> assetClass and price exists
        then priceUnitOfMeasure exists
        else priceUnitOfMeasure is absent

    condition SpreadCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "73" validationRule "Transaction"
      provision "Transaction - CR: C if [Fixed rate] is not populated and [Other payment type] <> UFRO, and [Post-priced swap indicator] = False, and           UPI.[Instrument type] <> Option, else {blank}
                Transaction - IR: C if [Fixed rate] is not populated and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}.
                Transaction - EQ: C if [Price] is not populated, and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}.Abs
                Transaction - CO: C if [Price] or [Fixed rate] is not populated and [Post-priced swap indicator] = False, and UPI.[Instrument type] <> Option, else {blank}"]
        // Credit
        if cftcGuidebook -> assetClass = "Credit"
        then (if leg1 -> fixedRate is absent
                    and otherPayment -> paymentType any <> UFRO
                    and postPricedSwapIndicator = False
                    and cftcGuidebook -> optionStyle is absent
            then leg1 -> spread exists
            else leg1 -> spread is absent)
                and (if leg2 -> fixedRate is absent
                            and otherPayment -> paymentType any <> UFRO
                            and postPricedSwapIndicator = False
                            and cftcGuidebook -> optionStyle is absent
                    then leg2 -> spread exists
                    else leg2 -> spread is absent)
        // Rates
        else if cftcGuidebook -> assetClass = "InterestRate"
        then (if leg1 -> fixedRate is absent
                    and postPricedSwapIndicator = False
                    and cftcGuidebook -> optionStyle is absent
            then leg1 -> spread exists
            else leg1 -> spread is absent)
                and (if leg2 -> fixedRate is absent
                            and postPricedSwapIndicator = False
                            and cftcGuidebook -> optionStyle is absent
                    then leg2 -> spread exists
                    else leg2 -> spread is absent)
        // Equity
        else if cftcGuidebook -> assetClass = "Equity"
                and (price is absent and postPricedSwapIndicator = False and cftcGuidebook -> optionStyle is absent)
        then leg1 -> spread exists or leg2 -> spread exists
        // Commodity
        else if cftcGuidebook -> assetClass = "Commodity"
        then (if (price is absent or leg1 -> fixedRate is absent)
                    and postPricedSwapIndicator = False
                    and cftcGuidebook -> optionStyle is absent
            then leg1 -> spread exists
            else leg1 -> spread is absent)
                and (if (price is absent or leg2 -> fixedRate is absent)
                            and postPricedSwapIndicator = False
                            and cftcGuidebook -> optionStyle is absent
                    then leg2 -> spread exists
                    else leg2 -> spread is absent)
        else leg1 -> spread is absent and leg2 -> spread is absent

    condition SpreadCurrencyCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "74" validationRule "Transaction"
      provision "Transaction - CR/IR/EQ/CO: C if [Spread notation] = 1, else {blank}"]
        (if ["Credit", "InterestRate", "Equity", "Commodity"] any = cftcGuidebook -> assetClass
                and leg1 -> spreadNotation = Monetary
        then leg1 -> spreadCurrency exists
        else leg1 -> spreadCurrency is absent)
            and (if ["Credit", "InterestRate", "Equity", "Commodity"] any = cftcGuidebook -> assetClass
                        and leg2 -> spreadNotation = Monetary
                then leg2 -> spreadCurrency exists
                else leg2 -> spreadCurrency is absent)

    condition SpreadNotationCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "75" validationRule "Transaction"
      provision "Transaction - CR/IR/EQ/CO: C if [Spread] is populated, else {blank}"]
        (if ["Credit", "InterestRate", "Equity", "Commodity"] any = cftcGuidebook -> assetClass
                and leg1 -> spread exists
        then leg1 -> spreadNotation exists
        else leg1 -> spreadNotation is absent)
            and (if ["Credit", "InterestRate", "Equity", "Commodity"] any = cftcGuidebook -> assetClass
                        and leg2 -> spread exists
                then leg2 -> spreadNotation exists
                else leg2 -> spreadNotation is absent)

    condition StrikePriceCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "76" validationRule "Transaction"
      provision "C if [Post-priced swap indicator] = False and UPI.[Instrument type] = Option, else {blank}."]
        if postPricedSwapIndicator = False and cftcGuidebook -> optionStyle exists
        then strikePrice exists
        else strikePrice is absent

    condition StrikePriceCurrencyCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "77" validationRule "Transaction"
      provision "C if [Strike price notation] = 1, else {blank}"]
        if strikePriceNotation = Monetary
        then strikePriceCurrency exists
        else strikePriceCurrency is absent

    condition StrikePriceNotationCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "78" validationRule "Transaction"
      provision "C if [Strike price] is populated, else {blank}"]
        if strikePrice exists
        then strikePriceNotation exists
        else strikePriceNotation is absent

    condition OptionPremiumAmountCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "79" validationRule "Transaction"
      provision "C if UPI.[Instrument type] = Option, else {blank}."]
        if cftcGuidebook -> optionStyle exists
        then optionPremiumAmount exists
        else optionPremiumAmount is absent

    condition OptionPremiumCurrencyCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "80" validationRule "Transaction"
      provision "C if [Option premium amount] > 0, else {blank}"]
        if optionPremiumAmount > 0
        then optionPremiumCurrency exists
        else optionPremiumCurrency is absent

    condition OptionPremiumPaymentDateCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "81" validationRule "Transaction"
      provision "C if [Option premium amount] > 0, else {blank}"]
        if optionPremiumAmount > 0
        then optionPremiumPaymentDate exists
        else optionPremiumPaymentDate is absent

    condition FirstExerciseDateCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "82" validationRule "Transaction"
      provision "C if UPI.[Instrument type] = Option, else {blank}."]
        if cftcGuidebook -> optionStyle exists
        then firstExerciseDate exists
        else firstExerciseDate is absent

//Product category validation logic
    condition CDSIndexAttachmentPointCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "83" validationRule "Transaction"
      provision "Transaction - CR: C if UPI.[Underlier type] = Index tranche, else {blank};
                When populated, the value shall be less than the value in [CDS index detachment point]"]
        if (nonReportable -> postUpiData -> Header -> AssetClass = Credit
                    or cftcGuidebook -> assetClass = "Credit")
                and (nonReportable -> postUpiData -> Derived -> UnderlyingAssetType = Index_Tranche
                    or nonReportable -> underlyingAssetType = "Index_Tranche")
        then (cdSIndexAttachmentPoint exists and cdSIndexAttachmentPoint < cdSIndexDetachmentPoint)
        else cdSIndexAttachmentPoint is absent

    condition CDSIndexDetachmentPointCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "84" validationRule "Transaction"
      provision "Transaction - CR: C if UPI.[Underlier type] = Index tranche, else {blank};
                When populated, the value shall be greater than the value in [CDS index attachment point]"]
        if (nonReportable -> postUpiData -> Header -> AssetClass = Credit
                    or cftcGuidebook -> assetClass = "Credit")
                and (nonReportable -> postUpiData -> Derived -> UnderlyingAssetType = Index_Tranche
                    or nonReportable -> underlyingAssetType = "Index_Tranche")
        then (cdSIndexDetachmentPoint exists and cdSIndexDetachmentPoint > cdSIndexAttachmentPoint)
        else cdSIndexDetachmentPoint is absent

    condition IndexFactorCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "85" validationRule "Transaction"
      provision "Transaction - CR: C if UPI.[Underlier type] = Index or Index tranche, else {blank}"]
        if (nonReportable -> postUpiData -> Header -> AssetClass = Credit
                    or cftcGuidebook -> assetClass = "Credit")
                and ([AnnaDsbUnderlyingAssetTypeEnum -> Index, AnnaDsbUnderlyingAssetTypeEnum -> Index_Tranche] any = nonReportable -> postUpiData -> Derived -> UnderlyingAssetType
                    or ["Index", "Index_Tranche"] any = nonReportable -> underlyingAssetType)
        then indexFactor exists
        else indexFactor is absent

    condition FinalContractualSettlementDateCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "88" validationRule "Transaction"
      provision "M, When populated, the value shall be equal to or later than the value in [Expiration date]."]
    [regulatoryReference ISDA ISDAWorkingGroup date "unknown"
        provision "Within the design of the CDM model this condition can't be modelled."]
        if finalContractualSettlementDate exists
        then finalContractualSettlementDate = expirationDate or finalContractualSettlementDate > expirationDate
        else False

    condition SettlementCurrencyCondition:
    [regulatoryReference CFTC Part45_V3_2 appendix "1" dataElement "89" validationRule "Transaction"
      provision "C if UPI.[Delivery type] = Cash, else {blank}"]
        if nonReportable -> postUpiData -> Attributes -> DeliveryType = CASH
                or cftcGuidebook -> settlementType = "CASH"
        then (leg1 -> settlementCurrency exists or leg2 -> settlementCurrency exists)
        else (leg1 -> settlementCurrency is absent and leg2 -> settlementCurrency is absent)

//Transaction Related category validation logic    
    condition NonStandardizedTermIndicatorCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "92" validationRule "Transaction"
      provision "C if [Cleared] = N; NR if [Cleared] = Y or I"]
        if cleared = N
        then nonStandardizedTermIndicator exists
        else if cleared = I or cleared = Y
        then nonStandardizedTermIndicator is absent

    condition ExpirationDateCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "95" validationRule "Transaction"
      provision "M, when populated, the value shall be equal to or later than the value in [Effective date]"]
    [regulatoryReference ISDA ISDAWorkingGroup date "unknown"
        provision "Within the design of the CDM model this condition can't be modelled."]
        if expirationDate exists
        then expirationDate = effectiveDate or expirationDate > effectiveDate
        else False

    condition ReportingTimestampCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "97" validationRule "Transaction"
      provision "M, the value shall be equal to or later than the value in [Execution timestamp]"]
        reportingTimestamp = executionTimestamp or reportingTimestamp > executionTimestamp

    condition PlatformIdentifierCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "98" validationRule "Transaction"
      provision "C if [Cleared] = N or I; NR if [Cleared] = Y"]
        if cleared = N or cleared = I
        then platformIdentifier exists
        else if cleared = Y
        then platformIdentifier is absent

    condition PrimeBrokerageTransactionIndicatorCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "99" validationRule "Transaction"
      provision "C if [Cleared] = N or I; NR if [Cleared] = Y"]
        if cleared = N or cleared = I
        then primeBrokerageTransactionIndicator exists
        else if cleared = Y
        then primeBrokerageTransactionIndicator is absent

    condition PriorUSICondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "100" validationRule "Transaction"
      provision "C if [Action type] = NEWT and ([Event type] = NOVA or CLRG or EXER or ALOC or CLAL) and [Prior UTI (for one-to-one and one-to-many relations between transactions)] is not populated, else {blank}"]
        if actionType = ActionTypeEnum -> NEWT
                and [EventTypeEnum -> NOVA, EventTypeEnum -> CLRG, EventTypeEnum -> EXER, EventTypeEnum -> ALOC, EventTypeEnum -> CLAL] any = eventType
                and priorUTI is absent
        then priorUSI exists
        else priorUSI is absent

    condition PriorUTICondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "101" validationRule "Transaction"
      provision "C if [Action type] = NEWT and ([Event type] = NOVA or CLRG or EXER or ALOC or CLAL) and [Prior USI (for one-to-one and one-to-many relations between transactions)] is not populated, else {blank}"]
        if actionType = ActionTypeEnum -> NEWT
                and [EventTypeEnum -> NOVA, EventTypeEnum -> CLRG, EventTypeEnum -> EXER, EventTypeEnum -> ALOC, EventTypeEnum -> CLAL] any = eventType
                and priorUSI is absent
        then priorUTI exists
        else priorUTI is absent

    condition UniqueSwapIdentifierCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "102" validationRule "Transaction"
      provision "C if [Unique transaction identifier (UTI)] is not populated, else {blank}"]
        if uniqueTransactionIdentifier is absent
        then uniqueSwapIdentifier exists
        else uniqueSwapIdentifier is absent

    condition UniqueTransactionIdentifierCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "103" validationRule "Transaction"
      provision "C if [Unique swap identifier (USI)] is not populated, else {blank}"]
        if uniqueSwapIdentifier is absent
        then uniqueTransactionIdentifier exists
        else uniqueTransactionIdentifier is absent

//Transfer category validation logic
    condition NewSDRIdentifierCondition:
    [regulatoryReference CFTC Part45 appendix "1" dataElement "105" validationRule "Transaction"
      provision "C if [Event type] = PTNG, else {blank}"]
        if eventType = EventTypeEnum -> PTNG
        then newSDRIdentifier exists
        else newSDRIdentifier is absent

type CFTCGuidebook:
    optionType string (0..1)
    optionStyle string (0..1)
    assetClass string (1..1)
    mandatoryClearingIndicator boolean (1..1)
    maturityDateOfTheUnderlier date (0..1)
    largeNotionalOffFacilitySwapElectionIndicator boolean (0..1)
    sefOrDcmIndicator boolean (1..1)
    sefOrDcmAnonymousExecutionIndicator boolean (0..1)
    messageType string (1..1)
    settlementType string (0..1)
    sdMspIndicatorParty1 boolean (1..1)
    sdMspIndicatorParty2 boolean (1..1)
    physicalCommodityIndicator boolean (0..1)

    condition LargeNotionalOffFacilitySwapElectionIndicator:
        [regulatoryReference CFTC Guidebook_Extension appendix "" dataElement "" validationRule "Transaction" provision "
            DTCC = C For CFTC Trade State Submissions: Required if [SEF or DCM Indicator] = False. For CFTC PPD Submissions: If blank and [SEF or DCM Indicator] = False, GTR will calculate.  Should be blank if [SEF or DCM Indicator] = True; 
            CME = C if [SEF or DCM indicator] = 'FALSE', else {blank}; 
            ICE = C if [SEF or DCM indicator] = 'FALSE', else {blank}
        "]
        if sefOrDcmIndicator = True
        then largeNotionalOffFacilitySwapElectionIndicator is absent

    condition SefOrDcmAnonymousIndicator:
        [regulatoryReference CFTC Guidebook_Extension appendix "" dataElement "" validationRule "Transaction" provision "
            DTCC = C. SEF and DCM: Required
            DCO: Required when [NoA - Action Type] = 'TERM' and ([Event Type] = 'CLRG' or = 'CLAL'). NACK for all other submissions.
            CME = C if [SEFOrDCMIndicator] = True
            ICE = C if [SEF or DCM indcator] = 'TRUE', else {blank}
        "]
        if sefOrDcmIndicator = True
        then sefOrDcmAnonymousExecutionIndicator exists

    condition PhysicalCommodityIndicator:
        [regulatoryReference CFTC Guidebook_Extension appendix "" dataElement "" validationRule "Transaction" provision "
            DTCC = R (M) for CO
            CME = M for CO
            ICE = M for CO (Validation is incorrect: should be [Boolian cardinality 1] is currectly [Varchar(120)]
        "]
        if assetClass = "Commodity"
        then physicalCommodityIndicator exists

eligibility rule ReportableProduct from TransactionReportInstruction: <"When eligible for Part45">
    [regulatoryReference CFTC Part45 section "45.3(a)"
        provision "Swaps executed on or pursuant to the rules of a swap execution facility or designated contract market. For each swap executed on or pursuant to the rules of a swap execution facility or designated contract market, the swap execution facility or designated contract market shall report required swap creation data electronically to a swap data repository in the manner provided in  45.13(a) not later than the end of the next business day following the execution date."]
    filter HasContract

eligibility rule HasContract from TransactionReportInstruction: <"When eligible for Part45">
    [regulatoryReference CFTC Part45 section "45.3"
        provision "add text here"]
    extract TradeForEvent
    then extract tradableProduct -> product -> contractualProduct exists

eligibility rule IsReportableEvent from TransactionReportInstruction: <"When eligible for Part45">
    [regulatoryReference CFTC Part45 section "45.3(b)"
        provision "For each off-facility swap, the reporting counterparty shall report required swap creation data electronically to a swap data repository as provided by paragraph (b)(1) or (2) of this section, as applicable.
            (1) If the reporting counterparty is a swap dealer, major swap participant, or derivatives clearing organization, the reporting counterparty shall report required swap creation data electronically to a swap data repository in the manner provided in  45.13(a) not later than the end of the next business day following the execution date.
            (2) If the reporting counterparty is a non-SD/MSP/DCO counterparty, the reporting counterparty shall report required swap creation data electronically to a swap data repository in the manner provided in  45.13(a) not later than the end of the second business day following the execution date. "]
    [regulatoryReference ISDA PeerReviewGroup date "20220520"
        provision "The logic does not distinguish which reportableInformation should be reported by filtering on regulatorApplicability. In addition reportableEvent logic should include if the event falls under the CFTC jurisdiction according to the reportable information component."]
    filter True

type CFTCNonReportablePart43 extends common.NonReportable:
    counterparty1Format PartyIdentifierFormatEnum (0..1) <"Counterparty1 Format - LEI, or LEI and Person.">
        [nonReportable]
        [label "Counterparty1 Format (non-reportable)"]
        [ruleReference Counterparty1Format]
    counterparty2Format PartyIdentifierFormatEnum (0..1) <"Counterparty2 Format - LEI, or LEI and Person.">
        [nonReportable]
        [label "Counterparty2 Format (non-reportable)"]
        [ruleReference Counterparty2Format]

type CFTCNonReportablePart45 extends CFTCNonReportablePart43:
    buyerIdentifierFormat PartyIdentifierFormatEnum (0..1) <"BuyerIdentifier Format - LEI, or LEI and Person.">
        [nonReportable]
        [label "BuyerIdentifier Format (non-reportable)"]
        [ruleReference BuyerIdentifierFormat]
    sellerIdentifierFormat PartyIdentifierFormatEnum (0..1) <"SellerIdentifier Format - LEI, or LEI and Person.">
        [nonReportable]
        [label "SellerIdentifier Format (non-reportable)"]
        [ruleReference SellerIdentifierFormat]
